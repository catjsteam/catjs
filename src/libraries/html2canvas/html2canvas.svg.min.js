


<!DOCTYPE html>
<html lang="en" class="">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    
    
    <title>html2canvas/html2canvas.svg.min.js at master · niklasvh/html2canvas · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="niklasvh/html2canvas" name="twitter:title" /><meta content="html2canvas - Screenshots with JavaScript" name="twitter:description" /><meta content="https://avatars3.githubusercontent.com/u/551347?v=3&amp;s=400" name="twitter:image:src" />
      <meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars3.githubusercontent.com/u/551347?v=3&amp;s=400" property="og:image" /><meta content="niklasvh/html2canvas" property="og:title" /><meta content="https://github.com/niklasvh/html2canvas" property="og:url" /><meta content="html2canvas - Screenshots with JavaScript" property="og:description" />
      <meta name="browser-stats-url" content="/_stats">
    <link rel="assets" href="https://assets-cdn.github.com/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_source" data-pjax-transient>
      <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="D4758808:12AE:180C2EFF:54EDC5DE" name="octolytics-dimension-request_id" />
    
    <meta content="Rails, view, blob#show" name="analytics-event" />

    
    <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">


    <meta content="authenticity_token" name="csrf-param" />
<meta content="wI52MqoZUeJFoCxSSDi1RXwrghviaBibsLQYSDVCzP8Kt8kWhL6Dt7Fdrld97e3lQLmpexlBioJrH+TVbdazaA==" name="csrf-token" />

    <link href="https://assets-cdn.github.com/assets/github-84e4144e3c0347e1187b021a88b6bcbad5186ac898c63e26b13332c7c53504a6.css" media="all" rel="stylesheet" />
    <link href="https://assets-cdn.github.com/assets/github2-f7073494168d35df2845fccdae3f73cb69dc51cf65c42dccd9cefb67ee814256.css" media="all" rel="stylesheet" />
    
    


    <meta http-equiv="x-pjax-version" content="945278cda3a45c59c8dbdf70297f2687">

      
  <meta name="description" content="html2canvas - Screenshots with JavaScript">
  <meta name="go-import" content="github.com/niklasvh/html2canvas git https://github.com/niklasvh/html2canvas.git">

  <meta content="551347" name="octolytics-dimension-user_id" /><meta content="niklasvh" name="octolytics-dimension-user_login" /><meta content="2056312" name="octolytics-dimension-repository_id" /><meta content="niklasvh/html2canvas" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="2056312" name="octolytics-dimension-repository_network_root_id" /><meta content="niklasvh/html2canvas" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/niklasvh/html2canvas/commits/master.atom" rel="alternate" title="Recent Commits to html2canvas:master" type="application/atom+xml">

  </head>


  <body class="logged_out  env-production linux vis-public page-blob">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out" role="banner">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions" role="navigation">
        <a class="button primary" href="/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      <a class="button" href="/login?return_to=%2Fniklasvh%2Fhtml2canvas%2Fblob%2Fmaster%2Fdist%2Fhtml2canvas.svg.min.js" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
    </div>

    <div class="site-search repo-scope js-site-search" role="search">
      <form accept-charset="UTF-8" action="/niklasvh/html2canvas/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/niklasvh/html2canvas/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <input type="text"
    class="js-site-search-field is-clearable"
    data-hotkey="s"
    name="q"
    placeholder="Search"
    data-global-scope-placeholder="Search GitHub"
    data-repo-scope-placeholder="Search"
    tabindex="1"
    autocapitalize="off">
  <div class="scope-badge">This repository</div>
</form>
    </div>

      <ul class="header-nav left" role="navigation">
          <li class="header-nav-item">
            <a class="header-nav-link" href="/explore" data-ga-click="(Logged out) Header, go to explore, text:explore">Explore</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/features" data-ga-click="(Logged out) Header, go to features, text:features">Features</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://enterprise.github.com/" data-ga-click="(Logged out) Header, go to enterprise, text:enterprise">Enterprise</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/blog" data-ga-click="(Logged out) Header, go to blog, text:blog">Blog</a>
          </li>
      </ul>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        
<ul class="pagehead-actions">

  <li>
      <a href="/login?return_to=%2Fniklasvh%2Fhtml2canvas"
    class="minibutton with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <span class="octicon octicon-eye"></span>
    Watch
  </a>
  <a class="social-count" href="/niklasvh/html2canvas/watchers">
    214
  </a>


  </li>

  <li>
      <a href="/login?return_to=%2Fniklasvh%2Fhtml2canvas"
    class="minibutton with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="/niklasvh/html2canvas/stargazers">
      4,239
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fniklasvh%2Fhtml2canvas"
        class="minibutton with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="/niklasvh/html2canvas/network" class="social-count">
        869
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="/niklasvh" class="url fn" itemprop="url" rel="author"><span itemprop="title">niklasvh</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="/niklasvh/html2canvas" class="js-current-repository" data-pjax="#js-repo-pjax-container">html2canvas</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders"
     role="navigation"
     data-pjax="#js-repo-pjax-container"
     data-issue-count-url="/niklasvh/html2canvas/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="/niklasvh/html2canvas" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /niklasvh/html2canvas">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="/niklasvh/html2canvas/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /niklasvh/html2canvas/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="js-issue-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
      <a href="/niklasvh/html2canvas/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /niklasvh/html2canvas/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
          <span class="js-pull-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>


      <li class="tooltipped tooltipped-w" aria-label="Wiki">
        <a href="/niklasvh/html2canvas/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g w" data-selected-links="repo_wiki /niklasvh/html2canvas/wiki">
          <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>      </li>
  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="/niklasvh/html2canvas/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /niklasvh/html2canvas/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="/niklasvh/html2canvas/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /niklasvh/html2canvas/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>
  </ul>


</nav>

              <div class="only-with-full-nav">
                  
<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/niklasvh/html2canvas.git" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/niklasvh/html2canvas" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



<p class="clone-options">You can clone with
  <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a> or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <span class="octicon octicon-question"></span>
  </a>
</p>



                <a href="/niklasvh/html2canvas/archive/master.zip"
                   class="minibutton sidebar-button"
                   aria-label="Download the contents of niklasvh/html2canvas as a zip file"
                   title="Download the contents of niklasvh/html2canvas as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          

<a href="/niklasvh/html2canvas/blob/9a0d43d60bb67ef22507cc12cadead19645c990b/dist/html2canvas.svg.min.js" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a>

<!-- blob contrib key: blob_contributors:v21:92049ad619c3fe51156984a2fd7d2f03 -->

<div class="file-navigation js-zeroclipboard-container">
  
<div class="select-menu js-menu-container js-select-menu left">
  <span class="minibutton select-menu-button js-menu-target css-truncate" data-hotkey="w"
    data-master-branch="master"
    data-ref="master"
    title="master"
    role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button css-truncate-target">master</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-x js-menu-close" role="button" aria-label="Close"></span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/niklasvh/html2canvas/blob/debug/dist/html2canvas.svg.min.js"
               data-name="debug"
               data-skip-pjax="true"
               rel="nofollow">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <span class="select-menu-item-text css-truncate-target" title="debug">
                debug
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/niklasvh/html2canvas/blob/gh-pages/dist/html2canvas.svg.min.js"
               data-name="gh-pages"
               data-skip-pjax="true"
               rel="nofollow">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <span class="select-menu-item-text css-truncate-target" title="gh-pages">
                gh-pages
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open selected"
               href="/niklasvh/html2canvas/blob/master/dist/html2canvas.svg.min.js"
               data-name="master"
               data-skip-pjax="true"
               rel="nofollow">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <span class="select-menu-item-text css-truncate-target" title="master">
                master
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/niklasvh/html2canvas/blob/v0.4/dist/html2canvas.svg.min.js"
               data-name="v0.4"
               data-skip-pjax="true"
               rel="nofollow">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <span class="select-menu-item-text css-truncate-target" title="v0.4">
                v0.4
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.5.0-alpha2/dist/html2canvas.svg.min.js"
                 data-name="0.5.0-alpha2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.5.0-alpha2">0.5.0-alpha2</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.5.0-alpha1/dist/html2canvas.svg.min.js"
                 data-name="0.5.0-alpha1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.5.0-alpha1">0.5.0-alpha1</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.4.1/dist/html2canvas.svg.min.js"
                 data-name="0.4.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.4.1">0.4.1</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.4.0/dist/html2canvas.svg.min.js"
                 data-name="0.4.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.4.0">0.4.0</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.3.4/dist/html2canvas.svg.min.js"
                 data-name="0.3.4"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.3.4">0.3.4</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.3.3/dist/html2canvas.svg.min.js"
                 data-name="0.3.3"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.3.3">0.3.3</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.3.2/dist/html2canvas.svg.min.js"
                 data-name="0.3.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.3.2">0.3.2</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.3.1/dist/html2canvas.svg.min.js"
                 data-name="0.3.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.3.1">0.3.1</a>
            </div>
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/niklasvh/html2canvas/tree/0.3.0/dist/html2canvas.svg.min.js"
                 data-name="0.3.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="0.3.0">0.3.0</a>
            </div>
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

  <div class="button-group right">
    <a href="/niklasvh/html2canvas/find/master"
          class="js-show-file-finder minibutton empty-icon tooltipped tooltipped-s"
          data-pjax
          data-hotkey="t"
          aria-label="Quickly jump between files">
      <span class="octicon octicon-list-unordered"></span>
    </a>
    <button aria-label="Copy file path to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
  </div>

  <div class="breadcrumb js-zeroclipboard-target">
    <span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/niklasvh/html2canvas" class="" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">html2canvas</span></a></span></span><span class="separator">/</span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/niklasvh/html2canvas/tree/master/dist" class="" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">dist</span></a></span><span class="separator">/</span><strong class="final-path">html2canvas.svg.min.js</strong>
  </div>
</div>


  <div class="commit file-history-tease">
    <div class="file-history-tease-header">
        <img alt="Niklas von Hertzen" class="avatar" data-user="551347" height="24" src="https://avatars2.githubusercontent.com/u/551347?v=3&amp;s=48" width="24" />
        <span class="author"><a href="/niklasvh" rel="author">niklasvh</a></span>
        <time datetime="2015-02-03T20:11:20Z" is="relative-time">Feb 3, 2015</time>
        <div class="commit-title">
            <a href="/niklasvh/html2canvas/commit/9a0d43d60bb67ef22507cc12cadead19645c990b" class="message" data-pjax="true" title="Bump v0.5.0-alpha2">Bump v0.5.0-alpha2</a>
        </div>
    </div>

    <div class="participation">
      <p class="quickstat">
        <a href="#blob_contributors_box" rel="facebox">
          <strong>1</strong>
           contributor
        </a>
      </p>
      
    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list">
          <li class="facebox-user-list-item">
            <img alt="Niklas von Hertzen" data-user="551347" height="24" src="https://avatars2.githubusercontent.com/u/551347?v=3&amp;s=48" width="24" />
            <a href="/niklasvh">niklasvh</a>
          </li>
      </ul>
    </div>
  </div>

<div class="file">
  <div class="file-header">
    <div class="file-info">
        12 lines (11 sloc)
        <span class="file-info-divider"></span>
      183.677 kb
    </div>
    <div class="file-actions">
      <div class="button-group">
        <a href="/niklasvh/html2canvas/raw/master/dist/html2canvas.svg.min.js" class="minibutton " id="raw-url">Raw</a>
          <a href="/niklasvh/html2canvas/blame/master/dist/html2canvas.svg.min.js" class="minibutton js-update-url-with-hash">Blame</a>
        <a href="/niklasvh/html2canvas/commits/master/dist/html2canvas.svg.min.js" class="minibutton " rel="nofollow">History</a>
      </div><!-- /.button-group -->


          <a class="octicon-button disabled tooltipped tooltipped-w" href="#"
             aria-label="You must be signed in to make or propose changes"><span class="octicon octicon-pencil"></span></a>

        <a class="octicon-button danger disabled tooltipped tooltipped-w" href="#"
           aria-label="You must be signed in to make or propose changes">
        <span class="octicon octicon-trashcan"></span>
      </a>
    </div><!-- /.actions -->
  </div>
  

  <div class="blob-wrapper data type-javascript">
      <table class="highlight tab-size-8 js-file-line-container">
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code js-file-line">/*</td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="LC2" class="blob-code js-file-line">  html2canvas 0.5.0-alpha2 &lt;http://html2canvas.hertzen.com&gt;</td>
      </tr>
      <tr>
        <td id="L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="LC3" class="blob-code js-file-line">  Copyright (c) 2015 Niklas von Hertzen</td>
      </tr>
      <tr>
        <td id="L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="LC4" class="blob-code js-file-line">
</td>
      </tr>
      <tr>
        <td id="L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="LC5" class="blob-code js-file-line">  Released under MIT License</td>
      </tr>
      <tr>
        <td id="L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="LC6" class="blob-code js-file-line">*/</td>
      </tr>
      <tr>
        <td id="L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="LC7" class="blob-code js-file-line">!function(e){if(&quot;object&quot;==typeof exports&amp;&amp;&quot;undefined&quot;!=typeof module)module.exports=e();else if(&quot;function&quot;==typeof define&amp;&amp;define.amd)define([],e);else{var n;&quot;undefined&quot;!=typeof window?n=window:&quot;undefined&quot;!=typeof global?n=global:&quot;undefined&quot;!=typeof self&amp;&amp;(n=self),(n.html2canvas||(n.html2canvas={})).svg=e()}}(function(){var define,module,exports;return function e(n,f,o){function d(t,l){if(!f[t]){if(!n[t]){var s=&quot;function&quot;==typeof require&amp;&amp;require;if(!l&amp;&amp;s)return s(t,!0);if(i)return i(t,!0);var u=new Error(&quot;Cannot find module &#39;&quot;+t+&quot;&#39;&quot;);throw u.code=&quot;MODULE_NOT_FOUND&quot;,u}var a=f[t]={exports:{}};n[t][0].call(a.exports,function(e){var f=n[t][1][e];return d(f?f:e)},a,a.exports,e,n,f,o)}return f[t].exports}for(var i=&quot;function&quot;==typeof require&amp;&amp;require,t=0;t&lt;o.length;t++)d(o[t]);return d}({1:[function(){},{}],2:[function(e,n,f){function o(e,n,f){if(!(this instanceof o))return new o(e,n,f);var d,i=typeof e;if(&quot;number&quot;===i)d=e&gt;0?e&gt;&gt;&gt;0:0;else if(&quot;string&quot;===i)d=o.byteLength(e,n);else{if(&quot;object&quot;!==i||null===e)throw new TypeError(&quot;must start with number, buffer, array or string&quot;);&quot;Buffer&quot;===e.type&amp;&amp;K(e.data)&amp;&amp;(e=e.data),d=+e.length&gt;0?Math.floor(+e.length):0}if(d&gt;L)throw new RangeError(&quot;Attempt to allocate Buffer larger than maximum size: 0x&quot;+L.toString(16)+&quot; bytes&quot;);var t;o.TYPED_ARRAY_SUPPORT?t=o._augment(new Uint8Array(d)):(t=this,t.length=d,t._isBuffer=!0);var l;if(o.TYPED_ARRAY_SUPPORT&amp;&amp;&quot;number&quot;==typeof e.byteLength)t._set(e);else if(A(e))if(o.isBuffer(e))for(l=0;d&gt;l;l++)t[l]=e.readUInt8(l);else for(l=0;d&gt;l;l++)t[l]=(e[l]%256+256)%256;else if(&quot;string&quot;===i)t.write(e,0,n);else if(&quot;number&quot;===i&amp;&amp;!o.TYPED_ARRAY_SUPPORT&amp;&amp;!f)for(l=0;d&gt;l;l++)t[l]=0;return d&gt;0&amp;&amp;d&lt;=o.poolSize&amp;&amp;(t.parent=M),t}function d(e,n,f){if(!(this instanceof d))return new d(e,n,f);var i=new o(e,n,f);return delete i.parent,i}function i(e,n,f,o){f=Number(f)||0;var d=e.length-f;o?(o=Number(o),o&gt;d&amp;&amp;(o=d)):o=d;var i=n.length;if(i%2!==0)throw new Error(&quot;Invalid hex string&quot;);o&gt;i/2&amp;&amp;(o=i/2);for(var t=0;o&gt;t;t++){var l=parseInt(n.substr(2*t,2),16);if(isNaN(l))throw new Error(&quot;Invalid hex string&quot;);e[f+t]=l}return t}function t(e,n,f,o){var d=G(C(n,e.length-f),e,f,o);return d}function l(e,n,f,o){var d=G(D(n),e,f,o);return d}function s(e,n,f,o){return l(e,n,f,o)}function u(e,n,f,o){var d=G(F(n),e,f,o);return d}function a(e,n,f,o){var d=G(E(n,e.length-f),e,f,o,2);return d}function p(e,n,f){return I.fromByteArray(0===n&amp;&amp;f===e.length?e:e.slice(n,f))}function c(e,n,f){var o=&quot;&quot;,d=&quot;&quot;;f=Math.min(e.length,f);for(var i=n;f&gt;i;i++)e[i]&lt;=127?(o+=H(d)+String.fromCharCode(e[i]),d=&quot;&quot;):d+=&quot;%&quot;+e[i].toString(16);return o+H(d)}function y(e,n,f){var o=&quot;&quot;;f=Math.min(e.length,f);for(var d=n;f&gt;d;d++)o+=String.fromCharCode(127&amp;e[d]);return o}function m(e,n,f){var o=&quot;&quot;;f=Math.min(e.length,f);for(var d=n;f&gt;d;d++)o+=String.fromCharCode(e[d]);return o}function r(e,n,f){var o=e.length;(!n||0&gt;n)&amp;&amp;(n=0),(!f||0&gt;f||f&gt;o)&amp;&amp;(f=o);for(var d=&quot;&quot;,i=n;f&gt;i;i++)d+=B(e[i]);return d}function v(e,n,f){for(var o=e.slice(n,f),d=&quot;&quot;,i=0;i&lt;o.length;i+=2)d+=String.fromCharCode(o[i]+256*o[i+1]);return d}function w(e,n,f){if(e%1!==0||0&gt;e)throw new RangeError(&quot;offset is not uint&quot;);if(e+n&gt;f)throw new RangeError(&quot;Trying to access beyond buffer length&quot;)}function b(e,n,f,d,i,t){if(!o.isBuffer(e))throw new TypeError(&quot;buffer must be a Buffer instance&quot;);if(n&gt;i||t&gt;n)throw new RangeError(&quot;value is out of bounds&quot;);if(f+d&gt;e.length)throw new RangeError(&quot;index out of range&quot;)}function g(e,n,f,o){0&gt;n&amp;&amp;(n=65535+n+1);for(var d=0,i=Math.min(e.length-f,2);i&gt;d;d++)e[f+d]=(n&amp;255&lt;&lt;8*(o?d:1-d))&gt;&gt;&gt;8*(o?d:1-d)}function h(e,n,f,o){0&gt;n&amp;&amp;(n=4294967295+n+1);for(var d=0,i=Math.min(e.length-f,4);i&gt;d;d++)e[f+d]=n&gt;&gt;&gt;8*(o?d:3-d)&amp;255}function x(e,n,f,o,d,i){if(n&gt;d||i&gt;n)throw new RangeError(&quot;value is out of bounds&quot;);if(f+o&gt;e.length)throw new RangeError(&quot;index out of range&quot;);if(0&gt;f)throw new RangeError(&quot;index out of range&quot;)}function j(e,n,f,o,d){return d||x(e,n,f,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,n,f,o,23,4),f+4}function k(e,n,f,o,d){return d||x(e,n,f,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,n,f,o,52,8),f+8}function q(e){if(e=z(e).replace(O,&quot;&quot;),e.length&lt;2)return&quot;&quot;;for(;e.length%4!==0;)e+=&quot;=&quot;;return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,&quot;&quot;)}function A(e){return K(e)||o.isBuffer(e)||e&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;&quot;number&quot;==typeof e.length}function B(e){return 16&gt;e?&quot;0&quot;+e.toString(16):e.toString(16)}function C(e,n){var f,o=e.length,d=null;n=n||1/0;for(var i=[],t=0;o&gt;t;t++){if(f=e.charCodeAt(t),f&gt;55295&amp;&amp;57344&gt;f){if(!d){if(f&gt;56319){(n-=3)&gt;-1&amp;&amp;i.push(239,191,189);continue}if(t+1===o){(n-=3)&gt;-1&amp;&amp;i.push(239,191,189);continue}d=f;continue}if(56320&gt;f){(n-=3)&gt;-1&amp;&amp;i.push(239,191,189),d=f;continue}f=d-55296&lt;&lt;10|f-56320|65536,d=null}else d&amp;&amp;((n-=3)&gt;-1&amp;&amp;i.push(239,191,189),d=null);if(128&gt;f){if((n-=1)&lt;0)break;i.push(f)}else if(2048&gt;f){if((n-=2)&lt;0)break;i.push(f&gt;&gt;6|192,63&amp;f|128)}else if(65536&gt;f){if((n-=3)&lt;0)break;i.push(f&gt;&gt;12|224,f&gt;&gt;6&amp;63|128,63&amp;f|128)}else{if(!(2097152&gt;f))throw new Error(&quot;Invalid code point&quot;);if((n-=4)&lt;0)break;i.push(f&gt;&gt;18|240,f&gt;&gt;12&amp;63|128,f&gt;&gt;6&amp;63|128,63&amp;f|128)}}return i}function D(e){for(var n=[],f=0;f&lt;e.length;f++)n.push(255&amp;e.charCodeAt(f));return n}function E(e,n){for(var f,o,d,i=[],t=0;t&lt;e.length&amp;&amp;!((n-=2)&lt;0);t++)f=e.charCodeAt(t),o=f&gt;&gt;8,d=f%256,i.push(d),i.push(o);return i}function F(e){return I.toByteArray(q(e))}function G(e,n,f,o,d){d&amp;&amp;(o-=o%d);for(var i=0;o&gt;i&amp;&amp;!(i+f&gt;=n.length||i&gt;=e.length);i++)n[i+f]=e[i];return i}function H(e){try{return decodeURIComponent(e)}catch(n){return String.fromCharCode(65533)}}var I=e(&quot;base64-js&quot;),J=e(&quot;ieee754&quot;),K=e(&quot;is-array&quot;);f.Buffer=o,f.SlowBuffer=d,f.INSPECT_MAX_BYTES=50,o.poolSize=8192;var L=1073741823,M={};o.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),n=new Uint8Array(e);return n.foo=function(){return 42},42===n.foo()&amp;&amp;&quot;function&quot;==typeof n.subarray&amp;&amp;0===new Uint8Array(1).subarray(1,1).byteLength}catch(f){return!1}}(),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,n){if(!o.isBuffer(e)||!o.isBuffer(n))throw new TypeError(&quot;Arguments must be Buffers&quot;);for(var f=e.length,d=n.length,i=0,t=Math.min(f,d);t&gt;i&amp;&amp;e[i]===n[i];i++);return i!==t&amp;&amp;(f=e[i],d=n[i]),d&gt;f?-1:f&gt;d?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case&quot;hex&quot;:case&quot;utf8&quot;:case&quot;utf-8&quot;:case&quot;ascii&quot;:case&quot;binary&quot;:case&quot;base64&quot;:case&quot;raw&quot;:case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return!0;default:return!1}},o.concat=function(e,n){if(!K(e))throw new TypeError(&quot;Usage: Buffer.concat(list[, length])&quot;);if(0===e.length)return new o(0);if(1===e.length)return e[0];var f;if(void 0===n)for(n=0,f=0;f&lt;e.length;f++)n+=e[f].length;var d=new o(n),i=0;for(f=0;f&lt;e.length;f++){var t=e[f];t.copy(d,i),i+=t.length}return d},o.byteLength=function(e,n){var f;switch(e+=&quot;&quot;,n||&quot;utf8&quot;){case&quot;ascii&quot;:case&quot;binary&quot;:case&quot;raw&quot;:f=e.length;break;case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:f=2*e.length;break;case&quot;hex&quot;:f=e.length&gt;&gt;&gt;1;break;case&quot;utf8&quot;:case&quot;utf-8&quot;:f=C(e).length;break;case&quot;base64&quot;:f=F(e).length;break;default:f=e.length}return f},o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(e,n,f){var o=!1;if(n&gt;&gt;&gt;=0,f=void 0===f||1/0===f?this.length:f&gt;&gt;&gt;0,e||(e=&quot;utf8&quot;),0&gt;n&amp;&amp;(n=0),f&gt;this.length&amp;&amp;(f=this.length),n&gt;=f)return&quot;&quot;;for(;;)switch(e){case&quot;hex&quot;:return r(this,n,f);case&quot;utf8&quot;:case&quot;utf-8&quot;:return c(this,n,f);case&quot;ascii&quot;:return y(this,n,f);case&quot;binary&quot;:return m(this,n,f);case&quot;base64&quot;:return p(this,n,f);case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:return v(this,n,f);default:if(o)throw new TypeError(&quot;Unknown encoding: &quot;+e);e=(e+&quot;&quot;).toLowerCase(),o=!0}},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError(&quot;Argument must be a Buffer&quot;);return 0===o.compare(this,e)},o.prototype.inspect=function(){var e=&quot;&quot;,n=f.INSPECT_MAX_BYTES;return this.length&gt;0&amp;&amp;(e=this.toString(&quot;hex&quot;,0,n).match(/.{2}/g).join(&quot; &quot;),this.length&gt;n&amp;&amp;(e+=&quot; ... &quot;)),&quot;&lt;Buffer &quot;+e+&quot;&gt;&quot;},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError(&quot;Argument must be a Buffer&quot;);return o.compare(this,e)},o.prototype.get=function(e){return console.log(&quot;.get() is deprecated. Access using array indexes instead.&quot;),this.readUInt8(e)},o.prototype.set=function(e,n){return console.log(&quot;.set() is deprecated. Access using array indexes instead.&quot;),this.writeUInt8(e,n)},o.prototype.write=function(e,n,f,o){if(isFinite(n))isFinite(f)||(o=f,f=void 0);else{var d=o;o=n,n=f,f=d}if(n=Number(n)||0,0&gt;f||0&gt;n||n&gt;this.length)throw new RangeError(&quot;attempt to write outside buffer bounds&quot;);var p=this.length-n;f?(f=Number(f),f&gt;p&amp;&amp;(f=p)):f=p,o=String(o||&quot;utf8&quot;).toLowerCase();var c;switch(o){case&quot;hex&quot;:c=i(this,e,n,f);break;case&quot;utf8&quot;:case&quot;utf-8&quot;:c=t(this,e,n,f);break;case&quot;ascii&quot;:c=l(this,e,n,f);break;case&quot;binary&quot;:c=s(this,e,n,f);break;case&quot;base64&quot;:c=u(this,e,n,f);break;case&quot;ucs2&quot;:case&quot;ucs-2&quot;:case&quot;utf16le&quot;:case&quot;utf-16le&quot;:c=a(this,e,n,f);break;default:throw new TypeError(&quot;Unknown encoding: &quot;+o)}return c},o.prototype.toJSON=function(){return{type:&quot;Buffer&quot;,data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,n){var f=this.length;e=~~e,n=void 0===n?f:~~n,0&gt;e?(e+=f,0&gt;e&amp;&amp;(e=0)):e&gt;f&amp;&amp;(e=f),0&gt;n?(n+=f,0&gt;n&amp;&amp;(n=0)):n&gt;f&amp;&amp;(n=f),e&gt;n&amp;&amp;(n=e);var d;if(o.TYPED_ARRAY_SUPPORT)d=o._augment(this.subarray(e,n));else{var i=n-e;d=new o(i,void 0,!0);for(var t=0;i&gt;t;t++)d[t]=this[t+e]}return d.length&amp;&amp;(d.parent=this.parent||this),d},o.prototype.readUIntLE=function(e,n,f){e&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,f||w(e,n,this.length);for(var o=this[e],d=1,i=0;++i&lt;n&amp;&amp;(d*=256);)o+=this[e+i]*d;return o},o.prototype.readUIntBE=function(e,n,f){e&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,f||w(e,n,this.length);for(var o=this[e+--n],d=1;n&gt;0&amp;&amp;(d*=256);)o+=this[e+--n]*d;return o},o.prototype.readUInt8=function(e,n){return n||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,n){return n||w(e,2,this.length),this[e]|this[e+1]&lt;&lt;8},o.prototype.readUInt16BE=function(e,n){return n||w(e,2,this.length),this[e]&lt;&lt;8|this[e+1]},o.prototype.readUInt32LE=function(e,n){return n||w(e,4,this.length),(this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,n){return n||w(e,4,this.length),16777216*this[e]+(this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3])},o.prototype.readIntLE=function(e,n,f){e&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,f||w(e,n,this.length);for(var o=this[e],d=1,i=0;++i&lt;n&amp;&amp;(d*=256);)o+=this[e+i]*d;return d*=128,o&gt;=d&amp;&amp;(o-=Math.pow(2,8*n)),o},o.prototype.readIntBE=function(e,n,f){e&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,f||w(e,n,this.length);for(var o=n,d=1,i=this[e+--o];o&gt;0&amp;&amp;(d*=256);)i+=this[e+--o]*d;return d*=128,i&gt;=d&amp;&amp;(i-=Math.pow(2,8*n)),i},o.prototype.readInt8=function(e,n){return n||w(e,1,this.length),128&amp;this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,n){n||w(e,2,this.length);var f=this[e]|this[e+1]&lt;&lt;8;return 32768&amp;f?4294901760|f:f},o.prototype.readInt16BE=function(e,n){n||w(e,2,this.length);var f=this[e+1]|this[e]&lt;&lt;8;return 32768&amp;f?4294901760|f:f},o.prototype.readInt32LE=function(e,n){return n||w(e,4,this.length),this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16|this[e+3]&lt;&lt;24},o.prototype.readInt32BE=function(e,n){return n||w(e,4,this.length),this[e]&lt;&lt;24|this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3]},o.prototype.readFloatLE=function(e,n){return n||w(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,n){return n||w(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,n){return n||w(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,n){return n||w(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,n,f,o){e=+e,n&gt;&gt;&gt;=0,f&gt;&gt;&gt;=0,o||b(this,e,n,f,Math.pow(2,8*f),0);var d=1,i=0;for(this[n]=255&amp;e;++i&lt;f&amp;&amp;(d*=256);)this[n+i]=e/d&gt;&gt;&gt;0&amp;255;return n+f},o.prototype.writeUIntBE=function(e,n,f,o){e=+e,n&gt;&gt;&gt;=0,f&gt;&gt;&gt;=0,o||b(this,e,n,f,Math.pow(2,8*f),0);var d=f-1,i=1;for(this[n+d]=255&amp;e;--d&gt;=0&amp;&amp;(i*=256);)this[n+d]=e/i&gt;&gt;&gt;0&amp;255;return n+f},o.prototype.writeUInt8=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e,n+1},o.prototype.writeUInt16LE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e&gt;&gt;&gt;8):g(this,e,n,!0),n+2},o.prototype.writeUInt16BE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[n]=e&gt;&gt;&gt;8,this[n+1]=e):g(this,e,n,!1),n+2},o.prototype.writeUInt32LE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[n+3]=e&gt;&gt;&gt;24,this[n+2]=e&gt;&gt;&gt;16,this[n+1]=e&gt;&gt;&gt;8,this[n]=e):h(this,e,n,!0),n+4},o.prototype.writeUInt32BE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[n]=e&gt;&gt;&gt;24,this[n+1]=e&gt;&gt;&gt;16,this[n+2]=e&gt;&gt;&gt;8,this[n+3]=e):h(this,e,n,!1),n+4},o.prototype.writeIntLE=function(e,n,f,o){e=+e,n&gt;&gt;&gt;=0,o||b(this,e,n,f,Math.pow(2,8*f-1)-1,-Math.pow(2,8*f-1));var d=0,i=1,t=0&gt;e?1:0;for(this[n]=255&amp;e;++d&lt;f&amp;&amp;(i*=256);)this[n+d]=(e/i&gt;&gt;0)-t&amp;255;return n+f},o.prototype.writeIntBE=function(e,n,f,o){e=+e,n&gt;&gt;&gt;=0,o||b(this,e,n,f,Math.pow(2,8*f-1)-1,-Math.pow(2,8*f-1));var d=f-1,i=1,t=0&gt;e?1:0;for(this[n+d]=255&amp;e;--d&gt;=0&amp;&amp;(i*=256);)this[n+d]=(e/i&gt;&gt;0)-t&amp;255;return n+f},o.prototype.writeInt8=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0&gt;e&amp;&amp;(e=255+e+1),this[n]=e,n+1},o.prototype.writeInt16LE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e&gt;&gt;&gt;8):g(this,e,n,!0),n+2},o.prototype.writeInt16BE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[n]=e&gt;&gt;&gt;8,this[n+1]=e):g(this,e,n,!1),n+2},o.prototype.writeInt32LE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e&gt;&gt;&gt;8,this[n+2]=e&gt;&gt;&gt;16,this[n+3]=e&gt;&gt;&gt;24):h(this,e,n,!0),n+4},o.prototype.writeInt32BE=function(e,n,f){return e=+e,n&gt;&gt;&gt;=0,f||b(this,e,n,4,2147483647,-2147483648),0&gt;e&amp;&amp;(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[n]=e&gt;&gt;&gt;24,this[n+1]=e&gt;&gt;&gt;16,this[n+2]=e&gt;&gt;&gt;8,this[n+3]=e):h(this,e,n,!1),n+4},o.prototype.writeFloatLE=function(e,n,f){return j(this,e,n,!0,f)},o.prototype.writeFloatBE=function(e,n,f){return j(this,e,n,!1,f)},o.prototype.writeDoubleLE=function(e,n,f){return k(this,e,n,!0,f)},o.prototype.writeDoubleBE=function(e,n,f){return k(this,e,n,!1,f)},o.prototype.copy=function(e,n,f,d){var i=this;if(f||(f=0),d||0===d||(d=this.length),n&gt;=e.length&amp;&amp;(n=e.length),n||(n=0),d&gt;0&amp;&amp;f&gt;d&amp;&amp;(d=f),d===f)return 0;if(0===e.length||0===i.length)return 0;if(0&gt;n)throw new RangeError(&quot;targetStart out of bounds&quot;);if(0&gt;f||f&gt;=i.length)throw new RangeError(&quot;sourceStart out of bounds&quot;);if(0&gt;d)throw new RangeError(&quot;sourceEnd out of bounds&quot;);d&gt;this.length&amp;&amp;(d=this.length),e.length-n&lt;d-f&amp;&amp;(d=e.length-n+f);var t=d-f;if(1e3&gt;t||!o.TYPED_ARRAY_SUPPORT)for(var l=0;t&gt;l;l++)e[l+n]=this[l+f];else e._set(this.subarray(f,f+t),n);return t},o.prototype.fill=function(e,n,f){if(e||(e=0),n||(n=0),f||(f=this.length),n&gt;f)throw new RangeError(&quot;end &lt; start&quot;);if(f!==n&amp;&amp;0!==this.length){if(0&gt;n||n&gt;=this.length)throw new RangeError(&quot;start out of bounds&quot;);if(0&gt;f||f&gt;this.length)throw new RangeError(&quot;end out of bounds&quot;);var o;if(&quot;number&quot;==typeof e)for(o=n;f&gt;o;o++)this[o]=e;else{var d=C(e.toString()),i=d.length;for(o=n;f&gt;o;o++)this[o]=d[o%i]}return this}},o.prototype.toArrayBuffer=function(){if(&quot;undefined&quot;!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),n=0,f=e.length;f&gt;n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError(&quot;Buffer.toArrayBuffer not supported in this browser&quot;)};var N=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=N.get,e.set=N.set,e.write=N.write,e.toString=N.toString,e.toLocaleString=N.toString,e.toJSON=N.toJSON,e.equals=N.equals,e.compare=N.compare,e.copy=N.copy,e.slice=N.slice,e.readUIntLE=N.readUIntLE,e.readUIntBE=N.readUIntBE,e.readUInt8=N.readUInt8,e.readUInt16LE=N.readUInt16LE,e.readUInt16BE=N.readUInt16BE,e.readUInt32LE=N.readUInt32LE,e.readUInt32BE=N.readUInt32BE,e.readIntLE=N.readIntLE,e.readIntBE=N.readIntBE,e.readInt8=N.readInt8,e.readInt16LE=N.readInt16LE,e.readInt16BE=N.readInt16BE,e.readInt32LE=N.readInt32LE,e.readInt32BE=N.readInt32BE,e.readFloatLE=N.readFloatLE,e.readFloatBE=N.readFloatBE,e.readDoubleLE=N.readDoubleLE,e.readDoubleBE=N.readDoubleBE,e.writeUInt8=N.writeUInt8,e.writeUIntLE=N.writeUIntLE,e.writeUIntBE=N.writeUIntBE,e.writeUInt16LE=N.writeUInt16LE,e.writeUInt16BE=N.writeUInt16BE,e.writeUInt32LE=N.writeUInt32LE,e.writeUInt32BE=N.writeUInt32BE,e.writeIntLE=N.writeIntLE,e.writeIntBE=N.writeIntBE,e.writeInt8=N.writeInt8,e.writeInt16LE=N.writeInt16LE,e.writeInt16BE=N.writeInt16BE,e.writeInt32LE=N.writeInt32LE,e.writeInt32BE=N.writeInt32BE,e.writeFloatLE=N.writeFloatLE,e.writeFloatBE=N.writeFloatBE,e.writeDoubleLE=N.writeDoubleLE,e.writeDoubleBE=N.writeDoubleBE,e.fill=N.fill,e.inspect=N.inspect,e.toArrayBuffer=N.toArrayBuffer,e};var O=/[^+\/0-9A-z\-]/g},{&quot;base64-js&quot;:3,ieee754:4,&quot;is-array&quot;:5}],3:[function(e,n,f){var o=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;!function(e){&quot;use strict&quot;;function n(e){var n=e.charCodeAt(0);return n===t||n===p?62:n===l||n===c?63:s&gt;n?-1:s+10&gt;n?n-s+26+26:a+26&gt;n?n-a:u+26&gt;n?n-u+26:void 0}function f(e){function f(e){u[p++]=e}var o,d,t,l,s,u;if(e.length%4&gt;0)throw new Error(&quot;Invalid string. Length must be a multiple of 4&quot;);var a=e.length;s=&quot;=&quot;===e.charAt(a-2)?2:&quot;=&quot;===e.charAt(a-1)?1:0,u=new i(3*e.length/4-s),t=s&gt;0?e.length-4:e.length;var p=0;for(o=0,d=0;t&gt;o;o+=4,d+=3)l=n(e.charAt(o))&lt;&lt;18|n(e.charAt(o+1))&lt;&lt;12|n(e.charAt(o+2))&lt;&lt;6|n(e.charAt(o+3)),f((16711680&amp;l)&gt;&gt;16),f((65280&amp;l)&gt;&gt;8),f(255&amp;l);return 2===s?(l=n(e.charAt(o))&lt;&lt;2|n(e.charAt(o+1))&gt;&gt;4,f(255&amp;l)):1===s&amp;&amp;(l=n(e.charAt(o))&lt;&lt;10|n(e.charAt(o+1))&lt;&lt;4|n(e.charAt(o+2))&gt;&gt;2,f(l&gt;&gt;8&amp;255),f(255&amp;l)),u}function d(e){function n(e){return o.charAt(e)}function f(e){return n(e&gt;&gt;18&amp;63)+n(e&gt;&gt;12&amp;63)+n(e&gt;&gt;6&amp;63)+n(63&amp;e)}var d,i,t,l=e.length%3,s=&quot;&quot;;for(d=0,t=e.length-l;t&gt;d;d+=3)i=(e[d]&lt;&lt;16)+(e[d+1]&lt;&lt;8)+e[d+2],s+=f(i);switch(l){case 1:i=e[e.length-1],s+=n(i&gt;&gt;2),s+=n(i&lt;&lt;4&amp;63),s+=&quot;==&quot;;break;case 2:i=(e[e.length-2]&lt;&lt;8)+e[e.length-1],s+=n(i&gt;&gt;10),s+=n(i&gt;&gt;4&amp;63),s+=n(i&lt;&lt;2&amp;63),s+=&quot;=&quot;}return s}var i=&quot;undefined&quot;!=typeof Uint8Array?Uint8Array:Array,t=&quot;+&quot;.charCodeAt(0),l=&quot;/&quot;.charCodeAt(0),s=&quot;0&quot;.charCodeAt(0),u=&quot;a&quot;.charCodeAt(0),a=&quot;A&quot;.charCodeAt(0),p=&quot;-&quot;.charCodeAt(0),c=&quot;_&quot;.charCodeAt(0);e.toByteArray=f,e.fromByteArray=d}(&quot;undefined&quot;==typeof f?this.base64js={}:f)},{}],4:[function(e,n,f){f.read=function(e,n,f,o,d){var i,t,l=8*d-o-1,s=(1&lt;&lt;l)-1,u=s&gt;&gt;1,a=-7,p=f?d-1:0,c=f?-1:1,y=e[n+p];for(p+=c,i=y&amp;(1&lt;&lt;-a)-1,y&gt;&gt;=-a,a+=l;a&gt;0;i=256*i+e[n+p],p+=c,a-=8);for(t=i&amp;(1&lt;&lt;-a)-1,i&gt;&gt;=-a,a+=o;a&gt;0;t=256*t+e[n+p],p+=c,a-=8);if(0===i)i=1-u;else{if(i===s)return t?0/0:1/0*(y?-1:1);t+=Math.pow(2,o),i-=u}return(y?-1:1)*t*Math.pow(2,i-o)},f.write=function(e,n,f,o,d,i){var t,l,s,u=8*i-d-1,a=(1&lt;&lt;u)-1,p=a&gt;&gt;1,c=23===d?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:i-1,m=o?1:-1,r=0&gt;n||0===n&amp;&amp;0&gt;1/n?1:0;for(n=Math.abs(n),isNaN(n)||1/0===n?(l=isNaN(n)?1:0,t=a):(t=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-t))&lt;1&amp;&amp;(t--,s*=2),n+=t+p&gt;=1?c/s:c*Math.pow(2,1-p),n*s&gt;=2&amp;&amp;(t++,s/=2),t+p&gt;=a?(l=0,t=a):t+p&gt;=1?(l=(n*s-1)*Math.pow(2,d),t+=p):(l=n*Math.pow(2,p-1)*Math.pow(2,d),t=0));d&gt;=8;e[f+y]=255&amp;l,y+=m,l/=256,d-=8);for(t=t&lt;&lt;d|l,u+=d;u&gt;0;e[f+y]=255&amp;t,y+=m,t/=256,u-=8);e[f+y-m]|=128*r}},{}],5:[function(e,n){var f=Array.isArray,o=Object.prototype.toString;n.exports=f||function(e){return!!e&amp;&amp;&quot;[object Array]&quot;==o.call(e)}},{}],6:[function(require,module,exports){(function(Buffer){var fabric=fabric||{version:&quot;1.4.11&quot;};&quot;undefined&quot;!=typeof exports&amp;&amp;(exports.fabric=fabric),&quot;undefined&quot;!=typeof document&amp;&amp;&quot;undefined&quot;!=typeof window?(fabric.document=document,fabric.window=window):(fabric.document=require(&quot;jsdom&quot;).jsdom(&quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&quot;),fabric.window=fabric.document.createWindow()),fabric.isTouchSupported=&quot;ontouchstart&quot;in fabric.document.documentElement,fabric.isLikelyNode=&quot;undefined&quot;!=typeof Buffer&amp;&amp;&quot;undefined&quot;==typeof window,fabric.SHARED_ATTRIBUTES=[&quot;display&quot;,&quot;transform&quot;,&quot;fill&quot;,&quot;fill-opacity&quot;,&quot;fill-rule&quot;,&quot;opacity&quot;,&quot;stroke&quot;,&quot;stroke-dasharray&quot;,&quot;stroke-linecap&quot;,&quot;stroke-linejoin&quot;,&quot;stroke-miterlimit&quot;,&quot;stroke-opacity&quot;,&quot;stroke-width&quot;],fabric.DPI=96;var Cufon=function(){function e(e){var n=this.face=e.face;this.glyphs=e.glyphs,this.w=e.w,this.baseSize=parseInt(n[&quot;units-per-em&quot;],10),this.family=n[&quot;font-family&quot;].toLowerCase(),this.weight=n[&quot;font-weight&quot;],this.style=n[&quot;font-style&quot;]||&quot;normal&quot;,this.viewBox=function(){var e=n.bbox.split(/\s+/),f={minX:parseInt(e[0],10),minY:parseInt(e[1],10),maxX:parseInt(e[2],10),maxY:parseInt(e[3],10)};return f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,f.toString=function(){return[this.minX,this.minY,this.width,this.height].join(&quot; &quot;)},f}(),this.ascent=-parseInt(n.ascent,10),this.descent=-parseInt(n.descent,10),this.height=-this.ascent+this.descent}function n(){var e={},n={oblique:&quot;italic&quot;,italic:&quot;oblique&quot;};this.add=function(n){(e[n.style]||(e[n.style]={}))[n.weight]=n},this.get=function(f,o){var d=e[f]||e[n[f]]||e.normal||e.italic||e.oblique;if(!d)return null;if(o={normal:400,bold:700}[o]||parseInt(o,10),d[o])return d[o];var i,t,l={1:1,99:0}[o%100],s=[];void 0===l&amp;&amp;(l=o&gt;400),500==o&amp;&amp;(o=400);for(var u in d)u=parseInt(u,10),(!i||i&gt;u)&amp;&amp;(i=u),(!t||u&gt;t)&amp;&amp;(t=u),s.push(u);return i&gt;o&amp;&amp;(o=i),o&gt;t&amp;&amp;(o=t),s.sort(function(e,n){return(l?e&gt;o&amp;&amp;n&gt;o?n&gt;e:e&gt;n:o&gt;e&amp;&amp;o&gt;n?e&gt;n:n&gt;e)?-1:1}),d[s[0]]}}function f(){function e(e,n){return e.contains?e.contains(n):16&amp;e.compareDocumentPosition(n)}function n(n){var f=n.relatedTarget;f&amp;&amp;!e(this,f)&amp;&amp;o(this)}function f(){o(this)}function o(e){setTimeout(function(){y.replace(e,w.get(e).options,!0)},10)}this.attach=function(e){void 0===e.onmouseenter?(i(e,&quot;mouseover&quot;,n),i(e,&quot;mouseout&quot;,n)):(i(e,&quot;mouseenter&quot;,f),i(e,&quot;mouseleave&quot;,f))}}function o(){function e(e){return e.cufid||(e.cufid=++f)}var n={},f=0;this.get=function(f){var o=e(f);return n[o]||(n[o]={})}}function d(e){var n={},f={};this.get=function(f){return void 0!=n[f]?n[f]:e[f]},this.getSize=function(e,n){return f[e]||(f[e]=new r.Size(this.get(e),n))},this.extend=function(e){for(var f in e)n[f]=e[f];return this}}function i(e,n,f){e.addEventListener?e.addEventListener(n,f,!1):e.attachEvent&amp;&amp;e.attachEvent(&quot;on&quot;+n,function(){return f.call(e,fabric.window.event)})}function t(e,n){var f=w.get(e);return f.options?e:(n.hover&amp;&amp;n.hoverables[e.nodeName.toLowerCase()]&amp;&amp;b.attach(e),f.options=n,e)}function l(e){var n={};return function(f){return n.hasOwnProperty(f)||(n[f]=e.apply(null,arguments)),n[f]}}function s(e,n){n||(n=r.getStyle(e));for(var f,o=r.quotedList(n.get(&quot;fontFamily&quot;).toLowerCase()),d=0,i=o.length;i&gt;d;++d)if(f=o[d],x[f])return x[f].get(n.get(&quot;fontStyle&quot;),n.get(&quot;fontWeight&quot;));return null}function u(e){return fabric.document.getElementsByTagName(e)}function a(){for(var e,n={},f=0,o=arguments.length;o&gt;f;++f)for(e in arguments[f])n[e]=arguments[f][e];return n}function p(e,n,f,o,d,i){var t=o.separate;if(&quot;none&quot;==t)return h[o.engine].apply(null,arguments);var l,s=fabric.document.createDocumentFragment(),u=n.split(k[t]),a=&quot;words&quot;==t;a&amp;&amp;v&amp;&amp;(/^\s/.test(n)&amp;&amp;u.unshift(&quot;&quot;),/\s$/.test(n)&amp;&amp;u.push(&quot;&quot;));for(var p=0,c=u.length;c&gt;p;++p)l=h[o.engine](e,a?r.textAlign(u[p],f,p,c):u[p],f,o,d,i,c-1&gt;p),l&amp;&amp;s.appendChild(l);return s}function c(e,n){for(var f,o,d,i,l=t(e,n).firstChild;l;l=d){if(d=l.nextSibling,i=!1,1==l.nodeType){if(!l.firstChild)continue;if(!/cufon/.test(l.className)){arguments.callee(l,n);continue}i=!0}if(o||(o=r.getStyle(e).extend(n)),f||(f=s(e,o)),f)if(i)h[n.engine](f,null,o,n,l,e);else{var u=l.data;if(&quot;undefined&quot;!=typeof G_vmlCanvasManager&amp;&amp;(u=u.replace(/\r/g,&quot;\n&quot;)),&quot;&quot;!==u){var a=p(f,u,o,n,l,e);a?l.parentNode.replaceChild(a,l):l.parentNode.removeChild(l)}}}}var y=function(){return y.replace.apply(null,arguments)},m=y.DOM={ready:function(){var e=!1,n={loaded:1,complete:1},f=[],o=function(){if(!e){e=!0;for(var n;n=f.shift();n());}};return fabric.document.addEventListener&amp;&amp;(fabric.document.addEventListener(&quot;DOMContentLoaded&quot;,o,!1),fabric.window.addEventListener(&quot;pageshow&quot;,o,!1)),!fabric.window.opera&amp;&amp;fabric.document.readyState&amp;&amp;function(){n[fabric.document.readyState]?o():setTimeout(arguments.callee,10)}(),fabric.document.readyState&amp;&amp;fabric.document.createStyleSheet&amp;&amp;function(){try{fabric.document.body.doScroll(&quot;left&quot;),o()}catch(e){setTimeout(arguments.callee,1)}}(),i(fabric.window,&quot;load&quot;,o),function(n){arguments.length?e?n():f.push(n):o()}}()},r=y.CSS={Size:function(e,n){this.value=parseFloat(e),this.unit=String(e).match(/[a-z%]*$/)[0]||&quot;px&quot;,this.convert=function(e){return e/n*this.value},this.convertFrom=function(e){return e/this.value*n},this.toString=function(){return this.value+this.unit}},getStyle:function(e){return new d(e.style)},quotedList:l(function(e){for(var n,f=[],o=/\s*(([&quot;&#39;])([\s\S]*?[^\\])\2|[^,]+)\s*/g;n=o.exec(e);)f.push(n[3]||n[1]);return f}),ready:function(){var e=!1,n=[],f=function(){e=!0;for(var f;f=n.shift();f());},o=Object.prototype.propertyIsEnumerable?u(&quot;style&quot;):{length:0},d=u(&quot;link&quot;);return m.ready(function(){for(var e,n=0,i=0,t=d.length;e=d[i],t&gt;i;++i)e.disabled||&quot;stylesheet&quot;!=e.rel.toLowerCase()||++n;fabric.document.styleSheets.length&gt;=o.length+n?f():setTimeout(arguments.callee,10)}),function(f){e?f():n.push(f)}}(),supports:function(e,n){var f=fabric.document.createElement(&quot;span&quot;).style;return void 0===f[e]?!1:(f[e]=n,f[e]===n)},textAlign:function(e,n,f,o){return&quot;right&quot;==n.get(&quot;textAlign&quot;)?f&gt;0&amp;&amp;(e=&quot; &quot;+e):o-1&gt;f&amp;&amp;(e+=&quot; &quot;),e},textDecoration:function(e,n){n||(n=this.getStyle(e));for(var f={underline:null,overline:null,&quot;line-through&quot;:null},o=e;o.parentNode&amp;&amp;1==o.parentNode.nodeType;){var d=!0;for(var i in f)f[i]||(-1!=n.get(&quot;textDecoration&quot;).indexOf(i)&amp;&amp;(f[i]=n.get(&quot;color&quot;)),d=!1);if(d)break;n=this.getStyle(o=o.parentNode)}return f},textShadow:l(function(e){if(&quot;none&quot;==e)return null;for(var n,f=[],o={},d=0,i=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/gi;n=i.exec(e);)&quot;,&quot;==n[0]?(f.push(o),o={},d=0):n[1]?o.color=n[1]:o[[&quot;offX&quot;,&quot;offY&quot;,&quot;blur&quot;][d++]]=n[2];return f.push(o),f}),color:l(function(e){var n={};return n.color=e.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(e,f,o){return n.opacity=parseFloat(o),&quot;rgb(&quot;+f+&quot;)&quot;}),n}),textTransform:function(e,n){return e[{uppercase:&quot;toUpperCase&quot;,lowercase:&quot;toLowerCase&quot;}[n.get(&quot;textTransform&quot;)]||&quot;toString&quot;]()}},v=0==&quot; &quot;.split(/\s+/).length,w=new o,b=new f,g=[],h={},x={},j={engine:null,hover:!1,hoverables:{a:!0},printable:!0,selector:fabric.window.Sizzle||fabric.window.jQuery&amp;&amp;function(e){return jQuery(e)}||fabric.window.dojo&amp;&amp;dojo.query||fabric.window.$$&amp;&amp;function(e){return $$(e)}||fabric.window.$&amp;&amp;function(e){return $(e)}||fabric.document.querySelectorAll&amp;&amp;function(e){return fabric.document.querySelectorAll(e)}||u,separate:&quot;words&quot;,textShadow:&quot;none&quot;},k={words:/\s+/,characters:&quot;&quot;};return y.now=function(){return m.ready(),y},y.refresh=function(){for(var e=g.splice(0,g.length),n=0,f=e.length;f&gt;n;++n)y.replace.apply(null,e[n]);return y},y.registerEngine=function(e,n){return n?(h[e]=n,y.set(&quot;engine&quot;,e)):y},y.registerFont=function(f){var o=new e(f),d=o.family;return x[d]||(x[d]=new n),x[d].add(o),y.set(&quot;fontFamily&quot;,&#39;&quot;&#39;+d+&#39;&quot;&#39;)},y.replace=function(e,n,f){return n=a(j,n),n.engine?(&quot;string&quot;==typeof n.textShadow&amp;&amp;n.textShadow&amp;&amp;(n.textShadow=r.textShadow(n.textShadow)),f||g.push(arguments),(e.nodeType||&quot;string&quot;==typeof e)&amp;&amp;(e=[e]),r.ready(function(){for(var f=0,o=e.length;o&gt;f;++f){var d=e[f];&quot;string&quot;==typeof d?y.replace(n.selector(d),n,!0):c(d,n)}}),y):y},y.replaceElement=function(e,n){return n=a(j,n),&quot;string&quot;==typeof n.textShadow&amp;&amp;n.textShadow&amp;&amp;(n.textShadow=r.textShadow(n.textShadow)),c(e,n)},y.engines=h,y.fonts=x,y.getOptions=function(){return a(j)},y.set=function(e,n){return j[e]=n,y},y}();Cufon.registerEngine(&quot;canvas&quot;,function(){function e(e,n){var f,o=0,d=0,i=[],t=/([mrvxe])([^a-z]*)/g;e:for(var l=0;f=t.exec(e);++l){var s=f[2].split(&quot;,&quot;);switch(f[1]){case&quot;v&quot;:i[l]={m:&quot;bezierCurveTo&quot;,a:[o+~~s[0],d+~~s[1],o+~~s[2],d+~~s[3],o+=~~s[4],d+=~~s[5]]};break;case&quot;r&quot;:i[l]={m:&quot;lineTo&quot;,a:[o+=~~s[0],d+=~~s[1]]};break;case&quot;m&quot;:i[l]={m:&quot;moveTo&quot;,a:[o=~~s[0],d=~~s[1]]};break;case&quot;x&quot;:i[l]={m:&quot;closePath&quot;,a:[]};break;case&quot;e&quot;:break e}n[i[l].m].apply(n,i[l].a)}return i}function n(e,n){for(var f=0,o=e.length;o&gt;f;++f){var d=e[f];n[d.m].apply(n,d.a)}}var f=Cufon.CSS.supports(&quot;display&quot;,&quot;inline-block&quot;),o=!f&amp;&amp;(&quot;BackCompat&quot;==fabric.document.compatMode||/frameset|transitional/i.test(fabric.document.doctype.publicId)),d=fabric.document.createElement(&quot;style&quot;);d.type=&quot;text/css&quot;;var i=fabric.document.createTextNode(&quot;.cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle&quot;+(o?&quot;&quot;:&quot;;font-size:1px;line-height:1px&quot;)+&quot;}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}&quot;+(f?&quot;.cufon-canvas canvas{position:relative}&quot;:&quot;.cufon-canvas canvas{position:absolute}&quot;)+&quot;}@media print{.cufon-canvas{padding:0 !important}.cufon-canvas canvas{display:none}.cufon-canvas .cufon-alt{display:inline}}&quot;);try{d.appendChild(i)}catch(t){d.setAttribute(&quot;type&quot;,&quot;text/css&quot;),d.styleSheet.cssText=i.data}return fabric.document.getElementsByTagName(&quot;head&quot;)[0].appendChild(d),function(o,d,i,t,l){function s(){T.save();var e=0,n=0,f=[{left:0}];t.backgroundColor&amp;&amp;(T.save(),T.fillStyle=t.backgroundColor,T.translate(0,o.ascent),T.fillRect(0,0,A+10,(-o.ascent+o.descent)*D),T.restore()),&quot;right&quot;===t.textAlign?(T.translate(G[n],0),f[0].left=G[n]*U):&quot;center&quot;===t.textAlign&amp;&amp;(T.translate(G[n]/2,0),f[0].left=G[n]/2*U);for(var d=0,i=z.length;i&gt;d;++d)if(&quot;\n&quot;!==z[d]){var l=o.glyphs[z[d]]||o.missingGlyph;if(l){var s=Number(l.w||o.w)+y;t.textBackgroundColor&amp;&amp;(T.save(),T.fillStyle=t.textBackgroundColor,T.translate(0,o.ascent),T.fillRect(0,0,s+10,-o.ascent+o.descent),T.restore()),T.translate(s,0),e+=s,d==i-1&amp;&amp;(f[f.length-1].width=e*U,f[f.length-1].height=(-o.ascent+o.descent)*U)}}else{n++;var u=-o.ascent-o.ascent/5*t.lineHeight,a=f[f.length-1],p={left:0};a.width=e*U,a.height=(-o.ascent+o.descent)*U,&quot;right&quot;===t.textAlign?(T.translate(-A,u),T.translate(G[n],0),p.left=G[n]*U):&quot;center&quot;===t.textAlign?(T.translate(-e-G[n-1]/2,u),T.translate(G[n]/2,0),p.left=G[n]/2*U):T.translate(-e,u),f.push(p),e=0}T.restore(),Cufon.textOptions.boundaries=f}function u(f){T.fillStyle=f||Cufon.textOptions.color||i.get(&quot;color&quot;);var d=0,l=0;&quot;right&quot;===t.textAlign?T.translate(G[l],0):&quot;center&quot;===t.textAlign&amp;&amp;T.translate(G[l]/2,0);for(var s=0,u=z.length;u&gt;s;++s)if(&quot;\n&quot;!==z[s]){var a=o.glyphs[z[s]]||o.missingGlyph;if(a){var p=Number(a.w||o.w)+y;W&amp;&amp;(T.save(),T.strokeStyle=T.fillStyle,T.lineWidth+=T.lineWidth,T.beginPath(),W.underline&amp;&amp;(T.moveTo(0,-o.face[&quot;underline-position&quot;]+.5),T.lineTo(p,-o.face[&quot;underline-position&quot;]+.5)),W.overline&amp;&amp;(T.moveTo(0,o.ascent+.5),T.lineTo(p,o.ascent+.5)),W[&quot;line-through&quot;]&amp;&amp;(T.moveTo(0,-o.descent+.5),T.lineTo(p,-o.descent+.5)),T.stroke(),T.restore()),X&amp;&amp;(T.save(),T.transform(1,0,-.25,1,0,0)),T.beginPath(),a.d&amp;&amp;(a.code?n(a.code,T):a.code=e(&quot;m&quot;+a.d,T)),T.fill(),t.strokeStyle&amp;&amp;(T.closePath(),T.save(),T.lineWidth=t.strokeWidth,T.strokeStyle=t.strokeStyle,T.stroke(),T.restore()),X&amp;&amp;T.restore(),T.translate(p,0),d+=p}}else{l++;var c=-o.ascent-o.ascent/5*t.lineHeight;&quot;right&quot;===t.textAlign?(T.translate(-A,c),T.translate(G[l],0)):&quot;center&quot;===t.textAlign?(T.translate(-d-G[l-1]/2,c),T.translate(G[l]/2,0)):T.translate(-d,c),d=0}}var a=null===d,p=o.viewBox,c=i.getSize(&quot;fontSize&quot;,o.baseSize),y=i.get(&quot;letterSpacing&quot;);y=&quot;normal&quot;==y?0:c.convertFrom(parseInt(y,10));var m=0,r=0,v=0,w=0,b=t.textShadow,g=[];if(Cufon.textOptions.shadowOffsets=[],Cufon.textOptions.shadows=null,b){Cufon.textOptions.shadows=b;for(var h=0,x=b.length;x&gt;h;++h){var j=b[h],k=c.convertFrom(parseFloat(j.offX)),q=c.convertFrom(parseFloat(j.offY));g[h]=[k,q]}}for(var z=Cufon.CSS.textTransform(a?l.alt:d,i).split(&quot;&quot;),A=0,B=null,C=0,D=1,E=[],h=0,x=z.length;x&gt;h;++h)if(&quot;\n&quot;!==z[h]){var F=o.glyphs[z[h]]||o.missingGlyph;F&amp;&amp;(A+=B=Number(F.w||o.w)+y)}else D++,A&gt;C&amp;&amp;(C=A),E.push(A),A=0;E.push(A),A=Math.max(C,A);for(var G=[],h=E.length;h--;)G[h]=A-E[h];if(null===B)return null;r+=p.width-B,w+=p.minX;var H,I;if(a)H=l,I=l.firstChild;else if(H=fabric.document.createElement(&quot;span&quot;),H.className=&quot;cufon cufon-canvas&quot;,H.alt=d,I=fabric.document.createElement(&quot;canvas&quot;),H.appendChild(I),t.printable){var J=fabric.document.createElement(&quot;span&quot;);</td>
      </tr>
      <tr>
        <td id="L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="LC8" class="blob-code js-file-line">J.className=&quot;cufon-alt&quot;,J.appendChild(fabric.document.createTextNode(d)),H.appendChild(J)}var K=H.style,L=I.style||{},M=c.convert(p.height-m+v),N=Math.ceil(M),O=N/M;I.width=Math.ceil(c.convert(A+r-w)*O),I.height=N,m+=p.minY,L.top=Math.round(c.convert(m-o.ascent))+&quot;px&quot;,L.left=Math.round(c.convert(w))+&quot;px&quot;;var P=Math.ceil(c.convert(A*O)),Q=P+&quot;px&quot;,R=c.convert(o.height),S=(t.lineHeight-1)*c.convert(-o.ascent/5)*(D-1);Cufon.textOptions.width=P,Cufon.textOptions.height=R*D+S,Cufon.textOptions.lines=D,Cufon.textOptions.totalLineHeight=S,f?(K.width=Q,K.height=R+&quot;px&quot;):(K.paddingLeft=Q,K.paddingBottom=R-1+&quot;px&quot;);var T=Cufon.textOptions.context||I.getContext(&quot;2d&quot;),U=N/p.height;Cufon.textOptions.fontAscent=o.ascent*U,Cufon.textOptions.boundaries=null;for(var V=Cufon.textOptions.shadowOffsets,h=g.length;h--;)V[h]=[g[h][0]*U,g[h][1]*U];T.save(),T.scale(U,U),T.translate(-w-1/U*I.width/2+(Cufon.fonts[o.family].offsetLeft||0),-m-Cufon.textOptions.height/U/2+(Cufon.fonts[o.family].offsetTop||0)),T.lineWidth=o.face[&quot;underline-thickness&quot;],T.save();var W=Cufon.getTextDecoration(t),X=&quot;italic&quot;===t.fontStyle;if(T.save(),s(),b)for(var h=0,x=b.length;x&gt;h;++h){var j=b[h];T.save(),T.translate.apply(T,g[h]),u(j.color),T.restore()}return u(),T.restore(),T.restore(),T.restore(),H}}()),Cufon.registerEngine(&quot;vml&quot;,function(){function e(e,f){return n(e,/(?:em|ex|%)$/i.test(f)?&quot;1em&quot;:f)}function n(e,n){if(/px$/i.test(n))return parseFloat(n);var f=e.style.left,o=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n;var d=e.style.pixelLeft;return e.style.left=f,e.runtimeStyle.left=o,d}if(fabric.document.namespaces){var f=fabric.document.createElement(&quot;canvas&quot;);if(!(f&amp;&amp;f.getContext&amp;&amp;f.getContext.apply)){null==fabric.document.namespaces.cvml&amp;&amp;fabric.document.namespaces.add(&quot;cvml&quot;,&quot;urn:schemas-microsoft-com:vml&quot;);var o=fabric.document.createElement(&quot;cvml:shape&quot;);if(o.style.behavior=&quot;url(#default#VML)&quot;,o.coordsize)return o=null,fabric.document.write(&#39;&lt;style type=&quot;text/css&quot;&gt;.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}&lt;/style&gt;&#39;),function(f,o,d,i,t,l,s){var u=null===o;u&amp;&amp;(o=t.alt);var a=f.viewBox,p=d.computedFontSize||(d.computedFontSize=new Cufon.CSS.Size(e(l,d.get(&quot;fontSize&quot;))+&quot;px&quot;,f.baseSize)),c=d.computedLSpacing;void 0==c&amp;&amp;(c=d.get(&quot;letterSpacing&quot;),d.computedLSpacing=c=&quot;normal&quot;==c?0:~~p.convertFrom(n(l,c)));var y,m;if(u)y=t,m=t.firstChild;else{if(y=fabric.document.createElement(&quot;span&quot;),y.className=&quot;cufon cufon-vml&quot;,y.alt=o,m=fabric.document.createElement(&quot;span&quot;),m.className=&quot;cufon-vml-canvas&quot;,y.appendChild(m),i.printable){var r=fabric.document.createElement(&quot;span&quot;);r.className=&quot;cufon-alt&quot;,r.appendChild(fabric.document.createTextNode(o)),y.appendChild(r)}s||y.appendChild(fabric.document.createElement(&quot;cvml:shape&quot;))}var v=y.style,w=m.style,b=p.convert(a.height),g=Math.ceil(b),h=g/b,x=a.minX,j=a.minY;w.height=g,w.top=Math.round(p.convert(j-f.ascent)),w.left=Math.round(p.convert(x)),v.height=p.convert(f.height)+&quot;px&quot;;for(var k,q,z=(Cufon.getTextDecoration(i),d.get(&quot;color&quot;)),A=Cufon.CSS.textTransform(o,d).split(&quot;&quot;),B=0,C=0,D=null,E=i.textShadow,F=0,G=0,H=A.length;H&gt;F;++F)k=f.glyphs[A[F]]||f.missingGlyph,k&amp;&amp;(B+=D=~~(k.w||f.w)+c);if(null===D)return null;var I,J=-x+B+(a.width-D),K=p.convert(J*h),L=Math.round(K),M=J+&quot;,&quot;+a.height,N=&quot;r&quot;+M+&quot;nsnf&quot;;for(F=0;H&gt;F;++F)if(k=f.glyphs[A[F]]||f.missingGlyph){u?(q=m.childNodes[G],q.firstChild&amp;&amp;q.removeChild(q.firstChild)):(q=fabric.document.createElement(&quot;cvml:shape&quot;),m.appendChild(q)),q.stroked=&quot;f&quot;,q.coordsize=M,q.coordorigin=I=x-C+&quot;,&quot;+j,q.path=(k.d?&quot;m&quot;+k.d+&quot;xe&quot;:&quot;&quot;)+&quot;m&quot;+I+N,q.fillcolor=z;var O=q.style;if(O.width=L,O.height=g,E){var P,Q=E[0],R=E[1],S=Cufon.CSS.color(Q.color),T=fabric.document.createElement(&quot;cvml:shadow&quot;);T.on=&quot;t&quot;,T.color=S.color,T.offset=Q.offX+&quot;,&quot;+Q.offY,R&amp;&amp;(P=Cufon.CSS.color(R.color),T.type=&quot;double&quot;,T.color2=P.color,T.offset2=R.offX+&quot;,&quot;+R.offY),T.opacity=S.opacity||P&amp;&amp;P.opacity||1,q.appendChild(T)}C+=~~(k.w||f.w)+c,++G}return v.width=Math.max(Math.ceil(p.convert(B*h)),0),y}}}}()),Cufon.getTextDecoration=function(e){return{underline:&quot;underline&quot;===e.textDecoration,overline:&quot;overline&quot;===e.textDecoration,&quot;line-through&quot;:&quot;line-through&quot;===e.textDecoration}},&quot;undefined&quot;!=typeof exports&amp;&amp;(exports.Cufon=Cufon),&quot;object&quot;!=typeof JSON&amp;&amp;(JSON={}),function(){&quot;use strict&quot;;function f(e){return 10&gt;e?&quot;0&quot;+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?&#39;&quot;&#39;+e.replace(escapable,function(e){var n=meta[e];return&quot;string&quot;==typeof n?n:&quot;\\u&quot;+(&quot;0000&quot;+e.charCodeAt(0).toString(16)).slice(-4)})+&#39;&quot;&#39;:&#39;&quot;&#39;+e+&#39;&quot;&#39;}function str(e,n){var f,o,d,i,t,l=gap,s=n[e];switch(s&amp;&amp;&quot;object&quot;==typeof s&amp;&amp;&quot;function&quot;==typeof s.toJSON&amp;&amp;(s=s.toJSON(e)),&quot;function&quot;==typeof rep&amp;&amp;(s=rep.call(n,e,s)),typeof s){case&quot;string&quot;:return quote(s);case&quot;number&quot;:return isFinite(s)?String(s):&quot;null&quot;;case&quot;boolean&quot;:case&quot;null&quot;:return String(s);case&quot;object&quot;:if(!s)return&quot;null&quot;;if(gap+=indent,t=[],&quot;[object Array]&quot;===Object.prototype.toString.apply(s)){for(i=s.length,f=0;i&gt;f;f+=1)t[f]=str(f,s)||&quot;null&quot;;return d=0===t.length?&quot;[]&quot;:gap?&quot;[\n&quot;+gap+t.join(&quot;,\n&quot;+gap)+&quot;\n&quot;+l+&quot;]&quot;:&quot;[&quot;+t.join(&quot;,&quot;)+&quot;]&quot;,gap=l,d}if(rep&amp;&amp;&quot;object&quot;==typeof rep)for(i=rep.length,f=0;i&gt;f;f+=1)&quot;string&quot;==typeof rep[f]&amp;&amp;(o=rep[f],d=str(o,s),d&amp;&amp;t.push(quote(o)+(gap?&quot;: &quot;:&quot;:&quot;)+d));else for(o in s)Object.prototype.hasOwnProperty.call(s,o)&amp;&amp;(d=str(o,s),d&amp;&amp;t.push(quote(o)+(gap?&quot;: &quot;:&quot;:&quot;)+d));return d=0===t.length?&quot;{}&quot;:gap?&quot;{\n&quot;+gap+t.join(&quot;,\n&quot;+gap)+&quot;\n&quot;+l+&quot;}&quot;:&quot;{&quot;+t.join(&quot;,&quot;)+&quot;}&quot;,gap=l,d}}&quot;function&quot;!=typeof Date.prototype.toJSON&amp;&amp;(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+&quot;-&quot;+f(this.getUTCMonth()+1)+&quot;-&quot;+f(this.getUTCDate())+&quot;T&quot;+f(this.getUTCHours())+&quot;:&quot;+f(this.getUTCMinutes())+&quot;:&quot;+f(this.getUTCSeconds())+&quot;Z&quot;:null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;&quot;function&quot;!=typeof JSON.stringify&amp;&amp;(escapable=/[\\\&quot;\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={&quot;\b&quot;:&quot;\\b&quot;,&quot;	&quot;:&quot;\\t&quot;,&quot;\n&quot;:&quot;\\n&quot;,&quot;\f&quot;:&quot;\\f&quot;,&quot;\r&quot;:&quot;\\r&quot;,&#39;&quot;&#39;:&#39;\\&quot;&#39;,&quot;\\&quot;:&quot;\\\\&quot;},JSON.stringify=function(e,n,f){var o;if(gap=&quot;&quot;,indent=&quot;&quot;,&quot;number&quot;==typeof f)for(o=0;f&gt;o;o+=1)indent+=&quot; &quot;;else&quot;string&quot;==typeof f&amp;&amp;(indent=f);if(rep=n,n&amp;&amp;&quot;function&quot;!=typeof n&amp;&amp;(&quot;object&quot;!=typeof n||&quot;number&quot;!=typeof n.length))throw new Error(&quot;JSON.stringify&quot;);return str(&quot;&quot;,{&quot;&quot;:e})}),&quot;function&quot;!=typeof JSON.parse&amp;&amp;(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,n){var f,o,d=e[n];if(d&amp;&amp;&quot;object&quot;==typeof d)for(f in d)Object.prototype.hasOwnProperty.call(d,f)&amp;&amp;(o=walk(d,f),void 0!==o?d[f]=o:delete d[f]);return reviver.call(e,n,d)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&amp;&amp;(text=text.replace(cx,function(e){return&quot;\\u&quot;+(&quot;0000&quot;+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g,&quot;@&quot;).replace(/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,&quot;]&quot;).replace(/(?:^|:|,)(?:\s*\[)+/g,&quot;&quot;)))return j=eval(&quot;(&quot;+text+&quot;)&quot;),&quot;function&quot;==typeof reviver?walk({&quot;&quot;:j},&quot;&quot;):j;throw new SyntaxError(&quot;JSON.parse&quot;)})}(),function(){function e(e,n){this.__eventListeners[e]&amp;&amp;(n?fabric.util.removeFromArray(this.__eventListeners[e],n):this.__eventListeners[e].length=0)}function n(e,n){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var f in e)this.on(f,e[f]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(n);return this}function f(n,f){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&amp;&amp;&quot;object&quot;==typeof arguments[0])for(var o in n)e.call(this,o,n[o]);else e.call(this,n,f);return this}}function o(e,n){if(this.__eventListeners){var f=this.__eventListeners[e];if(f){for(var o=0,d=f.length;d&gt;o;o++)f[o].call(this,n||{});return this}}}fabric.Observable={observe:n,stopObserving:f,fire:o,on:n,off:f,trigger:o}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var e=0,n=arguments.length;n&gt;e;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&amp;&amp;this.renderAll(),this},insertAt:function(e,n,f){var o=this.getObjects();return f?o[n]=e:o.splice(n,0,e),this._onObjectAdded(e),this.renderOnAddRemove&amp;&amp;this.renderAll(),this},remove:function(){for(var e,n=this.getObjects(),f=0,o=arguments.length;o&gt;f;f++)e=n.indexOf(arguments[f]),-1!==e&amp;&amp;(n.splice(e,1),this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&amp;&amp;this.renderAll(),this},forEachObject:function(e,n){for(var f=this.getObjects(),o=f.length;o--;)e.call(n,f[o],o,f);return this},getObjects:function(e){return&quot;undefined&quot;==typeof e?this._objects:this._objects.filter(function(n){return n.type===e})},item:function(e){return this.getObjects()[e]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(e){return this.getObjects().indexOf(e)&gt;-1},complexity:function(){return this.getObjects().reduce(function(e,n){return e+=n.complexity?n.complexity():0},0)}},function(e){var n=Math.sqrt,f=Math.atan2,o=Math.PI/180;fabric.util={removeFromArray:function(e,n){var f=e.indexOf(n);return-1!==f&amp;&amp;e.splice(f,1),e},getRandomInt:function(e,n){return Math.floor(Math.random()*(n-e+1))+e},degreesToRadians:function(e){return e*o},radiansToDegrees:function(e){return e/o},rotatePoint:function(e,n,f){var o=Math.sin(f),d=Math.cos(f);e.subtractEquals(n);var i=e.x*d-e.y*o,t=e.x*o+e.y*d;return new fabric.Point(i,t).addEquals(n)},transformPoint:function(e,n,f){return f?new fabric.Point(n[0]*e.x+n[1]*e.y,n[2]*e.x+n[3]*e.y):new fabric.Point(n[0]*e.x+n[1]*e.y+n[4],n[2]*e.x+n[3]*e.y+n[5])},invertTransform:function(e){var n=e.slice(),f=1/(e[0]*e[3]-e[1]*e[2]);n=[f*e[3],-f*e[1],-f*e[2],f*e[0],0,0];var o=fabric.util.transformPoint({x:e[4],y:e[5]},n);return n[4]=-o.x,n[5]=-o.y,n},toFixed:function(e,n){return parseFloat(Number(e).toFixed(n))},parseUnit:function(e){var n=/\D{0,2}$/.exec(e),f=parseFloat(e);switch(n[0]){case&quot;mm&quot;:return f*fabric.DPI/25.4;case&quot;cm&quot;:return f*fabric.DPI/2.54;case&quot;in&quot;:return f*fabric.DPI;case&quot;pt&quot;:return f*fabric.DPI/72;case&quot;pc&quot;:return f*fabric.DPI/72*12;default:return f}},falseFunction:function(){return!1},getKlass:function(e,n){return e=fabric.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),fabric.util.resolveNamespace(n)[e]},resolveNamespace:function(n){if(!n)return fabric;for(var f=n.split(&quot;.&quot;),o=f.length,d=e||fabric.window,i=0;o&gt;i;++i)d=d[f[i]];return d},loadImage:function(e,n,f,o){if(!e)return void(n&amp;&amp;n.call(f,e));var d=fabric.util.createImage();d.onload=function(){n&amp;&amp;n.call(f,d),d=d.onload=d.onerror=null},d.onerror=function(){fabric.log(&quot;Error loading &quot;+d.src),n&amp;&amp;n.call(f,null,!0),d=d.onload=d.onerror=null},0!==e.indexOf(&quot;data&quot;)&amp;&amp;&quot;undefined&quot;!=typeof o&amp;&amp;(d.crossOrigin=o),d.src=e},enlivenObjects:function(e,n,f,o){function d(){++t===l&amp;&amp;n&amp;&amp;n(i)}e=e||[];var i=[],t=0,l=e.length;return l?void e.forEach(function(e,n){if(!e||!e.type)return void d();var t=fabric.util.getKlass(e.type,f);t.async?t.fromObject(e,function(f,t){t||(i[n]=f,o&amp;&amp;o(e,i[n])),d()}):(i[n]=t.fromObject(e),o&amp;&amp;o(e,i[n]),d())}):void(n&amp;&amp;n(i))},groupSVGElements:function(e,n,f){var o;return o=new fabric.PathGroup(e,n),&quot;undefined&quot;!=typeof f&amp;&amp;o.setSourcePath(f),o},populateWithProperties:function(e,n,f){if(f&amp;&amp;&quot;[object Array]&quot;===Object.prototype.toString.call(f))for(var o=0,d=f.length;d&gt;o;o++)f[o]in e&amp;&amp;(n[f[o]]=e[f[o]])},drawDashedLine:function(e,o,d,i,t,l){var s=i-o,u=t-d,a=n(s*s+u*u),p=f(u,s),c=l.length,y=0,m=!0;for(e.save(),e.translate(o,d),e.moveTo(0,0),e.rotate(p),o=0;a&gt;o;)o+=l[y++%c],o&gt;a&amp;&amp;(o=a),e[m?&quot;lineTo&quot;:&quot;moveTo&quot;](o,0),m=!m;e.restore()},createCanvasElement:function(e){return e||(e=fabric.document.createElement(&quot;canvas&quot;)),e.getContext||&quot;undefined&quot;==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(e),e},createImage:function(){return fabric.isLikelyNode?new(require(&quot;canvas&quot;).Image):fabric.document.createElement(&quot;img&quot;)},createAccessors:function(e){for(var n=e.prototype,f=n.stateProperties.length;f--;){var o=n.stateProperties[f],d=o.charAt(0).toUpperCase()+o.slice(1),i=&quot;set&quot;+d,t=&quot;get&quot;+d;n[t]||(n[t]=function(e){return new Function(&#39;return this.get(&quot;&#39;+e+&#39;&quot;)&#39;)}(o)),n[i]||(n[i]=function(e){return new Function(&quot;value&quot;,&#39;return this.set(&quot;&#39;+e+&#39;&quot;, value)&#39;)}(o))}},clipContext:function(e,n){n.save(),n.beginPath(),e.clipTo(n),n.clip()},multiplyTransformMatrices:function(e,n){for(var f=[[e[0],e[2],e[4]],[e[1],e[3],e[5]],[0,0,1]],o=[[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]],d=[],i=0;3&gt;i;i++){d[i]=[];for(var t=0;3&gt;t;t++){for(var l=0,s=0;3&gt;s;s++)l+=f[i][s]*o[s][t];d[i][t]=l}}return[d[0][0],d[1][0],d[0][1],d[1][1],d[0][2],d[1][2]]},getFunctionBody:function(e){return(String(e).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(e,n,f,o){o&gt;0&amp;&amp;(n&gt;o?n-=o:n=0,f&gt;o?f-=o:f=0);for(var d=!0,i=e.getImageData(n,f,2*o||1,2*o||1),t=3,l=i.data.length;l&gt;t;t+=4){var s=i.data[t];if(d=0&gt;=s,d===!1)break}return i=null,d}}}(&quot;undefined&quot;!=typeof exports?exports:this),function(){function e(e,d,t,l,s,u,a){var p=i.call(arguments);if(o[p])return o[p];var c=Math.PI,y=a*(c/180),m=Math.sin(y),r=Math.cos(y),v=0,w=0;t=Math.abs(t),l=Math.abs(l);var b=-r*e-m*d,g=-r*d+m*e,h=t*t,x=l*l,j=g*g,k=b*b,q=4*h*x-h*j-x*k,z=0;if(0&gt;q){var A=Math.sqrt(1-.25*q/(h*x));t*=A,l*=A}else z=(s===u?-.5:.5)*Math.sqrt(q/(h*j+x*k));var B=z*t*g/l,C=-z*l*b/t,D=r*B-m*C+e/2,E=m*B+r*C+d/2,F=f(1,0,(b-B)/t,(g-C)/l),G=f((b-B)/t,(g-C)/l,(-b-B)/t,(-g-C)/l);0===u&amp;&amp;G&gt;0?G-=2*c:1===u&amp;&amp;0&gt;G&amp;&amp;(G+=2*c);for(var H=Math.ceil(Math.abs(G/(.5*c))),I=[],J=G/H,K=8/3*Math.sin(J/4)*Math.sin(J/4)/Math.sin(J/2),L=F+J,M=0;H&gt;M;M++)I[M]=n(F,L,r,m,t,l,D,E,K,v,w),v=I[M][4],w=I[M][5],F+=J,L+=J;return o[p]=I,I}function n(e,n,f,o,t,l,s,u,a,p,c){var y=i.call(arguments);if(d[y])return d[y];var m=Math.cos(e),r=Math.sin(e),v=Math.cos(n),w=Math.sin(n),b=f*t*v-o*l*w+s,g=o*t*v+f*l*w+u,h=p+a*(-f*t*r-o*l*m),x=c+a*(-o*t*r+f*l*m),j=b+a*(f*t*w+o*l*v),k=g+a*(o*t*w-f*l*v);return d[y]=[h,x,j,k,b,g],d[y]}function f(e,n,f,o){var d=Math.atan2(n,e),i=Math.atan2(o,f);return i&gt;=d?i-d:2*Math.PI-(d-i)}var o={},d={},i=Array.prototype.join;fabric.util.drawArc=function(n,f,o,d){for(var i=d[0],t=d[1],l=d[2],s=d[3],u=d[4],a=d[5],p=d[6],c=[[],[],[],[]],y=e(a-f,p-o,i,t,s,u,l),m=0,r=y.length;r&gt;m;m++)c[m][0]=y[m][0]+f,c[m][1]=y[m][1]+o,c[m][2]=y[m][2]+f,c[m][3]=y[m][3]+o,c[m][4]=y[m][4]+f,c[m][5]=y[m][5]+o,n.bezierCurveTo.apply(n,c[m])}}(),function(){function e(e,n){for(var f=d.call(arguments,2),o=[],i=0,t=e.length;t&gt;i;i++)o[i]=f.length?e[i][n].apply(e[i],f):e[i][n].call(e[i]);return o}function n(e,n){return o(e,n,function(e,n){return e&gt;=n})}function f(e,n){return o(e,n,function(e,n){return n&gt;e})}function o(e,n,f){if(e&amp;&amp;0!==e.length){var o=e.length-1,d=n?e[o][n]:e[o];if(n)for(;o--;)f(e[o][n],d)&amp;&amp;(d=e[o][n]);else for(;o--;)f(e[o],d)&amp;&amp;(d=e[o]);return d}}var d=Array.prototype.slice;fabric.util.array={invoke:e,min:f,max:n}}(),function(){function e(e,n){for(var f in n)e[f]=n[f];return e}function n(n){return e({},n)}fabric.util.object={extend:e,clone:n}}(),function(){function e(e){return e.replace(/-+(.)?/g,function(e,n){return n?n.toUpperCase():&quot;&quot;})}function n(e,n){return e.charAt(0).toUpperCase()+(n?e.slice(1):e.slice(1).toLowerCase())}function f(e){return e.replace(/&amp;/g,&quot;&amp;amp;&quot;).replace(/&quot;/g,&quot;&amp;quot;&quot;).replace(/&#39;/g,&quot;&amp;apos;&quot;).replace(/&lt;/g,&quot;&amp;lt;&quot;).replace(/&gt;/g,&quot;&amp;gt;&quot;)}fabric.util.string={camelize:e,capitalize:n,escapeXml:f}}(),function(){function e(){}function n(e){var n=this.constructor.superclass.prototype[e];return arguments.length&gt;1?n.apply(this,o.call(arguments,1)):n.call(this)}function f(){function f(){this.initialize.apply(this,arguments)}var i=null,l=o.call(arguments,0);&quot;function&quot;==typeof l[0]&amp;&amp;(i=l.shift()),f.superclass=i,f.subclasses=[],i&amp;&amp;(e.prototype=i.prototype,f.prototype=new e,i.subclasses.push(f));for(var s=0,u=l.length;u&gt;s;s++)t(f,l[s],i);return f.prototype.initialize||(f.prototype.initialize=d),f.prototype.constructor=f,f.prototype.callSuper=n,f}var o=Array.prototype.slice,d=function(){},i=function(){for(var e in{toString:1})if(&quot;toString&quot;===e)return!1;return!0}(),t=function(e,n,f){for(var o in n)e.prototype[o]=o in e.prototype&amp;&amp;&quot;function&quot;==typeof e.prototype[o]&amp;&amp;(n[o]+&quot;&quot;).indexOf(&quot;callSuper&quot;)&gt;-1?function(e){return function(){var o=this.constructor.superclass;this.constructor.superclass=f;var d=n[e].apply(this,arguments);return this.constructor.superclass=o,&quot;initialize&quot;!==e?d:void 0}}(o):n[o],i&amp;&amp;(n.toString!==Object.prototype.toString&amp;&amp;(e.prototype.toString=n.toString),n.valueOf!==Object.prototype.valueOf&amp;&amp;(e.prototype.valueOf=n.valueOf))};fabric.util.createClass=f}(),function(){function e(e){var n,f,o=Array.prototype.slice.call(arguments,1),d=o.length;for(f=0;d&gt;f;f++)if(n=typeof e[o[f]],!/^(?:function|object|unknown)$/.test(n))return!1;return!0}function n(e,n){return{handler:n,wrappedHandler:f(e,n)}}function f(e,n){return function(f){n.call(t(e),f||fabric.window.event)}}function o(e,n){return function(f){if(r[e]&amp;&amp;r[e][n])for(var o=r[e][n],d=0,i=o.length;i&gt;d;d++)o[d].call(this,f||fabric.window.event)}}function d(e,n){e||(e=fabric.window.event);var f=e.target||(typeof e.srcElement!==s?e.srcElement:null),o=fabric.util.getScrollLeftTop(f,n);return{x:v(e)+o.left,y:w(e)+o.top}}function i(e,n,f){var o=&quot;touchend&quot;===e.type?&quot;changedTouches&quot;:&quot;touches&quot;;return e[o]&amp;&amp;e[o][0]?e[o][0][n]-(e[o][0][n]-e[o][0][f])||e[f]:e[f]}var t,l,s=&quot;unknown&quot;,u=function(){var e=0;return function(n){return n.__uniqueID||(n.__uniqueID=&quot;uniqueID__&quot;+e++)}}();!function(){var e={};t=function(n){return e[n]},l=function(n,f){e[n]=f}}();var a,p,c=e(fabric.document.documentElement,&quot;addEventListener&quot;,&quot;removeEventListener&quot;)&amp;&amp;e(fabric.window,&quot;addEventListener&quot;,&quot;removeEventListener&quot;),y=e(fabric.document.documentElement,&quot;attachEvent&quot;,&quot;detachEvent&quot;)&amp;&amp;e(fabric.window,&quot;attachEvent&quot;,&quot;detachEvent&quot;),m={},r={};c?(a=function(e,n,f){e.addEventListener(n,f,!1)},p=function(e,n,f){e.removeEventListener(n,f,!1)}):y?(a=function(e,f,o){var d=u(e);l(d,e),m[d]||(m[d]={}),m[d][f]||(m[d][f]=[]);var i=n(d,o);m[d][f].push(i),e.attachEvent(&quot;on&quot;+f,i.wrappedHandler)},p=function(e,n,f){var o,d=u(e);if(m[d]&amp;&amp;m[d][n])for(var i=0,t=m[d][n].length;t&gt;i;i++)o=m[d][n][i],o&amp;&amp;o.handler===f&amp;&amp;(e.detachEvent(&quot;on&quot;+n,o.wrappedHandler),m[d][n][i]=null)}):(a=function(e,n,f){var d=u(e);if(r[d]||(r[d]={}),!r[d][n]){r[d][n]=[];var i=e[&quot;on&quot;+n];i&amp;&amp;r[d][n].push(i),e[&quot;on&quot;+n]=o(d,n)}r[d][n].push(f)},p=function(e,n,f){var o=u(e);if(r[o]&amp;&amp;r[o][n])for(var d=r[o][n],i=0,t=d.length;t&gt;i;i++)d[i]===f&amp;&amp;d.splice(i,1)}),fabric.util.addListener=a,fabric.util.removeListener=p;var v=function(e){return typeof e.clientX!==s?e.clientX:0},w=function(e){return typeof e.clientY!==s?e.clientY:0};fabric.isTouchSupported&amp;&amp;(v=function(e){return i(e,&quot;pageX&quot;,&quot;clientX&quot;)},w=function(e){return i(e,&quot;pageY&quot;,&quot;clientY&quot;)}),fabric.util.getPointer=d,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function e(e,n){var f=e.style;if(!f)return e;if(&quot;string&quot;==typeof n)return e.style.cssText+=&quot;;&quot;+n,n.indexOf(&quot;opacity&quot;)&gt;-1?i(e,n.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var o in n)if(&quot;opacity&quot;===o)i(e,n[o]);else{var d=&quot;float&quot;===o||&quot;cssFloat&quot;===o?&quot;undefined&quot;==typeof f.styleFloat?&quot;cssFloat&quot;:&quot;styleFloat&quot;:o;f[d]=n[o]}return e}var n=fabric.document.createElement(&quot;div&quot;),f=&quot;string&quot;==typeof n.style.opacity,o=&quot;string&quot;==typeof n.style.filter,d=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,i=function(e){return e};f?i=function(e,n){return e.style.opacity=n,e}:o&amp;&amp;(i=function(e,n){var f=e.style;return e.currentStyle&amp;&amp;!e.currentStyle.hasLayout&amp;&amp;(f.zoom=1),d.test(f.filter)?(n=n&gt;=.9999?&quot;&quot;:&quot;alpha(opacity=&quot;+100*n+&quot;)&quot;,f.filter=f.filter.replace(d,n)):f.filter+=&quot; alpha(opacity=&quot;+100*n+&quot;)&quot;,e}),fabric.util.setStyle=e}(),function(){function e(e){return&quot;string&quot;==typeof e?fabric.document.getElementById(e):e}function n(e,n){var f=fabric.document.createElement(e);for(var o in n)&quot;class&quot;===o?f.className=n[o]:&quot;for&quot;===o?f.htmlFor=n[o]:f.setAttribute(o,n[o]);return f}function f(e,n){e&amp;&amp;-1===(&quot; &quot;+e.className+&quot; &quot;).indexOf(&quot; &quot;+n+&quot; &quot;)&amp;&amp;(e.className+=(e.className?&quot; &quot;:&quot;&quot;)+n)}function o(e,f,o){return&quot;string&quot;==typeof f&amp;&amp;(f=n(f,o)),e.parentNode&amp;&amp;e.parentNode.replaceChild(f,e),f.appendChild(e),f}function d(e,n){var f,o,d=0,i=0,t=fabric.document.documentElement,l=fabric.document.body||{scrollLeft:0,scrollTop:0};for(o=e;e&amp;&amp;e.parentNode&amp;&amp;!f;)e=e.parentNode,e!==fabric.document&amp;&amp;&quot;fixed&quot;===fabric.util.getElementStyle(e,&quot;position&quot;)&amp;&amp;(f=e),e!==fabric.document&amp;&amp;o!==n&amp;&amp;&quot;absolute&quot;===fabric.util.getElementStyle(e,&quot;position&quot;)?(d=0,i=0):e===fabric.document?(d=l.scrollLeft||t.scrollLeft||0,i=l.scrollTop||t.scrollTop||0):(d+=e.scrollLeft||0,i+=e.scrollTop||0);return{left:d,top:i}}function i(e){var n,f,o=e&amp;&amp;e.ownerDocument,d={left:0,top:0},i={left:0,top:0},t={borderLeftWidth:&quot;left&quot;,borderTopWidth:&quot;top&quot;,paddingLeft:&quot;left&quot;,paddingTop:&quot;top&quot;};if(!o)return{left:0,top:0};for(var l in t)i[t[l]]+=parseInt(a(e,l),10)||0;return n=o.documentElement,&quot;undefined&quot;!=typeof e.getBoundingClientRect&amp;&amp;(d=e.getBoundingClientRect()),f=fabric.util.getScrollLeftTop(e,null),{left:d.left+f.left-(n.clientLeft||0)+i.left,top:d.top+f.top-(n.clientTop||0)+i.top}}var t,l=Array.prototype.slice,s=function(e){return l.call(e,0)};try{t=s(fabric.document.childNodes)instanceof Array}catch(u){}t||(s=function(e){for(var n=new Array(e.length),f=e.length;f--;)n[f]=e[f];return n});var a;a=fabric.document.defaultView&amp;&amp;fabric.document.defaultView.getComputedStyle?function(e,n){return fabric.document.defaultView.getComputedStyle(e,null)[n]}:function(e,n){var f=e.style[n];return!f&amp;&amp;e.currentStyle&amp;&amp;(f=e.currentStyle[n]),f},function(){function e(e){return&quot;undefined&quot;!=typeof e.onselectstart&amp;&amp;(e.onselectstart=fabric.util.falseFunction),o?e.style[o]=&quot;none&quot;:&quot;string&quot;==typeof e.unselectable&amp;&amp;(e.unselectable=&quot;on&quot;),e}function n(e){return&quot;undefined&quot;!=typeof e.onselectstart&amp;&amp;(e.onselectstart=null),o?e.style[o]=&quot;&quot;:&quot;string&quot;==typeof e.unselectable&amp;&amp;(e.unselectable=&quot;&quot;),e}var f=fabric.document.documentElement.style,o=&quot;userSelect&quot;in f?&quot;userSelect&quot;:&quot;MozUserSelect&quot;in f?&quot;MozUserSelect&quot;:&quot;WebkitUserSelect&quot;in f?&quot;WebkitUserSelect&quot;:&quot;KhtmlUserSelect&quot;in f?&quot;KhtmlUserSelect&quot;:&quot;&quot;;fabric.util.makeElementUnselectable=e,fabric.util.makeElementSelectable=n}(),function(){function e(e,n){var f=fabric.document.getElementsByTagName(&quot;head&quot;)[0],o=fabric.document.createElement(&quot;script&quot;),d=!0;o.onload=o.onreadystatechange=function(e){if(d){if(&quot;string&quot;==typeof this.readyState&amp;&amp;&quot;loaded&quot;!==this.readyState&amp;&amp;&quot;complete&quot;!==this.readyState)return;d=!1,n(e||fabric.window.event),o=o.onload=o.onreadystatechange=null}},o.src=e,f.appendChild(o)}fabric.util.getScript=e}(),fabric.util.getById=e,fabric.util.toArray=s,fabric.util.makeElement=n,fabric.util.addClass=f,fabric.util.wrapElement=o,fabric.util.getScrollLeftTop=d,fabric.util.getElementOffset=i,fabric.util.getElementStyle=a}(),function(){function e(e,n){return e+(/\?/.test(e)?&quot;&amp;&quot;:&quot;?&quot;)+n}function n(){}function f(f,d){d||(d={});var i,t=d.method?d.method.toUpperCase():&quot;GET&quot;,l=d.onComplete||function(){},s=o();return s.onreadystatechange=function(){4===s.readyState&amp;&amp;(l(s),s.onreadystatechange=n)},&quot;GET&quot;===t&amp;&amp;(i=null,&quot;string&quot;==typeof d.parameters&amp;&amp;(f=e(f,d.parameters))),s.open(t,f,!0),(&quot;POST&quot;===t||&quot;PUT&quot;===t)&amp;&amp;s.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;),s.send(i),s}var o=function(){for(var e=[function(){return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)},function(){return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;)},function(){return new ActiveXObject(&quot;Msxml2.XMLHTTP.3.0&quot;)},function(){return new XMLHttpRequest}],n=e.length;n--;)try{var f=e[n]();if(f)return e[n]}catch(o){}}();fabric.util.request=f}(),fabric.log=function(){},fabric.warn=function(){},&quot;undefined&quot;!=typeof console&amp;&amp;[&quot;log&quot;,&quot;warn&quot;].forEach(function(e){&quot;undefined&quot;!=typeof console[e]&amp;&amp;console[e].apply&amp;&amp;(fabric[e]=function(){return console[e].apply(console,arguments)})}),function(e){&quot;use strict&quot;;function n(e){return e in j?j[e]:e}function f(e,n,f){var o,d=&quot;[object Array]&quot;===Object.prototype.toString.call(n);return&quot;fill&quot;!==e&amp;&amp;&quot;stroke&quot;!==e||&quot;none&quot;!==n?&quot;fillRule&quot;===e?n=&quot;evenodd&quot;===n?&quot;destination-over&quot;:n:&quot;strokeDashArray&quot;===e?n=n.replace(/,/g,&quot; &quot;).split(/\s+/).map(function(e){return parseInt(e)}):&quot;transformMatrix&quot;===e?n=f&amp;&amp;f.transformMatrix?x(f.transformMatrix,r.parseTransformAttribute(n)):r.parseTransformAttribute(n):&quot;visible&quot;===e?(n=&quot;none&quot;===n||&quot;hidden&quot;===n?!1:!0,f&amp;&amp;f.visible===!1&amp;&amp;(n=!1)):&quot;originX&quot;===e?n=&quot;start&quot;===n?&quot;left&quot;:&quot;end&quot;===n?&quot;right&quot;:&quot;center&quot;:o=d?n.map(h):h(n):n=&quot;&quot;,!d&amp;&amp;isNaN(o)?n:o}function o(e){for(var n in k)if(e[n]&amp;&amp;&quot;undefined&quot;!=typeof e[k[n]]&amp;&amp;0!==e[n].indexOf(&quot;url(&quot;)){var f=new r.Color(e[n]);e[n]=f.setAlpha(g(f.getAlpha()*e[k[n]],2)).toRgba()}return e}function d(e,n){var f=e.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);if(f){var o=f[1],d=f[3],i=f[4],t=f[5],l=f[6];o&amp;&amp;(n.fontStyle=o),d&amp;&amp;(n.fontWeight=isNaN(parseFloat(d))?d:parseFloat(d)),i&amp;&amp;(n.fontSize=parseFloat(i)),l&amp;&amp;(n.fontFamily=l),t&amp;&amp;(n.lineHeight=&quot;normal&quot;===t?1:t)}}function i(e,o){var i,t;e.replace(/;$/,&quot;&quot;).split(&quot;;&quot;).forEach(function(e){var l=e.split(&quot;:&quot;);i=n(l[0].trim().toLowerCase()),t=f(i,l[1].trim()),&quot;font&quot;===i?d(t,o):o[i]=t})}function t(e,o){var i,t;for(var l in e)&quot;undefined&quot;!=typeof e[l]&amp;&amp;(i=n(l.toLowerCase()),t=f(i,e[l]),&quot;font&quot;===i?d(t,o):o[i]=t)}function l(e){var n={};for(var f in r.cssRules)if(s(e,f.split(&quot; &quot;)))for(var o in r.cssRules[f])n[o]=r.cssRules[f][o];return n}function s(e,n){var f,o=!0;return f=a(e,n.pop()),f&amp;&amp;n.length&amp;&amp;(o=u(e,n)),f&amp;&amp;o&amp;&amp;0===n.length}function u(e,n){for(var f,o=!0;e.parentNode&amp;&amp;1===e.parentNode.nodeType&amp;&amp;n.length;)o&amp;&amp;(f=n.pop()),e=e.parentNode,o=a(e,f);return 0===n.length}function a(e,n){var f,o=e.nodeName,d=e.getAttribute(&quot;class&quot;),i=e.getAttribute(&quot;id&quot;);if(f=new RegExp(&quot;^&quot;+o,&quot;i&quot;),n=n.replace(f,&quot;&quot;),i&amp;&amp;n.length&amp;&amp;(f=new RegExp(&quot;#&quot;+i+&quot;(?![a-zA-Z\\-]+)&quot;,&quot;i&quot;),n=n.replace(f,&quot;&quot;)),d&amp;&amp;n.length){d=d.split(&quot; &quot;);for(var t=d.length;t--;)f=new RegExp(&quot;\\.&quot;+d[t]+&quot;(?![a-zA-Z\\-]+)&quot;,&quot;i&quot;),n=n.replace(f,&quot;&quot;)}return 0===n.length}function p(e){for(var n=e.getElementsByTagName(&quot;use&quot;);n.length;){for(var f,o=n[0],d=o.getAttribute(&quot;xlink:href&quot;).substr(1),i=o.getAttribute(&quot;x&quot;)||0,t=o.getAttribute(&quot;y&quot;)||0,l=e.getElementById(d).cloneNode(!0),s=(o.getAttribute(&quot;transform&quot;)||&quot;&quot;)+&quot; translate(&quot;+i+&quot;, &quot;+t+&quot;)&quot;,u=0,a=o.attributes,p=a.length;p&gt;u;u++){var c=a.item(u);&quot;x&quot;!==c.nodeName&amp;&amp;&quot;y&quot;!==c.nodeName&amp;&amp;&quot;xlink:href&quot;!==c.nodeName&amp;&amp;(&quot;transform&quot;===c.nodeName?s=s+&quot; &quot;+c.nodeValue:l.setAttribute(c.nodeName,c.nodeValue))}l.setAttribute(&quot;transform&quot;,s),l.removeAttribute(&quot;id&quot;),f=o.parentNode,f.replaceChild(l,o)}}function c(e,n){if(n[3]=n[0]=n[0]&gt;n[3]?n[3]:n[0],1!==n[0]||1!==n[3]||0!==n[4]||0!==n[5]){for(var f=e.ownerDocument.createElement(&quot;g&quot;);null!=e.firstChild;)f.appendChild(e.firstChild);f.setAttribute(&quot;transform&quot;,&quot;matrix(&quot;+n[0]+&quot; &quot;+n[1]+&quot; &quot;+n[2]+&quot; &quot;+n[3]+&quot; &quot;+n[4]+&quot; &quot;+n[5]+&quot;)&quot;),e.appendChild(f)}}function y(e){var n=e.objects,f=e.options;return n=n.map(function(e){return r[w(e.type)].fromObject(e)}),{objects:n,options:f}}function m(e,n,f){n[f]&amp;&amp;n[f].toSVG&amp;&amp;e.push(&#39;&lt;pattern x=&quot;0&quot; y=&quot;0&quot; id=&quot;&#39;,f,&#39;Pattern&quot; &#39;,&#39;width=&quot;&#39;,n[f].source.width,&#39;&quot; height=&quot;&#39;,n[f].source.height,&#39;&quot; patternUnits=&quot;userSpaceOnUse&quot;&gt;&#39;,&#39;&lt;image x=&quot;0&quot; y=&quot;0&quot; &#39;,&#39;width=&quot;&#39;,n[f].source.width,&#39;&quot; height=&quot;&#39;,n[f].source.height,&#39;&quot; xlink:href=&quot;&#39;,n[f].source.src,&#39;&quot;&gt;&lt;/image&gt;&lt;/pattern&gt;&#39;)}var r=e.fabric||(e.fabric={}),v=r.util.object.extend,w=r.util.string.capitalize,b=r.util.object.clone,g=r.util.toFixed,h=r.util.parseUnit,x=r.util.multiplyTransformMatrices,j={cx:&quot;left&quot;,x:&quot;left&quot;,r:&quot;radius&quot;,cy:&quot;top&quot;,y:&quot;top&quot;,display:&quot;visible&quot;,visibility:&quot;visible&quot;,transform:&quot;transformMatrix&quot;,&quot;fill-opacity&quot;:&quot;fillOpacity&quot;,&quot;fill-rule&quot;:&quot;fillRule&quot;,&quot;font-family&quot;:&quot;fontFamily&quot;,&quot;font-size&quot;:&quot;fontSize&quot;,&quot;font-style&quot;:&quot;fontStyle&quot;,&quot;font-weight&quot;:&quot;fontWeight&quot;,&quot;stroke-dasharray&quot;:&quot;strokeDashArray&quot;,&quot;stroke-linecap&quot;:&quot;strokeLineCap&quot;,&quot;stroke-linejoin&quot;:&quot;strokeLineJoin&quot;,&quot;stroke-miterlimit&quot;:&quot;strokeMiterLimit&quot;,&quot;stroke-opacity&quot;:&quot;strokeOpacity&quot;,&quot;stroke-width&quot;:&quot;strokeWidth&quot;,&quot;text-decoration&quot;:&quot;textDecoration&quot;,&quot;text-anchor&quot;:&quot;originX&quot;},k={stroke:&quot;strokeOpacity&quot;,fill:&quot;fillOpacity&quot;};r.parseTransformAttribute=function(){function e(e,n){var f=n[0];e[0]=Math.cos(f),e[1]=Math.sin(f),e[2]=-Math.sin(f),e[3]=Math.cos(f)}function n(e,n){var f=n[0],o=2===n.length?n[1]:n[0];e[0]=f,e[3]=o}function f(e,n){e[2]=n[0]}function o(e,n){e[1]=n[0]}function d(e,n){e[4]=n[0],2===n.length&amp;&amp;(e[5]=n[1])}var i=[1,0,0,1,0,0],t=&quot;(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)&quot;,l=&quot;(?:\\s+,?\\s*|,\\s*)&quot;,s=&quot;(?:(skewX)\\s*\\(\\s*(&quot;+t+&quot;)\\s*\\))&quot;,u=&quot;(?:(skewY)\\s*\\(\\s*(&quot;+t+&quot;)\\s*\\))&quot;,a=&quot;(?:(rotate)\\s*\\(\\s*(&quot;+t+&quot;)(?:&quot;+l+&quot;(&quot;+t+&quot;)&quot;+l+&quot;(&quot;+t+&quot;))?\\s*\\))&quot;,p=&quot;(?:(scale)\\s*\\(\\s*(&quot;+t+&quot;)(?:&quot;+l+&quot;(&quot;+t+&quot;))?\\s*\\))&quot;,c=&quot;(?:(translate)\\s*\\(\\s*(&quot;+t+&quot;)(?:&quot;+l+&quot;(&quot;+t+&quot;))?\\s*\\))&quot;,y=&quot;(?:(matrix)\\s*\\(\\s*(&quot;+t+&quot;)&quot;+l+&quot;(&quot;+t+&quot;)&quot;+l+&quot;(&quot;+t+&quot;)&quot;+l+&quot;(&quot;+t+&quot;)&quot;+l+&quot;(&quot;+t+&quot;)&quot;+l+&quot;(&quot;+t+&quot;)\\s*\\))&quot;,m=&quot;(?:&quot;+y+&quot;|&quot;+c+&quot;|&quot;+p+&quot;|&quot;+a+&quot;|&quot;+s+&quot;|&quot;+u+&quot;)&quot;,v=&quot;(?:&quot;+m+&quot;(?:&quot;+l+m+&quot;)*)&quot;,w=&quot;^\\s*(?:&quot;+v+&quot;?)\\s*$&quot;,b=new RegExp(w),g=new RegExp(m,&quot;g&quot;);return function(t){var l=i.concat(),s=[];if(!t||t&amp;&amp;!b.test(t))return l;t.replace(g,function(t){var u=new RegExp(m).exec(t).filter(function(e){return&quot;&quot;!==e&amp;&amp;null!=e}),a=u[1],p=u.slice(2).map(parseFloat);switch(a){case&quot;translate&quot;:d(l,p);break;case&quot;rotate&quot;:p[0]=r.util.degreesToRadians(p[0]),e(l,p);break;case&quot;scale&quot;:n(l,p);break;case&quot;skewX&quot;:f(l,p);break;case&quot;skewY&quot;:o(l,p);break;case&quot;matrix&quot;:l=p}s.push(l.concat()),l=i.concat()});for(var u=s[0];s.length&gt;1;)s.shift(),u=r.util.multiplyTransformMatrices(u,s[0]);return u}}(),r.parseSVGDocument=function(){function e(e,n){for(;e&amp;&amp;(e=e.parentNode);)if(n.test(e.nodeName))return!0;return!1}var n=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,f=&quot;(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)&quot;,o=new RegExp(&quot;^\\s*(&quot;+f+&quot;+)\\s*,?\\s*(&quot;+f+&quot;+)\\s*,?\\s*(&quot;+f+&quot;+)\\s*,?\\s*(&quot;+f+&quot;+)\\s*$&quot;);return function(f,d,i){if(f){var t=new Date;p(f);var l,s,u=f.getAttribute(&quot;viewBox&quot;),a=h(f.getAttribute(&quot;width&quot;)||&quot;100%&quot;),y=h(f.getAttribute(&quot;height&quot;)||&quot;100%&quot;);if(u&amp;&amp;(u=u.match(o))){var m=parseFloat(u[1]),v=parseFloat(u[2]),w=1,g=1;l=parseFloat(u[3]),s=parseFloat(u[4]),a&amp;&amp;a!==l&amp;&amp;(w=a/l),y&amp;&amp;y!==s&amp;&amp;(g=y/s),c(f,[w,0,0,g,w*-m,g*-v])}var x=r.util.toArray(f.getElementsByTagName(&quot;*&quot;));if(0===x.length&amp;&amp;r.isLikelyNode){x=f.selectNodes(&#39;//*[name(.)!=&quot;svg&quot;]&#39;);for(var j=[],k=0,q=x.length;q&gt;k;k++)j[k]=x[k];x=j}var z=x.filter(function(f){return n.test(f.tagName)&amp;&amp;!e(f,/^(?:pattern|defs)$/)});if(!z||z&amp;&amp;!z.length)return void(d&amp;&amp;d([],{}));var A={width:a?a:l,height:y?y:s,widthAttr:a,heightAttr:y};r.gradientDefs=r.getGradientDefs(f),r.cssRules=r.getCSSRules(f),r.parseElements(z,function(e){r.documentParsingTime=new Date-t,d&amp;&amp;d(e,A)},b(A),i)}}}();var q={has:function(e,n){n(!1)},get:function(){},set:function(){}};v(r,{getGradientDefs:function(e){var n,f,o,d,i=e.getElementsByTagName(&quot;linearGradient&quot;),t=e.getElementsByTagName(&quot;radialGradient&quot;),l=0,s=[],u={},a={};for(s.length=i.length+t.length,f=i.length;f--;)s[l++]=i[f];for(f=t.length;f--;)s[l++]=t[f];for(;l--;)n=s[l],d=n.getAttribute(&quot;xlink:href&quot;),o=n.getAttribute(&quot;id&quot;),d&amp;&amp;(a[o]=d.substr(1)),u[o]=n;for(o in a){var p=u[a[o]].cloneNode(!0);for(n=u[o];p.firstChild;)n.appendChild(p.firstChild)}return u},parseAttributes:function(e,d){if(e){var i,t={};e.parentNode&amp;&amp;/^symbol|[g|a]$/i.test(e.parentNode.nodeName)&amp;&amp;(t=r.parseAttributes(e.parentNode,d));var s=d.reduce(function(o,d){return i=e.getAttribute(d),i&amp;&amp;(d=n(d),i=f(d,i,t),o[d]=i),o},{});return s=v(s,v(l(e),r.parseStyleAttribute(e))),o(v(t,s))}},parseElements:function(e,n,f,o){new r.ElementsParser(e,n,f,o).parse()},parseStyleAttribute:function(e){var n={},f=e.getAttribute(&quot;style&quot;);return f?(&quot;string&quot;==typeof f?i(f,n):t(f,n),n):n</td>
      </tr>
      <tr>
        <td id="L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="LC9" class="blob-code js-file-line">},parsePointsAttribute:function(e){if(!e)return null;e=e.replace(/,/g,&quot; &quot;).trim(),e=e.split(/\s+/);var n,f,o=[];for(n=0,f=e.length;f&gt;n;n+=2)o.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return o},getCSSRules:function(e){for(var o,d=e.getElementsByTagName(&quot;style&quot;),i={},t=0,l=d.length;l&gt;t;t++){var s=d[0].textContent;s=s.replace(/\/\*[\s\S]*?\*\//g,&quot;&quot;),o=s.match(/[^{]*\{[\s\S]*?\}/g),o=o.map(function(e){return e.trim()}),o.forEach(function(e){for(var o=e.match(/([\s\S]*?)\s*\{([^}]*)\}/),d={},t=o[2].trim(),l=t.replace(/;$/,&quot;&quot;).split(/\s*;\s*/),s=0,u=l.length;u&gt;s;s++){var a=l[s].split(/\s*:\s*/),p=n(a[0]),c=f(p,a[1],a[0]);d[p]=c}e=o[1],e.split(&quot;,&quot;).forEach(function(e){i[e.trim()]=r.util.object.clone(d)})})}return i},loadSVGFromURL:function(e,n,f){function o(o){var d=o.responseXML;d&amp;&amp;!d.documentElement&amp;&amp;r.window.ActiveXObject&amp;&amp;o.responseText&amp;&amp;(d=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),d.async=&quot;false&quot;,d.loadXML(o.responseText.replace(/&lt;!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?&gt;/i,&quot;&quot;))),d&amp;&amp;d.documentElement&amp;&amp;r.parseSVGDocument(d.documentElement,function(f,o){q.set(e,{objects:r.util.array.invoke(f,&quot;toObject&quot;),options:o}),n(f,o)},f)}e=e.replace(/^\n\s*/,&quot;&quot;).trim(),q.has(e,function(f){f?q.get(e,function(e){var f=y(e);n(f.objects,f.options)}):new r.util.request(e,{method:&quot;get&quot;,onComplete:o})})},loadSVGFromString:function(e,n,f){e=e.trim();var o;if(&quot;undefined&quot;!=typeof DOMParser){var d=new DOMParser;d&amp;&amp;d.parseFromString&amp;&amp;(o=d.parseFromString(e,&quot;text/xml&quot;))}else r.window.ActiveXObject&amp;&amp;(o=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),o.async=&quot;false&quot;,o.loadXML(e.replace(/&lt;!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?&gt;/i,&quot;&quot;)));r.parseSVGDocument(o.documentElement,function(e,f){n(e,f)},f)},createSVGFontFacesMarkup:function(e){for(var n=&quot;&quot;,f=0,o=e.length;o&gt;f;f++)&quot;text&quot;===e[f].type&amp;&amp;e[f].path&amp;&amp;(n+=[&quot;@font-face {&quot;,&quot;font-family: &quot;,e[f].fontFamily,&quot;; &quot;,&quot;src: url(&#39;&quot;,e[f].path,&quot;&#39;)&quot;,&quot;}&quot;].join(&quot;&quot;));return n&amp;&amp;(n=[&#39;&lt;style type=&quot;text/css&quot;&gt;&#39;,&quot;&lt;![CDATA[&quot;,n,&quot;]]&gt;&quot;,&quot;&lt;/style&gt;&quot;].join(&quot;&quot;)),n},createSVGRefElementsMarkup:function(e){var n=[];return m(n,e,&quot;backgroundColor&quot;),m(n,e,&quot;overlayColor&quot;),n.join(&quot;&quot;)}})}(&quot;undefined&quot;!=typeof exports?exports:this),fabric.ElementsParser=function(e,n,f,o){this.elements=e,this.callback=n,this.options=f,this.reviver=o},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var e=0,n=this.elements.length;n&gt;e;e++)!function(e,n){setTimeout(function(){e.createObject(e.elements[n],n)},0)}(this,e)},fabric.ElementsParser.prototype.createObject=function(e,n){var f=fabric[fabric.util.string.capitalize(e.tagName)];if(f&amp;&amp;f.fromElement)try{this._createObject(f,e,n)}catch(o){fabric.log(o)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(e,n,f){if(e.async)e.fromElement(n,this.createCallback(f,n),this.options);else{var o=e.fromElement(n,this.options);this.resolveGradient(o,&quot;fill&quot;),this.resolveGradient(o,&quot;stroke&quot;),this.reviver&amp;&amp;this.reviver(n,o),this.instances[f]=o,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(e,n){var f=this;return function(o){f.resolveGradient(o,&quot;fill&quot;),f.resolveGradient(o,&quot;stroke&quot;),f.reviver&amp;&amp;f.reviver(n,o),f.instances[e]=o,f.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(e,n){var f=e.get(n);if(/^url\(/.test(f)){var o=f.slice(5,f.length-1);fabric.gradientDefs[o]&amp;&amp;e.set(n,fabric.Gradient.fromElement(fabric.gradientDefs[o],e))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&amp;&amp;(this.instances=this.instances.filter(function(e){return null!=e}),this.callback(this.instances))},function(e){&quot;use strict&quot;;function n(e,n){this.x=e,this.y=n}var f=e.fabric||(e.fabric={});return f.Point?void f.warn(&quot;fabric.Point is already defined&quot;):(f.Point=n,void(n.prototype={constructor:n,add:function(e){return new n(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new n(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new n(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new n(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&amp;&amp;this.y===e.y},lt:function(e){return this.x&lt;e.x&amp;&amp;this.y&lt;e.y},lte:function(e){return this.x&lt;=e.x&amp;&amp;this.y&lt;=e.y},gt:function(e){return this.x&gt;e.x&amp;&amp;this.y&gt;e.y},gte:function(e){return this.x&gt;=e.x&amp;&amp;this.y&gt;=e.y},lerp:function(e,f){return new n(this.x+(e.x-this.x)*f,this.y+(e.y-this.y)*f)},distanceFrom:function(e){var n=this.x-e.x,f=this.y-e.y;return Math.sqrt(n*n+f*f)},midPointFrom:function(e){return new n(this.x+(e.x-this.x)/2,this.y+(e.y-this.y)/2)},min:function(e){return new n(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new n(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+&quot;,&quot;+this.y},setXY:function(e,n){this.x=e,this.y=n},setFromPoint:function(e){this.x=e.x,this.y=e.y},swap:function(e){var n=this.x,f=this.y;this.x=e.x,this.y=e.y,e.x=n,e.y=f}}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;function n(e){this.status=e,this.points=[]}var f=e.fabric||(e.fabric={});return f.Intersection?void f.warn(&quot;fabric.Intersection is already defined&quot;):(f.Intersection=n,f.Intersection.prototype={appendPoint:function(e){this.points.push(e)},appendPoints:function(e){this.points=this.points.concat(e)}},f.Intersection.intersectLineLine=function(e,o,d,i){var t,l=(i.x-d.x)*(e.y-d.y)-(i.y-d.y)*(e.x-d.x),s=(o.x-e.x)*(e.y-d.y)-(o.y-e.y)*(e.x-d.x),u=(i.y-d.y)*(o.x-e.x)-(i.x-d.x)*(o.y-e.y);if(0!==u){var a=l/u,p=s/u;a&gt;=0&amp;&amp;1&gt;=a&amp;&amp;p&gt;=0&amp;&amp;1&gt;=p?(t=new n(&quot;Intersection&quot;),t.points.push(new f.Point(e.x+a*(o.x-e.x),e.y+a*(o.y-e.y)))):t=new n}else t=new n(0===l||0===s?&quot;Coincident&quot;:&quot;Parallel&quot;);return t},f.Intersection.intersectLinePolygon=function(e,f,o){for(var d=new n,i=o.length,t=0;i&gt;t;t++){var l=o[t],s=o[(t+1)%i],u=n.intersectLineLine(e,f,l,s);d.appendPoints(u.points)}return d.points.length&gt;0&amp;&amp;(d.status=&quot;Intersection&quot;),d},f.Intersection.intersectPolygonPolygon=function(e,f){for(var o=new n,d=e.length,i=0;d&gt;i;i++){var t=e[i],l=e[(i+1)%d],s=n.intersectLinePolygon(t,l,f);o.appendPoints(s.points)}return o.points.length&gt;0&amp;&amp;(o.status=&quot;Intersection&quot;),o},void(f.Intersection.intersectPolygonRectangle=function(e,o,d){var i=o.min(d),t=o.max(d),l=new f.Point(t.x,i.y),s=new f.Point(i.x,t.y),u=n.intersectLinePolygon(i,l,e),a=n.intersectLinePolygon(l,t,e),p=n.intersectLinePolygon(t,s,e),c=n.intersectLinePolygon(s,i,e),y=new n;return y.appendPoints(u.points),y.appendPoints(a.points),y.appendPoints(p.points),y.appendPoints(c.points),y.points.length&gt;0&amp;&amp;(y.status=&quot;Intersection&quot;),y}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;function n(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function f(e,n,f){return 0&gt;f&amp;&amp;(f+=1),f&gt;1&amp;&amp;(f-=1),1/6&gt;f?e+6*(n-e)*f:.5&gt;f?n:2/3&gt;f?e+(n-e)*(2/3-f)*6:e}var o=e.fabric||(e.fabric={});return o.Color?void o.warn(&quot;fabric.Color is already defined.&quot;):(o.Color=n,o.Color.prototype={_tryParsingColor:function(e){var f;return e in n.colorNameMap&amp;&amp;(e=n.colorNameMap[e]),&quot;transparent&quot;===e?void this.setSource([255,255,255,0]):(f=n.sourceFromHex(e),f||(f=n.sourceFromRgb(e)),f||(f=n.sourceFromHsl(e)),void(f&amp;&amp;this.setSource(f)))},_rgbToHsl:function(e,n,f){e/=255,n/=255,f/=255;var d,i,t,l=o.util.array.max([e,n,f]),s=o.util.array.min([e,n,f]);if(t=(l+s)/2,l===s)d=i=0;else{var u=l-s;switch(i=t&gt;.5?u/(2-l-s):u/(l+s),l){case e:d=(n-f)/u+(f&gt;n?6:0);break;case n:d=(f-e)/u+2;break;case f:d=(e-n)/u+4}d/=6}return[Math.round(360*d),Math.round(100*i),Math.round(100*t)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return&quot;rgb(&quot;+e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;)&quot;},toRgba:function(){var e=this.getSource();return&quot;rgba(&quot;+e[0]+&quot;,&quot;+e[1]+&quot;,&quot;+e[2]+&quot;,&quot;+e[3]+&quot;)&quot;},toHsl:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return&quot;hsl(&quot;+n[0]+&quot;,&quot;+n[1]+&quot;%,&quot;+n[2]+&quot;%)&quot;},toHsla:function(){var e=this.getSource(),n=this._rgbToHsl(e[0],e[1],e[2]);return&quot;hsla(&quot;+n[0]+&quot;,&quot;+n[1]+&quot;%,&quot;+n[2]+&quot;%,&quot;+e[3]+&quot;)&quot;},toHex:function(){var e,n,f,o=this.getSource();return e=o[0].toString(16),e=1===e.length?&quot;0&quot;+e:e,n=o[1].toString(16),n=1===n.length?&quot;0&quot;+n:n,f=o[2].toString(16),f=1===f.length?&quot;0&quot;+f:f,e.toUpperCase()+n.toUpperCase()+f.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var n=this.getSource();return n[3]=e,this.setSource(n),this},toGrayscale:function(){var e=this.getSource(),n=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),f=e[3];return this.setSource([n,n,n,f]),this},toBlackWhite:function(e){var n=this.getSource(),f=(.3*n[0]+.59*n[1]+.11*n[2]).toFixed(0),o=n[3];return e=e||127,f=Number(f)&lt;Number(e)?0:255,this.setSource([f,f,f,o]),this},overlayWith:function(e){e instanceof n||(e=new n(e));for(var f=[],o=this.getAlpha(),d=.5,i=this.getSource(),t=e.getSource(),l=0;3&gt;l;l++)f.push(Math.round(i[l]*(1-d)+t[l]*d));return f[3]=o,this.setSource(f),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,o.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aqua:&quot;#00FFFF&quot;,black:&quot;#000000&quot;,blue:&quot;#0000FF&quot;,fuchsia:&quot;#FF00FF&quot;,gray:&quot;#808080&quot;,green:&quot;#008000&quot;,lime:&quot;#00FF00&quot;,maroon:&quot;#800000&quot;,navy:&quot;#000080&quot;,olive:&quot;#808000&quot;,orange:&quot;#FFA500&quot;,purple:&quot;#800080&quot;,red:&quot;#FF0000&quot;,silver:&quot;#C0C0C0&quot;,teal:&quot;#008080&quot;,white:&quot;#FFFFFF&quot;,yellow:&quot;#FFFF00&quot;},o.Color.fromRgb=function(e){return n.fromSource(n.sourceFromRgb(e))},o.Color.sourceFromRgb=function(e){var f=e.match(n.reRGBa);if(f){var o=parseInt(f[1],10)/(/%$/.test(f[1])?100:1)*(/%$/.test(f[1])?255:1),d=parseInt(f[2],10)/(/%$/.test(f[2])?100:1)*(/%$/.test(f[2])?255:1),i=parseInt(f[3],10)/(/%$/.test(f[3])?100:1)*(/%$/.test(f[3])?255:1);return[parseInt(o,10),parseInt(d,10),parseInt(i,10),f[4]?parseFloat(f[4]):1]}},o.Color.fromRgba=n.fromRgb,o.Color.fromHsl=function(e){return n.fromSource(n.sourceFromHsl(e))},o.Color.sourceFromHsl=function(e){var o=e.match(n.reHSLa);if(o){var d,i,t,l=(parseFloat(o[1])%360+360)%360/360,s=parseFloat(o[2])/(/%$/.test(o[2])?100:1),u=parseFloat(o[3])/(/%$/.test(o[3])?100:1);if(0===s)d=i=t=u;else{var a=.5&gt;=u?u*(s+1):u+s-u*s,p=2*u-a;d=f(p,a,l+1/3),i=f(p,a,l),t=f(p,a,l-1/3)}return[Math.round(255*d),Math.round(255*i),Math.round(255*t),o[4]?parseFloat(o[4]):1]}},o.Color.fromHsla=n.fromHsl,o.Color.fromHex=function(e){return n.fromSource(n.sourceFromHex(e))},o.Color.sourceFromHex=function(e){if(e.match(n.reHex)){var f=e.slice(e.indexOf(&quot;#&quot;)+1),o=3===f.length,d=o?f.charAt(0)+f.charAt(0):f.substring(0,2),i=o?f.charAt(1)+f.charAt(1):f.substring(2,4),t=o?f.charAt(2)+f.charAt(2):f.substring(4,6);return[parseInt(d,16),parseInt(i,16),parseInt(t,16),1]}},void(o.Color.fromSource=function(e){var f=new n;return f.setSource(e),f}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(){function e(e){var n,f,o,d=e.getAttribute(&quot;style&quot;),i=e.getAttribute(&quot;offset&quot;);if(i=parseFloat(i)/(/%$/.test(i)?100:1),i=0&gt;i?0:i&gt;1?1:i,d){var t=d.split(/\s*;\s*/);&quot;&quot;===t[t.length-1]&amp;&amp;t.pop();for(var l=t.length;l--;){var s=t[l].split(/\s*:\s*/),u=s[0].trim(),a=s[1].trim();&quot;stop-color&quot;===u?n=a:&quot;stop-opacity&quot;===u&amp;&amp;(o=a)}}return n||(n=e.getAttribute(&quot;stop-color&quot;)||&quot;rgb(0,0,0)&quot;),o||(o=e.getAttribute(&quot;stop-opacity&quot;)),n=new fabric.Color(n),f=n.getAlpha(),o=isNaN(parseFloat(o))?1:parseFloat(o),o*=f,{offset:i,color:n.toRgb(),opacity:o}}function n(e){return{x1:e.getAttribute(&quot;x1&quot;)||0,y1:e.getAttribute(&quot;y1&quot;)||0,x2:e.getAttribute(&quot;x2&quot;)||&quot;100%&quot;,y2:e.getAttribute(&quot;y2&quot;)||0}}function f(e){return{x1:e.getAttribute(&quot;fx&quot;)||e.getAttribute(&quot;cx&quot;)||&quot;50%&quot;,y1:e.getAttribute(&quot;fy&quot;)||e.getAttribute(&quot;cy&quot;)||&quot;50%&quot;,r1:0,x2:e.getAttribute(&quot;cx&quot;)||&quot;50%&quot;,y2:e.getAttribute(&quot;cy&quot;)||&quot;50%&quot;,r2:e.getAttribute(&quot;r&quot;)||&quot;50%&quot;}}function o(e,n,f){var o,d=0,i=1,t=&quot;&quot;;for(var l in n)o=parseFloat(n[l],10),i=&quot;string&quot;==typeof n[l]&amp;&amp;/^\d+%$/.test(n[l])?.01:1,&quot;x1&quot;===l||&quot;x2&quot;===l||&quot;r2&quot;===l?(i*=&quot;objectBoundingBox&quot;===f?e.width:1,d=&quot;objectBoundingBox&quot;===f?e.left||0:0):(&quot;y1&quot;===l||&quot;y2&quot;===l)&amp;&amp;(i*=&quot;objectBoundingBox&quot;===f?e.height:1,d=&quot;objectBoundingBox&quot;===f?e.top||0:0),n[l]=o*i+d;if(&quot;ellipse&quot;===e.type&amp;&amp;null!==n.r2&amp;&amp;&quot;objectBoundingBox&quot;===f&amp;&amp;e.rx!==e.ry){var s=e.ry/e.rx;t=&quot; scale(1, &quot;+s+&quot;)&quot;,n.y1&amp;&amp;(n.y1/=s),n.y2&amp;&amp;(n.y2/=s)}return t}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(e){e||(e={});var n={};this.id=fabric.Object.__uid++,this.type=e.type||&quot;linear&quot;,n={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},&quot;radial&quot;===this.type&amp;&amp;(n.r1=e.coords.r1||0,n.r2=e.coords.r2||0),this.coords=n,this.colorStops=e.colorStops.slice(),e.gradientTransform&amp;&amp;(this.gradientTransform=e.gradientTransform),this.offsetX=e.offsetX||this.offsetX,this.offsetY=e.offsetY||this.offsetY},addColorStop:function(e){for(var n in e){var f=new fabric.Color(e[n]);this.colorStops.push({offset:n,color:f.toRgb(),opacity:f.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(e){var n,f,o=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(e,n){return e.offset-n.offset}),!e.group||&quot;path-group&quot;!==e.group.type)for(var d in o)&quot;x1&quot;===d||&quot;x2&quot;===d||&quot;r2&quot;===d?o[d]+=this.offsetX-e.width/2:(&quot;y1&quot;===d||&quot;y2&quot;===d)&amp;&amp;(o[d]+=this.offsetY-e.height/2);f=&#39;id=&quot;SVGID_&#39;+this.id+&#39;&quot; gradientUnits=&quot;userSpaceOnUse&quot;&#39;,this.gradientTransform&amp;&amp;(f+=&#39; gradientTransform=&quot;matrix(&#39;+this.gradientTransform.join(&quot; &quot;)+&#39;)&quot; &#39;),&quot;linear&quot;===this.type?n=[&quot;&lt;linearGradient &quot;,f,&#39; x1=&quot;&#39;,o.x1,&#39;&quot; y1=&quot;&#39;,o.y1,&#39;&quot; x2=&quot;&#39;,o.x2,&#39;&quot; y2=&quot;&#39;,o.y2,&#39;&quot;&gt;\n&#39;]:&quot;radial&quot;===this.type&amp;&amp;(n=[&quot;&lt;radialGradient &quot;,f,&#39; cx=&quot;&#39;,o.x2,&#39;&quot; cy=&quot;&#39;,o.y2,&#39;&quot; r=&quot;&#39;,o.r2,&#39;&quot; fx=&quot;&#39;,o.x1,&#39;&quot; fy=&quot;&#39;,o.y1,&#39;&quot;&gt;\n&#39;]);for(var i=0;i&lt;this.colorStops.length;i++)n.push(&quot;&lt;stop &quot;,&#39;offset=&quot;&#39;,100*this.colorStops[i].offset+&quot;%&quot;,&#39;&quot; style=&quot;stop-color:&#39;,this.colorStops[i].color,null!=this.colorStops[i].opacity?&quot;;stop-opacity: &quot;+this.colorStops[i].opacity:&quot;;&quot;,&#39;&quot;/&gt;\n&#39;);return n.push(&quot;linear&quot;===this.type?&quot;&lt;/linearGradient&gt;\n&quot;:&quot;&lt;/radialGradient&gt;\n&quot;),n.join(&quot;&quot;)},toLive:function(e){var n;if(this.type){&quot;linear&quot;===this.type?n=e.createLinearGradient(this.coords.x1,this.coords.y1,this.coords.x2,this.coords.y2):&quot;radial&quot;===this.type&amp;&amp;(n=e.createRadialGradient(this.coords.x1,this.coords.y1,this.coords.r1,this.coords.x2,this.coords.y2,this.coords.r2));for(var f=0,o=this.colorStops.length;o&gt;f;f++){var d=this.colorStops[f].color,i=this.colorStops[f].opacity,t=this.colorStops[f].offset;&quot;undefined&quot;!=typeof i&amp;&amp;(d=new fabric.Color(d).setAlpha(i).toRgba()),n.addColorStop(parseFloat(t),d)}return n}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(d,i){var t,l=d.getElementsByTagName(&quot;stop&quot;),s=&quot;linearGradient&quot;===d.nodeName?&quot;linear&quot;:&quot;radial&quot;,u=d.getAttribute(&quot;gradientUnits&quot;)||&quot;objectBoundingBox&quot;,a=d.getAttribute(&quot;gradientTransform&quot;),p=[],c={};&quot;linear&quot;===s?c=n(d):&quot;radial&quot;===s&amp;&amp;(c=f(d));for(var y=l.length;y--;)p.push(e(l[y]));t=o(i,c,u);var m=new fabric.Gradient({type:s,coords:c,colorStops:p,offsetX:-i.left,offsetY:-i.top});return(a||&quot;&quot;!==t)&amp;&amp;(m.gradientTransform=fabric.parseTransformAttribute((a||&quot;&quot;)+t)),m},forObject:function(e,n){return n||(n={}),o(e,n.coords,&quot;userSpaceOnUse&quot;),new fabric.Gradient(n)}})}(),fabric.Pattern=fabric.util.createClass({repeat:&quot;repeat&quot;,offsetX:0,offsetY:0,initialize:function(e){if(e||(e={}),this.id=fabric.Object.__uid++,e.source)if(&quot;string&quot;==typeof e.source)if(&quot;undefined&quot;!=typeof fabric.util.getFunctionBody(e.source))this.source=new Function(fabric.util.getFunctionBody(e.source));else{var n=this;this.source=fabric.util.createImage(),fabric.util.loadImage(e.source,function(e){n.source=e})}else this.source=e.source;e.repeat&amp;&amp;(this.repeat=e.repeat),e.offsetX&amp;&amp;(this.offsetX=e.offsetX),e.offsetY&amp;&amp;(this.offsetY=e.offsetY)},toObject:function(){var e;return&quot;function&quot;==typeof this.source?e=String(this.source):&quot;string&quot;==typeof this.source.src&amp;&amp;(e=this.source.src),{source:e,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(e){var n=&quot;function&quot;==typeof this.source?this.source():this.source,f=n.width/e.getWidth(),o=n.height/e.getHeight(),d=&quot;&quot;;return n.src?d=n.src:n.toDataURL&amp;&amp;(d=n.toDataURL()),&#39;&lt;pattern id=&quot;SVGID_&#39;+this.id+&#39;&quot; x=&quot;&#39;+this.offsetX+&#39;&quot; y=&quot;&#39;+this.offsetY+&#39;&quot; width=&quot;&#39;+f+&#39;&quot; height=&quot;&#39;+o+&#39;&quot;&gt;&lt;image x=&quot;0&quot; y=&quot;0&quot; width=&quot;&#39;+n.width+&#39;&quot; height=&quot;&#39;+n.height+&#39;&quot; xlink:href=&quot;&#39;+d+&#39;&quot;&gt;&lt;/image&gt;&lt;/pattern&gt;&#39;},toLive:function(e){var n=&quot;function&quot;==typeof this.source?this.source():this.source;if(!n)return&quot;&quot;;if(&quot;undefined&quot;!=typeof n.src){if(!n.complete)return&quot;&quot;;if(0===n.naturalWidth||0===n.naturalHeight)return&quot;&quot;}return e.createPattern(n,this.repeat)}}),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={});return n.Shadow?void n.warn(&quot;fabric.Shadow is already defined.&quot;):(n.Shadow=n.util.createClass({color:&quot;rgb(0,0,0)&quot;,blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(e){&quot;string&quot;==typeof e&amp;&amp;(e=this._parseShadow(e));for(var f in e)this[f]=e[f];this.id=n.Object.__uid++},_parseShadow:function(e){var f=e.trim(),o=n.Shadow.reOffsetsAndBlur.exec(f)||[],d=f.replace(n.Shadow.reOffsetsAndBlur,&quot;&quot;)||&quot;rgb(0,0,0)&quot;;return{color:d.trim(),offsetX:parseInt(o[1],10)||0,offsetY:parseInt(o[2],10)||0,blur:parseInt(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join(&quot;px &quot;)},toSVG:function(e){var n=&quot;SourceAlpha&quot;;return!e||e.fill!==this.color&amp;&amp;e.stroke!==this.color||(n=&quot;SourceGraphic&quot;),&#39;&lt;filter id=&quot;SVGID_&#39;+this.id+&#39;&quot; y=&quot;-40%&quot; height=&quot;180%&quot;&gt;&lt;feGaussianBlur in=&quot;&#39;+n+&#39;&quot; stdDeviation=&quot;&#39;+(this.blur?this.blur/3:0)+&#39;&quot;&gt;&lt;/feGaussianBlur&gt;&lt;feOffset dx=&quot;&#39;+this.offsetX+&#39;&quot; dy=&quot;&#39;+this.offsetY+&#39;&quot;&gt;&lt;/feOffset&gt;&lt;feMerge&gt;&lt;feMergeNode&gt;&lt;/feMergeNode&gt;&lt;feMergeNode in=&quot;SourceGraphic&quot;&gt;&lt;/feMergeNode&gt;&lt;/feMerge&gt;&lt;/filter&gt;&#39;},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var e={},f=n.Shadow.prototype;return this.color!==f.color&amp;&amp;(e.color=this.color),this.blur!==f.blur&amp;&amp;(e.blur=this.blur),this.offsetX!==f.offsetX&amp;&amp;(e.offsetX=this.offsetX),this.offsetY!==f.offsetY&amp;&amp;(e.offsetY=this.offsetY),e}}),void(n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}(&quot;undefined&quot;!=typeof exports?exports:this),function(){&quot;use strict&quot;;if(fabric.StaticCanvas)return void fabric.warn(&quot;fabric.StaticCanvas is already defined.&quot;);var e=fabric.util.object.extend,n=fabric.util.getElementOffset,f=fabric.util.removeFromArray,o=new Error(&quot;Could not initialize `canvas` element&quot;);fabric.StaticCanvas=fabric.util.createClass({initialize:function(e,n){n||(n={}),this._initStatic(e,n),fabric.StaticCanvas.activeInstance=this},backgroundColor:&quot;&quot;,backgroundImage:null,overlayColor:&quot;&quot;,overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(e,n){this._objects=[],this._createLowerCanvas(e),this._initOptions(n),this._setImageSmoothing(),n.overlayImage&amp;&amp;this.setOverlayImage(n.overlayImage,this.renderAll.bind(this)),n.backgroundImage&amp;&amp;this.setBackgroundImage(n.backgroundImage,this.renderAll.bind(this)),n.backgroundColor&amp;&amp;this.setBackgroundColor(n.backgroundColor,this.renderAll.bind(this)),n.overlayColor&amp;&amp;this.setOverlayColor(n.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(e,n,f){return this.__setBgOverlayImage(&quot;overlayImage&quot;,e,n,f)},setBackgroundImage:function(e,n,f){return this.__setBgOverlayImage(&quot;backgroundImage&quot;,e,n,f)},setOverlayColor:function(e,n){return this.__setBgOverlayColor(&quot;overlayColor&quot;,e,n)},setBackgroundColor:function(e,n){return this.__setBgOverlayColor(&quot;backgroundColor&quot;,e,n)},_setImageSmoothing:function(){var e=this.getContext();e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,e.mozImageSmoothingEnabled=this.imageSmoothingEnabled,e.msImageSmoothingEnabled=this.imageSmoothingEnabled,e.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(e,n,f,o){return&quot;string&quot;==typeof n?fabric.util.loadImage(n,function(n){this[e]=new fabric.Image(n,o),f&amp;&amp;f()},this):(this[e]=n,f&amp;&amp;f()),this},__setBgOverlayColor:function(e,n,f){if(n&amp;&amp;n.source){var o=this;fabric.util.loadImage(n.source,function(d){o[e]=new fabric.Pattern({source:d,repeat:n.repeat,offsetX:n.offsetX,offsetY:n.offsetY}),f&amp;&amp;f()})}else this[e]=n,f&amp;&amp;f();return this},_createCanvasElement:function(){var e=fabric.document.createElement(&quot;canvas&quot;);if(e.style||(e.style={}),!e)throw o;return this._initCanvasElement(e),e},_initCanvasElement:function(e){if(fabric.util.createCanvasElement(e),&quot;undefined&quot;==typeof e.getContext)throw o},_initOptions:function(e){for(var n in e)this[n]=e[n];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&amp;&amp;(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+&quot;px&quot;,this.lowerCanvasEl.style.height=this.height+&quot;px&quot;,this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){this.lowerCanvasEl=fabric.util.getById(e)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,&quot;lower-canvas&quot;),this.interactive&amp;&amp;this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext(&quot;2d&quot;)},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,n){return this.setDimensions({width:e},n)},setHeight:function(e,n){return this.setDimensions({height:e},n)},setDimensions:function(e,n){var f;n=n||{};for(var o in e)f=e[o],n.cssOnly||(this._setBackstoreDimension(o,e[o]),f+=&quot;px&quot;),n.backstoreOnly||this._setCssDimension(o,f);return n.cssOnly||this.renderAll(),this.calcOffset(),this},_setBackstoreDimension:function(e,n){return this.lowerCanvasEl[e]=n,this.upperCanvasEl&amp;&amp;(this.upperCanvasEl[e]=n),this.cacheCanvasEl&amp;&amp;(this.cacheCanvasEl[e]=n),this[e]=n,this},_setCssDimension:function(e,n){return this.lowerCanvasEl.style[e]=n,this.upperCanvasEl&amp;&amp;(this.upperCanvasEl.style[e]=n),this.wrapperEl&amp;&amp;(this.wrapperEl.style[e]=n),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(e){this.viewportTransform=e,this.renderAll();for(var n=0,f=this._objects.length;f&gt;n;n++)this._objects[n].setCoords();return this},zoomToPoint:function(e,n){var f=e;e=fabric.util.transformPoint(e,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=n,this.viewportTransform[3]=n;var o=fabric.util.transformPoint(e,this.viewportTransform);this.viewportTransform[4]+=f.x-o.x,this.viewportTransform[5]+=f.y-o.y,this.renderAll();for(var d=0,i=this._objects.length;i&gt;d;d++)this._objects[d].setCoords();return this},setZoom:function(e){return this.zoomToPoint(new fabric.Point(0,0),e),this},absolutePan:function(e){this.viewportTransform[4]=-e.x,this.viewportTransform[5]=-e.y,this.renderAll();for(var n=0,f=this._objects.length;f&gt;n;n++)this._objects[n].setCoords();return this},relativePan:function(e){return this.absolutePan(new fabric.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(e,n){if(n){e.save();var f=this.viewportTransform;e.transform(f[0],f[1],f[2],f[3],f[4],f[5]),n.render(e),e.restore(),this.controlsAboveOverlay||n._renderControls(e)}},_onObjectAdded:function(e){this.stateful&amp;&amp;e.setupState(),e.canvas=this,e.setCoords(),this.fire(&quot;object:added&quot;,{target:e}),e.fire(&quot;added&quot;)},_onObjectRemoved:function(e){this.getActiveObject()===e&amp;&amp;(this.fire(&quot;before:selection:cleared&quot;,{target:e}),this._discardActiveObject(),this.fire(&quot;selection:cleared&quot;)),this.fire(&quot;object:removed&quot;,{target:e}),e.fire(&quot;removed&quot;)},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&amp;&amp;this.discardActiveGroup(),this.discardActiveObject&amp;&amp;this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&amp;&amp;this.clearContext(this.contextTop),this.fire(&quot;canvas:cleared&quot;),this.renderAll(),this},renderAll:function(e){var n=this[e===!0&amp;&amp;this.interactive?&quot;contextTop&quot;:&quot;contextContainer&quot;],f=this.getActiveGroup();return this.contextTop&amp;&amp;this.selection&amp;&amp;!this._groupSelector&amp;&amp;this.clearContext(this.contextTop),e||this.clearContext(n),this.fire(&quot;before:render&quot;),this.clipTo&amp;&amp;fabric.util.clipContext(this,n),this._renderBackground(n),this._renderObjects(n,f),this._renderActiveGroup(n,f),this.clipTo&amp;&amp;n.restore(),this._renderOverlay(n),this.controlsAboveOverlay&amp;&amp;this.interactive&amp;&amp;this.drawControls(n),this.fire(&quot;after:render&quot;),this},_renderObjects:function(e,n){var f,o;if(n)for(f=0,o=this._objects.length;o&gt;f;++f)this._objects[f]&amp;&amp;!n.contains(this._objects[f])&amp;&amp;this._draw(e,this._objects[f]);else for(f=0,o=this._objects.length;o&gt;f;++f)this._draw(e,this._objects[f])},_renderActiveGroup:function(e,n){if(n){var f=[];this.forEachObject(function(e){n.contains(e)&amp;&amp;f.push(e)}),n._set(&quot;objects&quot;,f),this._draw(e,n)}},_renderBackground:function(e){this.backgroundColor&amp;&amp;(e.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(e):this.backgroundColor,e.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),this.backgroundImage&amp;&amp;this._draw(e,this.backgroundImage)},_renderOverlay:function(e){this.overlayColor&amp;&amp;(e.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(e):this.overlayColor,e.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height)),this.overlayImage&amp;&amp;this._draw(e,this.overlayImage)},renderTop:function(){var e=this.contextTop||this.contextContainer;this.clearContext(e),this.selection&amp;&amp;this._groupSelector&amp;&amp;this._drawSelection();var n=this.getActiveGroup();return n&amp;&amp;n.render(e),this._renderOverlay(e),this.fire(&quot;after:render&quot;),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(e){return this._centerObject(e,new fabric.Point(this.getCenter().left,e.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(e){return this._centerObject(e,new fabric.Point(e.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(e){var n=this.getCenter();return this._centerObject(e,new fabric.Point(n.left,n.top)),this.renderAll(),this},_centerObject:function(e,n){return e.setPositionByOrigin(n,&quot;center&quot;,&quot;center&quot;),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod(&quot;toObject&quot;,e)},toDatalessObject:function(e){return this._toObjectMethod(&quot;toDatalessObject&quot;,e)},_toObjectMethod:function(n,f){var o=this.getActiveGroup();o&amp;&amp;this.discardActiveGroup();var d={objects:this._toObjects(n,f)};return e(d,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,d,f),o&amp;&amp;(this.setActiveGroup(new fabric.Group(o.getObjects(),{originX:&quot;center&quot;,originY:&quot;center&quot;})),o.forEachObject(function(e){e.set(&quot;active&quot;,!0)}),this._currentTransform&amp;&amp;(this._currentTransform.target=this.getActiveGroup())),d},_toObjects:function(e,n){return this.getObjects().map(function(f){return this._toObject(f,e,n)},this)},_toObject:function(e,n,f){var o;this.includeDefaultValues||(o=e.includeDefaultValues,e.includeDefaultValues=!1);var d=e[n](f);return this.includeDefaultValues||(e.includeDefaultValues=o),d},__serializeBgOverlay:function(){var e={background:this.backgroundColor&amp;&amp;this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&amp;&amp;(e.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&amp;&amp;(e.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&amp;&amp;(e.overlayImage=this.overlayImage.toObject()),e},svgViewportTransformation:!0,toSVG:function(e,n){e||(e={});var f=[];return this._setSVGPreamble(f,e),this._setSVGHeader(f,e),this._setSVGBgOverlayColor(f,&quot;backgroundColor&quot;),this._setSVGBgOverlayImage(f,&quot;backgroundImage&quot;),this._setSVGObjects(f,n),this._setSVGBgOverlayColor(f,&quot;overlayColor&quot;),this._setSVGBgOverlayImage(f,&quot;overlayImage&quot;),f.push(&quot;&lt;/svg&gt;&quot;),f.join(&quot;&quot;)},_setSVGPreamble:function(e,n){n.suppressPreamble||e.push(&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;&#39;,n.encoding||&quot;UTF-8&quot;,&#39;&quot; standalone=&quot;no&quot; ?&gt;&#39;,&#39;&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &#39;,&#39;&quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;\n&#39;)},_setSVGHeader:function(e,n){var f,o,d;n.viewBox?(f=n.viewBox.width,o=n.viewBox.height):(f=this.width,o=this.height,this.svgViewportTransformation||(d=this.viewportTransform,f/=d[0],o/=d[3])),e.push(&quot;&lt;svg &quot;,&#39;xmlns=&quot;http://www.w3.org/2000/svg&quot; &#39;,&#39;xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; &#39;,&#39;version=&quot;1.1&quot; &#39;,&#39;width=&quot;&#39;,f,&#39;&quot; &#39;,&#39;height=&quot;&#39;,o,&#39;&quot; &#39;,this.backgroundColor&amp;&amp;!this.backgroundColor.toLive?&#39;style=&quot;background-color: &#39;+this.backgroundColor+&#39;&quot; &#39;:null,n.viewBox?&#39;viewBox=&quot;&#39;+n.viewBox.x+&quot; &quot;+n.viewBox.y+&quot; &quot;+n.viewBox.width+&quot; &quot;+n.viewBox.height+&#39;&quot; &#39;:null,&#39;xml:space=&quot;preserve&quot;&gt;&#39;,&quot;&lt;desc&gt;Created with Fabric.js &quot;,fabric.version,&quot;&lt;/desc&gt;&quot;,&quot;&lt;defs&gt;&quot;,fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),&quot;&lt;/defs&gt;&quot;)},_setSVGObjects:function(e,n){var f=this.getActiveGroup();f&amp;&amp;this.discardActiveGroup();for(var o=0,d=this.getObjects(),i=d.length;i&gt;o;o++)e.push(d[o].toSVG(n));f&amp;&amp;(this.setActiveGroup(new fabric.Group(f.getObjects())),f.forEachObject(function(e){e.set(&quot;active&quot;,!0)}))},_setSVGBgOverlayImage:function(e,n){this[n]&amp;&amp;this[n].toSVG&amp;&amp;e.push(this[n].toSVG())},_setSVGBgOverlayColor:function(e,n){this[n]&amp;&amp;this[n].source?e.push(&#39;&lt;rect x=&quot;&#39;,this[n].offsetX,&#39;&quot; y=&quot;&#39;,this[n].offsetY,&#39;&quot; &#39;,&#39;width=&quot;&#39;,&quot;repeat-y&quot;===this[n].repeat||&quot;no-repeat&quot;===this[n].repeat?this[n].source.width:this.width,&#39;&quot; height=&quot;&#39;,&quot;repeat-x&quot;===this[n].repeat||&quot;no-repeat&quot;===this[n].repeat?this[n].source.height:this.height,&#39;&quot; fill=&quot;url(#&#39;+n+&#39;Pattern)&quot;&#39;,&quot;&gt;&lt;/rect&gt;&quot;):this[n]&amp;&amp;&quot;overlayColor&quot;===n&amp;&amp;e.push(&#39;&lt;rect x=&quot;0&quot; y=&quot;0&quot; &#39;,&#39;width=&quot;&#39;,this.width,&#39;&quot; height=&quot;&#39;,this.height,&#39;&quot; fill=&quot;&#39;,this[n],&#39;&quot;&#39;,&quot;&gt;&lt;/rect&gt;&quot;)},sendToBack:function(e){return f(this._objects,e),this._objects.unshift(e),this.renderAll&amp;&amp;this.renderAll()},bringToFront:function(e){return f(this._objects,e),this._objects.push(e),this.renderAll&amp;&amp;this.renderAll()},sendBackwards:function(e,n){var o=this._objects.indexOf(e);if(0!==o){var d=this._findNewLowerIndex(e,o,n);f(this._objects,e),this._objects.splice(d,0,e),this.renderAll&amp;&amp;this.renderAll()}return this},_findNewLowerIndex:function(e,n,f){var o;if(f){o=n;for(var d=n-1;d&gt;=0;--d){var i=e.intersectsWithObject(this._objects[d])||e.isContainedWithinObject(this._objects[d])||this._objects[d].isContainedWithinObject(e);if(i){o=d;break}}}else o=n-1;return o},bringForward:function(e,n){var o=this._objects.indexOf(e);if(o!==this._objects.length-1){var d=this._findNewUpperIndex(e,o,n);f(this._objects,e),this._objects.splice(d,0,e),this.renderAll&amp;&amp;this.renderAll()}return this},_findNewUpperIndex:function(e,n,f){var o;if(f){o=n;for(var d=n+1;d&lt;this._objects.length;++d){var i=e.intersectsWithObject(this._objects[d])||e.isContainedWithinObject(this._objects[d])||this._objects[d].isContainedWithinObject(e);if(i){o=d;</td>
      </tr>
      <tr>
        <td id="L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="LC10" class="blob-code js-file-line">break}}}else o=n+1;return o},moveTo:function(e,n){return f(this._objects,e),this._objects.splice(n,0,e),this.renderAll&amp;&amp;this.renderAll()},dispose:function(){return this.clear(),this.interactive&amp;&amp;this.removeListeners(),this},toString:function(){return&quot;#&lt;fabric.Canvas (&quot;+this.complexity()+&quot;): { objects: &quot;+this.getObjects().length+&quot; }&gt;&quot;}}),e(fabric.StaticCanvas.prototype,fabric.Observable),e(fabric.StaticCanvas.prototype,fabric.Collection),e(fabric.StaticCanvas.prototype,fabric.DataURLExporter),e(fabric.StaticCanvas,{EMPTY_JSON:&#39;{&quot;objects&quot;: [], &quot;background&quot;: &quot;white&quot;}&#39;,supports:function(e){var n=fabric.util.createCanvasElement();if(!n||!n.getContext)return null;var f=n.getContext(&quot;2d&quot;);if(!f)return null;switch(e){case&quot;getImageData&quot;:return&quot;undefined&quot;!=typeof f.getImageData;case&quot;setLineDash&quot;:return&quot;undefined&quot;!=typeof f.setLineDash;case&quot;toDataURL&quot;:return&quot;undefined&quot;!=typeof n.toDataURL;case&quot;toDataURLWithQuality&quot;:try{return n.toDataURL(&quot;image/jpeg&quot;,0),!0}catch(o){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:&quot;rgb(0, 0, 0)&quot;,width:1,shadow:null,strokeLineCap:&quot;round&quot;,strokeLineJoin:&quot;round&quot;,setShadow:function(e){return this.shadow=new fabric.Shadow(e),this},_setBrushStyles:function(){var e=this.canvas.contextTop;e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.lineJoin=this.strokeLineJoin},_setShadow:function(){if(this.shadow){var e=this.canvas.contextTop;e.shadowColor=this.shadow.color,e.shadowBlur=this.shadow.blur,e.shadowOffsetX=this.shadow.offsetX,e.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor=&quot;&quot;,e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}}),function(){var e=fabric.util.array.min,n=fabric.util.array.max;fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(e){this.canvas=e,this._points=[]},onMouseDown:function(e){this._prepareForDrawing(e),this._captureDrawingPath(e),this._render()},onMouseMove:function(e){this._captureDrawingPath(e),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(e){var n=new fabric.Point(e.x,e.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(e){this._points.push(e)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(e){var n=new fabric.Point(e.x,e.y);this._addPoint(n)},_render:function(){var e=this.canvas.contextTop,n=this.canvas.viewportTransform,f=this._points[0],o=this._points[1];e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.beginPath(),2===this._points.length&amp;&amp;f.x===o.x&amp;&amp;f.y===o.y&amp;&amp;(f.x-=.5,o.x+=.5),e.moveTo(f.x,f.y);for(var d=1,i=this._points.length;i&gt;d;d++){var t=f.midPointFrom(o);e.quadraticCurveTo(f.x,f.y,t.x,t.y),f=this._points[d],o=this._points[d+1]}e.lineTo(f.x,f.y),e.stroke(),e.restore()},_getSVGPathData:function(){return this.box=this.getPathBoundingBox(this._points),this.convertPointsToSVGPath(this._points,this.box.minX,this.box.minY)},getPathBoundingBox:function(f){for(var o=[],d=[],i=f[0],t=f[1],l=i,s=1,u=f.length;u&gt;s;s++){var a=i.midPointFrom(t);o.push(l.x),o.push(a.x),d.push(l.y),d.push(a.y),i=f[s],t=f[s+1],l=a}return o.push(i.x),d.push(i.y),{minX:e(o),minY:e(d),maxX:n(o),maxY:n(d)}},convertPointsToSVGPath:function(e,n,f){var o=[],d=new fabric.Point(e[0].x-n,e[0].y-f),i=new fabric.Point(e[1].x-n,e[1].y-f);o.push(&quot;M &quot;,e[0].x-n,&quot; &quot;,e[0].y-f,&quot; &quot;);for(var t=1,l=e.length;l&gt;t;t++){var s=d.midPointFrom(i);o.push(&quot;Q &quot;,d.x,&quot; &quot;,d.y,&quot; &quot;,s.x,&quot; &quot;,s.y,&quot; &quot;),d=new fabric.Point(e[t].x-n,e[t].y-f),t+1&lt;e.length&amp;&amp;(i=new fabric.Point(e[t+1].x-n,e[t+1].y-f))}return o.push(&quot;L &quot;,d.x,&quot; &quot;,d.y,&quot; &quot;),o},createPath:function(e){var n=new fabric.Path(e);return n.fill=null,n.stroke=this.color,n.strokeWidth=this.width,n.strokeLineCap=this.strokeLineCap,n.strokeLineJoin=this.strokeLineJoin,this.shadow&amp;&amp;(this.shadow.affectStroke=!0,n.setShadow(this.shadow)),n},_finalizeAndAddPath:function(){var e=this.canvas.contextTop;e.closePath();var n=this._getSVGPathData().join(&quot;&quot;);if(&quot;M 0 0 Q 0 0 0 0 L 0 0&quot;===n)return void this.canvas.renderAll();var f=this.box.minX+(this.box.maxX-this.box.minX)/2,o=this.box.minY+(this.box.maxY-this.box.minY)/2;this.canvas.contextTop.arc(f,o,3,0,2*Math.PI,!1);var d=this.createPath(n);d.set({left:f,top:o,originX:&quot;center&quot;,originY:&quot;center&quot;}),this.canvas.add(d),d.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire(&quot;path:created&quot;,{path:d})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var n=this.addPoint(e),f=this.canvas.contextTop,o=this.canvas.viewportTransform;f.save(),f.transform(o[0],o[1],o[2],o[3],o[4],o[5]),f.fillStyle=n.fill,f.beginPath(),f.arc(n.x,n.y,n.radius,0,2*Math.PI,!1),f.closePath(),f.fill(),f.restore()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},onMouseMove:function(e){this.drawDot(e)},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],f=0,o=this.points.length;o&gt;f;f++){var d=this.points[f],i=new fabric.Circle({radius:d.radius,left:d.x,top:d.y,originX:&quot;center&quot;,originY:&quot;center&quot;,fill:d.fill});this.shadow&amp;&amp;i.setShadow(this.shadow),n.push(i)}var t=new fabric.Group(n,{originX:&quot;center&quot;,originY:&quot;center&quot;});t.canvas=this.canvas,this.canvas.add(t),this.canvas.fire(&quot;path:created&quot;,{path:t}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.renderAll()},addPoint:function(e){var n=new fabric.Point(e.x,e.y),f=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,o=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return n.radius=f,n.fill=o,this.points.push(n),n}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render()},onMouseMove:function(e){this.addSprayChunk(e),this.render()},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],f=0,o=this.sprayChunks.length;o&gt;f;f++)for(var d=this.sprayChunks[f],i=0,t=d.length;t&gt;i;i++){var l=new fabric.Rect({width:d[i].width,height:d[i].width,left:d[i].x+1,top:d[i].y+1,originX:&quot;center&quot;,originY:&quot;center&quot;,fill:this.color});this.shadow&amp;&amp;l.setShadow(this.shadow),n.push(l)}this.optimizeOverlapping&amp;&amp;(n=this._getOptimizedRects(n));var s=new fabric.Group(n,{originX:&quot;center&quot;,originY:&quot;center&quot;});s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire(&quot;path:created&quot;,{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.renderAll()},_getOptimizedRects:function(e){for(var n,f={},o=0,d=e.length;d&gt;o;o++)n=e[o].left+&quot;&quot;+e[o].top,f[n]||(f[n]=e[o]);var i=[];for(n in f)i.push(f[n]);return i},render:function(){var e=this.canvas.contextTop;e.fillStyle=this.color;var n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]);for(var f=0,o=this.sprayChunkPoints.length;o&gt;f;f++){var d=this.sprayChunkPoints[f];&quot;undefined&quot;!=typeof d.opacity&amp;&amp;(e.globalAlpha=d.opacity),e.fillRect(d.x,d.y,d.width,d.width)}e.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];for(var n,f,o,d=this.width/2,i=0;i&lt;this.density;i++){n=fabric.util.getRandomInt(e.x-d,e.x+d),f=fabric.util.getRandomInt(e.y-d,e.y+d),o=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var t=new fabric.Point(n,f);t.width=o,this.randomOpacity&amp;&amp;(t.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(t)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var e=20,n=5,f=fabric.document.createElement(&quot;canvas&quot;),o=f.getContext(&quot;2d&quot;);return f.width=f.height=e+n,o.fillStyle=this.color,o.beginPath(),o.arc(e/2,e/2,e/2,0,2*Math.PI,!1),o.closePath(),o.fill(),f},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace(&quot;this.color&quot;,&#39;&quot;&#39;+this.color+&#39;&quot;&#39;)},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),&quot;repeat&quot;)},_setBrushStyles:function(){this.callSuper(&quot;_setBrushStyles&quot;),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(e){var n=this.callSuper(&quot;createPath&quot;,e);return n.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),n}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var n=e.format||&quot;png&quot;,f=e.quality||1,o=e.multiplier||1,d={left:e.left,top:e.top,width:e.width,height:e.height};return 1!==o?this.__toDataURLWithMultiplier(n,f,d,o):this.__toDataURL(n,f,d)},__toDataURL:function(e,n,f){this.renderAll(!0);var o=this.upperCanvasEl||this.lowerCanvasEl,d=this.__getCroppedCanvas(o,f);&quot;jpg&quot;===e&amp;&amp;(e=&quot;jpeg&quot;);var i=fabric.StaticCanvas.supports(&quot;toDataURLWithQuality&quot;)?(d||o).toDataURL(&quot;image/&quot;+e,n):(d||o).toDataURL(&quot;image/&quot;+e);return this.contextTop&amp;&amp;this.clearContext(this.contextTop),this.renderAll(),d&amp;&amp;(d=null),i},__getCroppedCanvas:function(e,n){var f,o,d=&quot;left&quot;in n||&quot;top&quot;in n||&quot;width&quot;in n||&quot;height&quot;in n;return d&amp;&amp;(f=fabric.util.createCanvasElement(),o=f.getContext(&quot;2d&quot;),f.width=n.width||this.width,f.height=n.height||this.height,o.drawImage(e,-n.left||0,-n.top||0)),f},__toDataURLWithMultiplier:function(e,n,f,o){var d=this.getWidth(),i=this.getHeight(),t=d*o,l=i*o,s=this.getActiveObject(),u=this.getActiveGroup(),a=this.contextTop||this.contextContainer;o&gt;1&amp;&amp;this.setWidth(t).setHeight(l),a.scale(o,o),f.left&amp;&amp;(f.left*=o),f.top&amp;&amp;(f.top*=o),f.width?f.width*=o:1&gt;o&amp;&amp;(f.width=t),f.height?f.height*=o:1&gt;o&amp;&amp;(f.height=l),u?this._tempRemoveBordersControlsFromGroup(u):s&amp;&amp;this.deactivateAll&amp;&amp;this.deactivateAll(),this.renderAll(!0);var p=this.__toDataURL(e,n,f);return this.width=d,this.height=i,a.scale(1/o,1/o),this.setWidth(d).setHeight(i),u?this._restoreBordersControlsOnGroup(u):s&amp;&amp;this.setActiveObject&amp;&amp;this.setActiveObject(s),this.contextTop&amp;&amp;this.clearContext(this.contextTop),this.renderAll(),p},toDataURLWithMultiplier:function(e,n,f){return this.toDataURL({format:e,multiplier:n,quality:f})},_tempRemoveBordersControlsFromGroup:function(e){e.origHasControls=e.hasControls,e.origBorderColor=e.borderColor,e.hasControls=!0,e.borderColor=&quot;rgba(0,0,0,0)&quot;,e.forEachObject(function(e){e.origBorderColor=e.borderColor,e.borderColor=&quot;rgba(0,0,0,0)&quot;})},_restoreBordersControlsOnGroup:function(e){e.hideControls=e.origHideControls,e.borderColor=e.origBorderColor,e.forEachObject(function(e){e.borderColor=e.origBorderColor,delete e.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(e,n,f){return this.loadFromJSON(e,n,f)},loadFromJSON:function(e,n,f){if(e){var o=&quot;string&quot;==typeof e?JSON.parse(e):e;this.clear();var d=this;return this._enlivenObjects(o.objects,function(){d._setBgOverlay(o,n)},f),this}},_setBgOverlay:function(e,n){var f=this,o={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(e.backgroundImage||e.overlayImage||e.background||e.overlay))return void(n&amp;&amp;n());var d=function(){o.backgroundImage&amp;&amp;o.overlayImage&amp;&amp;o.backgroundColor&amp;&amp;o.overlayColor&amp;&amp;(f.renderAll(),n&amp;&amp;n())};this.__setBgOverlay(&quot;backgroundImage&quot;,e.backgroundImage,o,d),this.__setBgOverlay(&quot;overlayImage&quot;,e.overlayImage,o,d),this.__setBgOverlay(&quot;backgroundColor&quot;,e.background,o,d),this.__setBgOverlay(&quot;overlayColor&quot;,e.overlay,o,d),d()},__setBgOverlay:function(e,n,f,o){var d=this;return n?void(&quot;backgroundImage&quot;===e||&quot;overlayImage&quot;===e?fabric.Image.fromObject(n,function(n){d[e]=n,f[e]=!0,o&amp;&amp;o()}):this[&quot;set&quot;+fabric.util.string.capitalize(e,!0)](n,function(){f[e]=!0,o&amp;&amp;o()})):void(f[e]=!0)},_enlivenObjects:function(e,n,f){var o=this;if(!e||0===e.length)return void(n&amp;&amp;n());var d=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(e,function(e){e.forEach(function(e,n){o.insertAt(e,n,!0)}),o.renderOnAddRemove=d,n&amp;&amp;n()},null,f)},_toDataURL:function(e,n){this.clone(function(f){n(f.toDataURL(e))})},_toDataURLWithMultiplier:function(e,n,f){this.clone(function(o){f(o.toDataURLWithMultiplier(e,n))})},clone:function(e,n){var f=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(n){n.loadFromJSON(f,function(){e&amp;&amp;e(n)})})},cloneWithoutData:function(e){var n=fabric.document.createElement(&quot;canvas&quot;);n.width=this.getWidth(),n.height=this.getHeight();var f=new fabric.Canvas(n);f.clipTo=this.clipTo,this.backgroundImage?(f.setBackgroundImage(this.backgroundImage.src,function(){f.renderAll(),e&amp;&amp;e(f)}),f.backgroundImageOpacity=this.backgroundImageOpacity,f.backgroundImageStretch=this.backgroundImageStretch):e&amp;&amp;e(f)}}),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend,o=n.util.toFixed,d=n.util.string.capitalize,i=n.util.degreesToRadians,t=n.StaticCanvas.supports(&quot;setLineDash&quot;);n.Object||(n.Object=n.util.createClass({type:&quot;object&quot;,originX:&quot;left&quot;,originY:&quot;top&quot;,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:&quot;rgba(102,153,255,0.75)&quot;,cornerColor:&quot;rgba(102,153,255,0.5)&quot;,centeredScaling:!1,centeredRotation:!0,fill:&quot;rgb(0,0,0)&quot;,fillRule:&quot;source-over&quot;,backgroundColor:&quot;&quot;,stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:&quot;butt&quot;,strokeLineJoin:&quot;miter&quot;,strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:&quot;top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule shadow clipTo visible backgroundColor&quot;.split(&quot; &quot;),initialize:function(e){e&amp;&amp;this.setOptions(e)},_initGradient:function(e){!e.fill||!e.fill.colorStops||e.fill instanceof n.Gradient||this.set(&quot;fill&quot;,new n.Gradient(e.fill))},_initPattern:function(e){!e.fill||!e.fill.source||e.fill instanceof n.Pattern||this.set(&quot;fill&quot;,new n.Pattern(e.fill)),!e.stroke||!e.stroke.source||e.stroke instanceof n.Pattern||this.set(&quot;stroke&quot;,new n.Pattern(e.stroke))},_initClipping:function(e){if(e.clipTo&amp;&amp;&quot;string&quot;==typeof e.clipTo){var f=n.util.getFunctionBody(e.clipTo);&quot;undefined&quot;!=typeof f&amp;&amp;(this.clipTo=new Function(&quot;ctx&quot;,f))}},setOptions:function(e){for(var n in e)this.set(n,e[n]);this._initGradient(e),this._initPattern(e),this._initClipping(e)},transform:function(e,n){this.group&amp;&amp;this.group.transform(e,n),e.globalAlpha=this.opacity;var f=n?this._getLeftTopCoords():this.getCenterPoint();e.translate(f.x,f.y),e.rotate(i(this.angle)),e.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(e){var f=n.Object.NUM_FRACTION_DIGITS,d={type:this.type,originX:this.originX,originY:this.originY,left:o(this.left,f),top:o(this.top,f),width:o(this.width,f),height:o(this.height,f),fill:this.fill&amp;&amp;this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&amp;&amp;this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,f),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:o(this.strokeMiterLimit,f),scaleX:o(this.scaleX,f),scaleY:o(this.scaleY,f),angle:o(this.getAngle(),f),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,f),shadow:this.shadow&amp;&amp;this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&amp;&amp;String(this.clipTo),backgroundColor:this.backgroundColor};return this.includeDefaultValues||(d=this._removeDefaultValues(d)),n.util.populateWithProperties(this,d,e),d},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var f=n.util.getKlass(e.type).prototype,o=f.stateProperties;return o.forEach(function(n){e[n]===f[n]&amp;&amp;delete e[n]}),e},toString:function(){return&quot;#&lt;fabric.&quot;+d(this.type)+&quot;&gt;&quot;},get:function(e){return this[e]},_setObject:function(e){for(var n in e)this._set(n,e[n])},set:function(e,n){return&quot;object&quot;==typeof e?this._setObject(e):&quot;function&quot;==typeof n&amp;&amp;&quot;clipTo&quot;!==e?this._set(e,n(this.get(e))):this._set(e,n),this},_set:function(e,f){var d=&quot;scaleX&quot;===e||&quot;scaleY&quot;===e;return d&amp;&amp;(f=this._constrainScale(f)),&quot;scaleX&quot;===e&amp;&amp;0&gt;f?(this.flipX=!this.flipX,f*=-1):&quot;scaleY&quot;===e&amp;&amp;0&gt;f?(this.flipY=!this.flipY,f*=-1):&quot;width&quot;===e||&quot;height&quot;===e?this.minScaleLimit=o(Math.min(.1,1/Math.max(this.width,this.height)),2):&quot;shadow&quot;!==e||!f||f instanceof n.Shadow||(f=new n.Shadow(f)),this[e]=f,this},toggle:function(e){var n=this.get(e);return&quot;boolean&quot;==typeof n&amp;&amp;this.set(e,!n),this},setSourcePath:function(e){return this.sourcePath=e,this},getViewportTransform:function(){return this.canvas&amp;&amp;this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(e,f){if(0!==this.width&amp;&amp;0!==this.height&amp;&amp;this.visible){if(e.save(),this._setupFillRule(e),this._transform(e,f),this._setStrokeStyles(e),this._setFillStyles(e),this.group&amp;&amp;&quot;path-group&quot;===this.group.type){e.translate(-this.group.width/2,-this.group.height/2);var o=this.transformMatrix;o&amp;&amp;e.transform.apply(e,o)}e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,this._setShadow(e),this.clipTo&amp;&amp;n.util.clipContext(this,e),this._render(e,f),this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),this._restoreFillRule(e),e.restore()}},_transform:function(e,n){var f=this.transformMatrix;f&amp;&amp;!this.group&amp;&amp;e.setTransform.apply(e,f),n||this.transform(e)},_setStrokeStyles:function(e){this.stroke&amp;&amp;(e.lineWidth=this.strokeWidth,e.lineCap=this.strokeLineCap,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,e.strokeStyle=this.stroke.toLive?this.stroke.toLive(e):this.stroke)},_setFillStyles:function(e){this.fill&amp;&amp;(e.fillStyle=this.fill.toLive?this.fill.toLive(e):this.fill)},_renderControls:function(e,f){var o=this.getViewportTransform();if(e.save(),this.active&amp;&amp;!f){var d;this.group&amp;&amp;(d=n.util.transformPoint(this.group.getCenterPoint(),o),e.translate(d.x,d.y),e.rotate(i(this.group.angle))),d=n.util.transformPoint(this.getCenterPoint(),o,null!=this.group),this.group&amp;&amp;(d.x*=this.group.scaleX,d.y*=this.group.scaleY),e.translate(d.x,d.y),e.rotate(i(this.angle)),this.drawBorders(e),this.drawControls(e)}e.restore()},_setShadow:function(e){this.shadow&amp;&amp;(e.shadowColor=this.shadow.color,e.shadowBlur=this.shadow.blur,e.shadowOffsetX=this.shadow.offsetX,e.shadowOffsetY=this.shadow.offsetY)},_removeShadow:function(e){this.shadow&amp;&amp;(e.shadowColor=&quot;&quot;,e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_renderFill:function(e){if(this.fill){if(e.save(),this.fill.toLive&amp;&amp;e.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),this.fill.gradientTransform){var n=this.fill.gradientTransform;e.transform.apply(e,n)}&quot;destination-over&quot;===this.fillRule?e.fill(&quot;evenodd&quot;):e.fill(),e.restore(),this.shadow&amp;&amp;!this.shadow.affectStroke&amp;&amp;this._removeShadow(e)}},_renderStroke:function(e){if(this.stroke&amp;&amp;0!==this.strokeWidth){if(e.save(),this.strokeDashArray)1&amp;this.strokeDashArray.length&amp;&amp;this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),t?(e.setLineDash(this.strokeDashArray),this._stroke&amp;&amp;this._stroke(e)):this._renderDashedStroke&amp;&amp;this._renderDashedStroke(e),e.stroke();else{if(this.stroke.gradientTransform){var n=this.stroke.gradientTransform;e.transform.apply(e,n)}this._stroke?this._stroke(e):e.stroke()}this._removeShadow(e),e.restore()}},clone:function(e,f){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(f),e):new n.Object(this.toObject(f))},cloneAsImage:function(e){var f=this.toDataURL();return n.util.loadImage(f,function(f){e&amp;&amp;e(new n.Image(f))}),this},toDataURL:function(e){e||(e={});var f=n.util.createCanvasElement(),o=this.getBoundingRect();f.width=o.width,f.height=o.height,n.util.wrapElement(f,&quot;div&quot;);var d=new n.Canvas(f);&quot;jpg&quot;===e.format&amp;&amp;(e.format=&quot;jpeg&quot;),&quot;jpeg&quot;===e.format&amp;&amp;(d.backgroundColor=&quot;#fff&quot;);var i={active:this.get(&quot;active&quot;),left:this.getLeft(),top:this.getTop()};this.set(&quot;active&quot;,!1),this.setPositionByOrigin(new n.Point(f.width/2,f.height/2),&quot;center&quot;,&quot;center&quot;);var t=this.canvas;d.add(this);var l=d.toDataURL(e);return this.set(i).setCoords(),this.canvas=t,d.dispose(),d=null,l},isType:function(e){return this.type===e},complexity:function(){return 0},toJSON:function(e){return this.toObject(e)},setGradient:function(e,f){f||(f={});var o={colorStops:[]};o.type=f.type||(f.r1||f.r2?&quot;radial&quot;:&quot;linear&quot;),o.coords={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2},(f.r1||f.r2)&amp;&amp;(o.coords.r1=f.r1,o.coords.r2=f.r2);for(var d in f.colorStops){var i=new n.Color(f.colorStops[d]);o.colorStops.push({offset:d,color:i.toRgb(),opacity:i.getAlpha()})}return this.set(e,n.Gradient.forObject(this,o))},setPatternFill:function(e){return this.set(&quot;fill&quot;,new n.Pattern(e))},setShadow:function(e){return this.set(&quot;shadow&quot;,e?new n.Shadow(e):null)},setColor:function(e){return this.set(&quot;fill&quot;,e),this},setAngle:function(e){var n=(&quot;center&quot;!==this.originX||&quot;center&quot;!==this.originY)&amp;&amp;this.centeredRotation;return n&amp;&amp;this._setOriginToCenter(),this.set(&quot;angle&quot;,e),n&amp;&amp;this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(e,n){n=n||this.canvas.getPointer(e);var f=this.translateToOriginPoint(this.getCenterPoint(),&quot;left&quot;,&quot;top&quot;);return{x:n.x-f.x,y:n.y-f.y}},_setupFillRule:function(e){this.fillRule&amp;&amp;(this._prevFillRule=e.globalCompositeOperation,e.globalCompositeOperation=this.fillRule)},_restoreFillRule:function(e){this.fillRule&amp;&amp;this._prevFillRule&amp;&amp;(e.globalCompositeOperation=this._prevFillRule)}}),n.util.createAccessors(n.Object),n.Object.prototype.rotate=n.Object.prototype.setAngle,f(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.__uid=0)}(&quot;undefined&quot;!=typeof exports?exports:this),function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(n,f,o){var d=n.x,i=n.y,t=this.stroke?this.strokeWidth:0;return&quot;left&quot;===f?d=n.x+(this.getWidth()+t*this.scaleX)/2:&quot;right&quot;===f&amp;&amp;(d=n.x-(this.getWidth()+t*this.scaleX)/2),&quot;top&quot;===o?i=n.y+(this.getHeight()+t*this.scaleY)/2:&quot;bottom&quot;===o&amp;&amp;(i=n.y-(this.getHeight()+t*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(d,i),n,e(this.angle))},translateToOriginPoint:function(n,f,o){var d=n.x,i=n.y,t=this.stroke?this.strokeWidth:0;return&quot;left&quot;===f?d=n.x-(this.getWidth()+t*this.scaleX)/2:&quot;right&quot;===f&amp;&amp;(d=n.x+(this.getWidth()+t*this.scaleX)/2),&quot;top&quot;===o?i=n.y-(this.getHeight()+t*this.scaleY)/2:&quot;bottom&quot;===o&amp;&amp;(i=n.y+(this.getHeight()+t*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(d,i),n,e(this.angle))},getCenterPoint:function(){var e=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,n){var f=this.getCenterPoint();return this.translateToOriginPoint(f,e,n)},toLocalPoint:function(n,f,o){var d,i,t=this.getCenterPoint(),l=this.stroke?this.strokeWidth:0;return f&amp;&amp;o?(d=&quot;left&quot;===f?t.x-(this.getWidth()+l*this.scaleX)/2:&quot;right&quot;===f?t.x+(this.getWidth()+l*this.scaleX)/2:t.x,i=&quot;top&quot;===o?t.y-(this.getHeight()+l*this.scaleY)/2:&quot;bottom&quot;===o?t.y+(this.getHeight()+l*this.scaleY)/2:t.y):(d=this.left,i=this.top),fabric.util.rotatePoint(new fabric.Point(n.x,n.y),t,-e(this.angle)).subtractEquals(new fabric.Point(d,i))},setPositionByOrigin:function(e,n,f){var o=this.translateToCenterPoint(e,n,f),d=this.translateToOriginPoint(o,this.originX,this.originY);this.set(&quot;left&quot;,d.x),this.set(&quot;top&quot;,d.y)},adjustPosition:function(n){var f=e(this.angle),o=this.getWidth()/2,d=Math.cos(f)*o,i=Math.sin(f)*o,t=this.getWidth(),l=Math.cos(f)*t,s=Math.sin(f)*t;&quot;center&quot;===this.originX&amp;&amp;&quot;left&quot;===n||&quot;right&quot;===this.originX&amp;&amp;&quot;center&quot;===n?(this.left-=d,this.top-=i):&quot;left&quot;===this.originX&amp;&amp;&quot;center&quot;===n||&quot;center&quot;===this.originX&amp;&amp;&quot;right&quot;===n?(this.left+=d,this.top+=i):&quot;left&quot;===this.originX&amp;&amp;&quot;right&quot;===n?(this.left+=l,this.top+=s):&quot;right&quot;===this.originX&amp;&amp;&quot;left&quot;===n&amp;&amp;(this.left-=l,this.top-=s),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX=&quot;center&quot;,this.originY=&quot;center&quot;,this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),&quot;left&quot;,&quot;center&quot;)}})}(),function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(e,n){var f=this.oCoords,o=new fabric.Point(f.tl.x,f.tl.y),d=new fabric.Point(f.tr.x,f.tr.y),i=new fabric.Point(f.bl.x,f.bl.y),t=new fabric.Point(f.br.x,f.br.y),l=fabric.Intersection.intersectPolygonRectangle([o,d,t,i],e,n);return&quot;Intersection&quot;===l.status},intersectsWithObject:function(e){function n(e){return{tl:new fabric.Point(e.tl.x,e.tl.y),tr:new fabric.Point(e.tr.x,e.tr.y),bl:new fabric.Point(e.bl.x,e.bl.y),br:new fabric.Point(e.br.x,e.br.y)}}var f=n(this.oCoords),o=n(e.oCoords),d=fabric.Intersection.intersectPolygonPolygon([f.tl,f.tr,f.br,f.bl],[o.tl,o.tr,o.br,o.bl]);return&quot;Intersection&quot;===d.status},isContainedWithinObject:function(e){var n=e.getBoundingRect(),f=new fabric.Point(n.left,n.top),o=new fabric.Point(n.left+n.width,n.top+n.height);return this.isContainedWithinRect(f,o)},isContainedWithinRect:function(e,n){var f=this.getBoundingRect();return f.left&gt;=e.x&amp;&amp;f.left+f.width&lt;=n.x&amp;&amp;f.top&gt;=e.y&amp;&amp;f.top+f.height&lt;=n.y},containsPoint:function(e){var n=this._getImageLines(this.oCoords),f=this._findCrossPoints(e,n);return 0!==f&amp;&amp;f%2===1},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,n){var f,o,d,i,t,l,s,u=0;for(var a in n)if(s=n[a],!(s.o.y&lt;e.y&amp;&amp;s.d.y&lt;e.y||s.o.y&gt;=e.y&amp;&amp;s.d.y&gt;=e.y||(s.o.x===s.d.x&amp;&amp;s.o.x&gt;=e.x?(t=s.o.x,l=e.y):(f=0,o=(s.d.y-s.o.y)/(s.d.x-s.o.x),d=e.y-f*e.x,i=s.o.y-o*s.o.x,t=-(d-i)/(f-o),l=d+f*t),t&gt;=e.x&amp;&amp;(u+=1),2!==u)))break;return u},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var e=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],n=fabric.util.array.min(e),f=fabric.util.array.max(e),o=Math.abs(n-f),d=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],i=fabric.util.array.min(d),t=fabric.util.array.max(d),l=Math.abs(i-t);return{left:n,top:i,width:o,height:l}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(e){return Math.abs(e)&lt;this.minScaleLimit?0&gt;e?-this.minScaleLimit:this.minScaleLimit:e},scale:function(e){return e=this._constrainScale(e),0&gt;e&amp;&amp;(this.flipX=!this.flipX,this.flipY=!this.flipY,e*=-1),this.scaleX=e,this.scaleY=e,this.setCoords(),this},scaleToWidth:function(e){var n=this.getBoundingRectWidth()/this.getWidth();return this.scale(e/this.width/n)},scaleToHeight:function(e){var n=this.getBoundingRectHeight()/this.getHeight();return this.scale(e/this.height/n)},setCoords:function(){var n=this.strokeWidth&gt;1?this.strokeWidth:0,f=e(this.angle),o=this.getViewportTransform(),d=function(e){return fabric.util.transformPoint(e,o)},i=this.width,t=this.height,l=&quot;round&quot;===this.strokeLineCap||&quot;square&quot;===this.strokeLineCap,s=&quot;line&quot;===this.type&amp;&amp;1===this.width,u=&quot;line&quot;===this.type&amp;&amp;1===this.height,a=l&amp;&amp;u||&quot;line&quot;!==this.type,p=l&amp;&amp;s||&quot;line&quot;!==this.type;s?i=n:u&amp;&amp;(t=n),a&amp;&amp;(i+=n),p&amp;&amp;(t+=n),this.currentWidth=i*this.scaleX,this.currentHeight=t*this.scaleY,this.currentWidth&lt;0&amp;&amp;(this.currentWidth=Math.abs(this.currentWidth));var c=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),y=Math.atan(isFinite(this.currentHeight/this.currentWidth)?this.currentHeight/this.currentWidth:0),m=Math.cos(y+f)*c,r=Math.sin(y+f)*c,v=Math.sin(f),w=Math.cos(f),b=this.getCenterPoint(),g=new fabric.Point(this.currentWidth,this.currentHeight),h=new fabric.Point(b.x-m,b.y-r),x=new fabric.Point(h.x+g.x*w,h.y+g.x*v),j=new fabric.Point(h.x-g.y*v,h.y+g.y*w),k=new fabric.Point(h.x+g.x/2*w,h.y+g.x/2*v),q=d(h),z=d(x),A=d(new fabric.Point(x.x-g.y*v,x.y+g.y*w)),B=d(j),C=d(new fabric.Point(h.x-g.y/2*v,h.y+g.y/2*w)),D=d(k),E=d(new fabric.Point(x.x-g.y/2*v,x.y+g.y/2*w)),F=d(new fabric.Point(j.x+g.x/2*w,j.y+g.x/2*v)),G=d(new fabric.Point(k.x,k.y)),H=Math.cos(y+f)*this.padding*Math.sqrt(2),I=Math.sin(y+f)*this.padding*Math.sqrt(2);return q=q.add(new fabric.Point(-H,-I)),z=z.add(new fabric.Point(I,-H)),A=A.add(new fabric.Point(H,I)),B=B.add(new fabric.Point(-I,H)),C=C.add(new fabric.Point((-H-I)/2,(-I+H)/2)),D=D.add(new fabric.Point((I-H)/2,-(I+H)/2)),E=E.add(new fabric.Point((I+H)/2,(I-H)/2)),F=F.add(new fabric.Point((H-I)/2,(H+I)/2)),G=G.add(new fabric.Point((I-H)/2,-(I+H)/2)),this.oCoords={tl:q,tr:z,br:A,bl:B,ml:C,mt:D,mr:E,mb:F,mtr:G},this._setCornerCoords&amp;&amp;this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas.moveTo(this,e),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var e=this.fill?this.fill.toLive?&quot;url(#SVGID_&quot;+this.fill.id+&quot;)&quot;:this.fill:&quot;none&quot;,n=&quot;destination-over&quot;===this.fillRule?&quot;evenodd&quot;:this.fillRule,f=this.stroke?this.stroke.toLive?&quot;url(#SVGID_&quot;+this.stroke.id+&quot;)&quot;:this.stroke:&quot;none&quot;,o=this.strokeWidth?this.strokeWidth:&quot;0&quot;,d=this.strokeDashArray?this.strokeDashArray.join(&quot; &quot;):&quot;&quot;,i=this.strokeLineCap?this.strokeLineCap:&quot;butt&quot;,t=this.strokeLineJoin?this.strokeLineJoin:&quot;miter&quot;,l=this.strokeMiterLimit?this.strokeMiterLimit:&quot;4&quot;,s=&quot;undefined&quot;!=typeof this.opacity?this.opacity:&quot;1&quot;,u=this.visible?&quot;&quot;:&quot; visibility: hidden;&quot;,a=this.shadow&amp;&amp;&quot;text&quot;!==this.type?&quot;filter: url(#SVGID_&quot;+this.shadow.id+&quot;);&quot;:&quot;&quot;;return[&quot;stroke: &quot;,f,&quot;; &quot;,&quot;stroke-width: &quot;,o,&quot;; &quot;,&quot;stroke-dasharray: &quot;,d,&quot;; &quot;,&quot;stroke-linecap: &quot;,i,&quot;; &quot;,&quot;stroke-linejoin: &quot;,t,&quot;; &quot;,&quot;stroke-miterlimit: &quot;,l,&quot;; &quot;,&quot;fill: &quot;,e,&quot;; &quot;,&quot;fill-rule: &quot;,n,&quot;; &quot;,&quot;opacity: &quot;,s,&quot;;&quot;,a,u].join(&quot;&quot;)},getSvgTransform:function(){if(this.group)return&quot;&quot;;var e=fabric.util.toFixed,n=this.getAngle(),f=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],o=fabric.util.transformPoint(this.getCenterPoint(),f),d=fabric.Object.NUM_FRACTION_DIGITS,i=&quot;path-group&quot;===this.type?&quot;&quot;:&quot;translate(&quot;+e(o.x,d)+&quot; &quot;+e(o.y,d)+&quot;)&quot;,t=0!==n?&quot; rotate(&quot;+e(n,d)+&quot;)&quot;:&quot;&quot;,l=1===this.scaleX&amp;&amp;1===this.scaleY&amp;&amp;1===f[0]&amp;&amp;1===f[3]?&quot;&quot;:&quot; scale(&quot;+e(this.scaleX*f[0],d)+&quot; &quot;+e(this.scaleY*f[3],d)+&quot;)&quot;,s=&quot;path-group&quot;===this.type?this.width*f[0]:0,u=this.flipX?&quot; matrix(-1 0 0 1 &quot;+s+&quot; 0) &quot;:&quot;&quot;,a=&quot;path-group&quot;===this.type?this.height*f[3]:0,p=this.flipY?&quot; matrix(1 0 0 -1 0 &quot;+a+&quot;)&quot;:&quot;&quot;;</td>
      </tr>
      <tr>
        <td id="L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="LC11" class="blob-code js-file-line">return[i,t,l,u,p].join(&quot;&quot;)},getSvgTransformMatrix:function(){return this.transformMatrix?&quot; matrix(&quot;+this.transformMatrix.join(&quot; &quot;)+&quot;)&quot;:&quot;&quot;},_createBaseSVGMarkup:function(){var e=[];return this.fill&amp;&amp;this.fill.toLive&amp;&amp;e.push(this.fill.toSVG(this,!1)),this.stroke&amp;&amp;this.stroke.toLive&amp;&amp;e.push(this.stroke.toSVG(this,!1)),this.shadow&amp;&amp;e.push(this.shadow.toSVG(this)),e}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(e){return this.get(e)!==this.originalState[e]},this)},saveState:function(e){return this.stateProperties.forEach(function(e){this.originalState[e]=this.get(e)},this),e&amp;&amp;e.stateProperties&amp;&amp;e.stateProperties.forEach(function(e){this.originalState[e]=this.get(e)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(e){&quot;use strict&quot;;function n(e,n){var f=e.origin,o=e.axis1,d=e.axis2,i=e.dimension,t=n.nearest,l=n.center,s=n.farthest;return function(){switch(this.get(f)){case t:return Math.min(this.get(o),this.get(d));case l:return Math.min(this.get(o),this.get(d))+.5*this.get(i);case s:return Math.max(this.get(o),this.get(d))}}}var f=e.fabric||(e.fabric={}),o=f.util.object.extend,d={x1:1,x2:1,y1:1,y2:1},i=f.StaticCanvas.supports(&quot;setLineDash&quot;);return f.Line?void f.warn(&quot;fabric.Line is already defined&quot;):(f.Line=f.util.createClass(f.Object,{type:&quot;line&quot;,x1:0,y1:0,x2:0,y2:0,initialize:function(e,n){n=n||{},e||(e=[0,0,0,0]),this.callSuper(&quot;initialize&quot;,n),this.set(&quot;x1&quot;,e[0]),this.set(&quot;y1&quot;,e[1]),this.set(&quot;x2&quot;,e[2]),this.set(&quot;y2&quot;,e[3]),this._setWidthHeight(n)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1)||1,this.height=Math.abs(this.y2-this.y1)||1,this.left=&quot;left&quot;in e?e.left:this._getLeftToOriginX(),this.top=&quot;top&quot;in e?e.top:this._getTopToOriginY()},_set:function(e,n){return this[e]=n,&quot;undefined&quot;!=typeof d[e]&amp;&amp;this._setWidthHeight(),this},_getLeftToOriginX:n({origin:&quot;originX&quot;,axis1:&quot;x1&quot;,axis2:&quot;x2&quot;,dimension:&quot;width&quot;},{nearest:&quot;left&quot;,center:&quot;center&quot;,farthest:&quot;right&quot;}),_getTopToOriginY:n({origin:&quot;originY&quot;,axis1:&quot;y1&quot;,axis2:&quot;y2&quot;,dimension:&quot;height&quot;},{nearest:&quot;top&quot;,center:&quot;center&quot;,farthest:&quot;bottom&quot;}),_render:function(e,n){if(e.beginPath(),n){var f=this.getCenterPoint();e.translate(f.x,f.y)}if(!this.strokeDashArray||this.strokeDashArray&amp;&amp;i){var o=this.x1&lt;=this.x2?-1:1,d=this.y1&lt;=this.y2?-1:1;e.moveTo(1===this.width?0:o*this.width/2,1===this.height?0:d*this.height/2),e.lineTo(1===this.width?0:-1*o*this.width/2,1===this.height?0:-1*d*this.height/2)}e.lineWidth=this.strokeWidth;var t=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&amp;&amp;this._renderStroke(e),e.strokeStyle=t},_renderDashedStroke:function(e){var n=this.x1&lt;=this.x2?-1:1,o=this.y1&lt;=this.y2?-1:1,d=1===this.width?0:n*this.width/2,i=1===this.height?0:o*this.height/2;e.beginPath(),f.util.drawDashedLine(e,d,i,-d,-i,this.strokeDashArray),e.closePath()},toObject:function(e){return o(this.callSuper(&quot;toObject&quot;,e),{x1:this.get(&quot;x1&quot;),y1:this.get(&quot;y1&quot;),x2:this.get(&quot;x2&quot;),y2:this.get(&quot;y2&quot;)})},toSVG:function(e){var n=this._createBaseSVGMarkup(),f=&quot;&quot;;if(!this.group){var o=-this.width/2-(this.x1&gt;this.x2?this.x2:this.x1),d=-this.height/2-(this.y1&gt;this.y2?this.y2:this.y1);f=&quot;translate(&quot;+o+&quot;, &quot;+d+&quot;) &quot;}return n.push(&quot;&lt;line &quot;,&#39;x1=&quot;&#39;,this.x1,&#39;&quot; y1=&quot;&#39;,this.y1,&#39;&quot; x2=&quot;&#39;,this.x2,&#39;&quot; y2=&quot;&#39;,this.y2,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),f,this.getSvgTransformMatrix(),&#39;&quot;/&gt;\n&#39;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},complexity:function(){return 1}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(&quot;x1 y1 x2 y2&quot;.split(&quot; &quot;)),f.Line.fromElement=function(e,n){var d=f.parseAttributes(e,f.Line.ATTRIBUTE_NAMES),i=[d.x1||0,d.y1||0,d.x2||0,d.y2||0];return new f.Line(i,o(d,n))},void(f.Line.fromObject=function(e){var n=[e.x1,e.y1,e.x2,e.y2];return new f.Line(n,e)}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;function n(e){return&quot;radius&quot;in e&amp;&amp;e.radius&gt;0}var f=e.fabric||(e.fabric={}),o=2*Math.PI,d=f.util.object.extend;return f.Circle?void f.warn(&quot;fabric.Circle is already defined.&quot;):(f.Circle=f.util.createClass(f.Object,{type:&quot;circle&quot;,radius:0,initialize:function(e){e=e||{},this.callSuper(&quot;initialize&quot;,e),this.set(&quot;radius&quot;,e.radius||0)},_set:function(e,n){return this.callSuper(&quot;_set&quot;,e,n),&quot;radius&quot;===e&amp;&amp;this.setRadius(n),this},toObject:function(e){return d(this.callSuper(&quot;toObject&quot;,e),{radius:this.get(&quot;radius&quot;)})},toSVG:function(e){var n=this._createBaseSVGMarkup(),f=0,o=0;return this.group&amp;&amp;(f=this.left+this.radius,o=this.top+this.radius),n.push(&quot;&lt;circle &quot;,&#39;cx=&quot;&#39;+f+&#39;&quot; cy=&quot;&#39;+o+&#39;&quot; &#39;,&#39;r=&quot;&#39;,this.radius,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&quot; &quot;,this.getSvgTransformMatrix(),&#39;&quot;/&gt;\n&#39;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},_render:function(e,n){e.beginPath(),e.arc(n?this.left+this.radius:0,n?this.top+this.radius:0,this.radius,0,o,!1),this._renderFill(e),this._renderStroke(e)},getRadiusX:function(){return this.get(&quot;radius&quot;)*this.get(&quot;scaleX&quot;)},getRadiusY:function(){return this.get(&quot;radius&quot;)*this.get(&quot;scaleY&quot;)},setRadius:function(e){this.radius=e,this.set(&quot;width&quot;,2*e).set(&quot;height&quot;,2*e)},complexity:function(){return 1}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(&quot;cx cy r&quot;.split(&quot; &quot;)),f.Circle.fromElement=function(e,o){o||(o={});var i=f.parseAttributes(e,f.Circle.ATTRIBUTE_NAMES);if(!n(i))throw new Error(&quot;value of `r` attribute is required and can not be negative&quot;);i.left=i.left||0,i.top=i.top||0;var t=new f.Circle(d(i,o));return t.left-=t.radius,t.top-=t.radius,t},void(f.Circle.fromObject=function(e){return new f.Circle(e)}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={});return n.Triangle?void n.warn(&quot;fabric.Triangle is already defined&quot;):(n.Triangle=n.util.createClass(n.Object,{type:&quot;triangle&quot;,initialize:function(e){e=e||{},this.callSuper(&quot;initialize&quot;,e),this.set(&quot;width&quot;,e.width||100).set(&quot;height&quot;,e.height||100)},_render:function(e){var n=this.width/2,f=this.height/2;e.beginPath(),e.moveTo(-n,f),e.lineTo(0,-f),e.lineTo(n,f),e.closePath(),this._renderFill(e),this._renderStroke(e)},_renderDashedStroke:function(e){var f=this.width/2,o=this.height/2;e.beginPath(),n.util.drawDashedLine(e,-f,o,0,-o,this.strokeDashArray),n.util.drawDashedLine(e,0,-o,f,o,this.strokeDashArray),n.util.drawDashedLine(e,f,o,-f,o,this.strokeDashArray),e.closePath()},toSVG:function(e){var n=this._createBaseSVGMarkup(),f=this.width/2,o=this.height/2,d=[-f+&quot; &quot;+o,&quot;0 &quot;+-o,f+&quot; &quot;+o].join(&quot;,&quot;);return n.push(&quot;&lt;polygon &quot;,&#39;points=&quot;&#39;,d,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;/&gt;&#39;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},complexity:function(){return 1}}),void(n.Triangle.fromObject=function(e){return new n.Triangle(e)}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=2*Math.PI,o=n.util.object.extend;return n.Ellipse?void n.warn(&quot;fabric.Ellipse is already defined.&quot;):(n.Ellipse=n.util.createClass(n.Object,{type:&quot;ellipse&quot;,rx:0,ry:0,initialize:function(e){e=e||{},this.callSuper(&quot;initialize&quot;,e),this.set(&quot;rx&quot;,e.rx||0),this.set(&quot;ry&quot;,e.ry||0),this.set(&quot;width&quot;,2*this.get(&quot;rx&quot;)),this.set(&quot;height&quot;,2*this.get(&quot;ry&quot;))},toObject:function(e){return o(this.callSuper(&quot;toObject&quot;,e),{rx:this.get(&quot;rx&quot;),ry:this.get(&quot;ry&quot;)})},toSVG:function(e){var n=this._createBaseSVGMarkup(),f=0,o=0;return this.group&amp;&amp;(f=this.left+this.rx,o=this.top+this.ry),n.push(&quot;&lt;ellipse &quot;,&#39;cx=&quot;&#39;,f,&#39;&quot; cy=&quot;&#39;,o,&#39;&quot; &#39;,&#39;rx=&quot;&#39;,this.rx,&#39;&quot; ry=&quot;&#39;,this.ry,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),this.getSvgTransformMatrix(),&#39;&quot;/&gt;\n&#39;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},_render:function(e,n){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(n?this.left+this.rx:0,n?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,f,!1),e.restore(),this._renderFill(e),this._renderStroke(e)},complexity:function(){return 1}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(&quot;cx cy rx ry&quot;.split(&quot; &quot;)),n.Ellipse.fromElement=function(e,f){f||(f={});var d=n.parseAttributes(e,n.Ellipse.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0;var i=new n.Ellipse(o(d,f));return i.top-=i.ry,i.left-=i.rx,i},void(n.Ellipse.fromObject=function(e){return new n.Ellipse(e)}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;if(n.Rect)return void console.warn(&quot;fabric.Rect is already defined&quot;);var o=n.Object.prototype.stateProperties.concat();o.push(&quot;rx&quot;,&quot;ry&quot;,&quot;x&quot;,&quot;y&quot;),n.Rect=n.util.createClass(n.Object,{stateProperties:o,type:&quot;rect&quot;,rx:0,ry:0,strokeDashArray:null,initialize:function(e){e=e||{},this.callSuper(&quot;initialize&quot;,e),this._initRxRy()},_initRxRy:function(){this.rx&amp;&amp;!this.ry?this.ry=this.rx:this.ry&amp;&amp;!this.rx&amp;&amp;(this.rx=this.ry)},_render:function(e,n){if(1===this.width&amp;&amp;1===this.height)return void e.fillRect(0,0,1,1);var f=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,i=this.height,t=n?this.left:-this.width/2,l=n?this.top:-this.height/2,s=0!==f||0!==o,u=.4477152502;e.beginPath(),e.moveTo(t+f,l),e.lineTo(t+d-f,l),s&amp;&amp;e.bezierCurveTo(t+d-u*f,l,t+d,l+u*o,t+d,l+o),e.lineTo(t+d,l+i-o),s&amp;&amp;e.bezierCurveTo(t+d,l+i-u*o,t+d-u*f,l+i,t+d-f,l+i),e.lineTo(t+f,l+i),s&amp;&amp;e.bezierCurveTo(t+u*f,l+i,t,l+i-u*o,t,l+i-o),e.lineTo(t,l+o),s&amp;&amp;e.bezierCurveTo(t,l+u*o,t+u*f,l,t+f,l),e.closePath(),this._renderFill(e),this._renderStroke(e)},_renderDashedStroke:function(e){var f=-this.width/2,o=-this.height/2,d=this.width,i=this.height;e.beginPath(),n.util.drawDashedLine(e,f,o,f+d,o,this.strokeDashArray),n.util.drawDashedLine(e,f+d,o,f+d,o+i,this.strokeDashArray),n.util.drawDashedLine(e,f+d,o+i,f,o+i,this.strokeDashArray),n.util.drawDashedLine(e,f,o+i,f,o,this.strokeDashArray),e.closePath()},toObject:function(e){var n=f(this.callSuper(&quot;toObject&quot;,e),{rx:this.get(&quot;rx&quot;)||0,ry:this.get(&quot;ry&quot;)||0});return this.includeDefaultValues||this._removeDefaultValues(n),n},toSVG:function(e){var n=this._createBaseSVGMarkup(),f=this.left,o=this.top;return this.group||(f=-this.width/2,o=-this.height/2),n.push(&quot;&lt;rect &quot;,&#39;x=&quot;&#39;,f,&#39;&quot; y=&quot;&#39;,o,&#39;&quot; rx=&quot;&#39;,this.get(&quot;rx&quot;),&#39;&quot; ry=&quot;&#39;,this.get(&quot;ry&quot;),&#39;&quot; width=&quot;&#39;,this.width,&#39;&quot; height=&quot;&#39;,this.height,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),this.getSvgTransformMatrix(),&#39;&quot;/&gt;\n&#39;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},complexity:function(){return 1}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(&quot;x y rx ry width height&quot;.split(&quot; &quot;)),n.Rect.fromElement=function(e,o){if(!e)return null;o=o||{};var d=n.parseAttributes(e,n.Rect.ATTRIBUTE_NAMES);return d.left=d.left||0,d.top=d.top||0,new n.Rect(f(o?n.util.object.clone(o):{},d))},n.Rect.fromObject=function(e){return new n.Rect(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.toFixed;return n.Polyline?void n.warn(&quot;fabric.Polyline is already defined&quot;):(n.Polyline=n.util.createClass(n.Object,{type:&quot;polyline&quot;,points:null,initialize:function(e,n){n=n||{},this.set(&quot;points&quot;,e),this.callSuper(&quot;initialize&quot;,n),this._calcDimensions()},_calcDimensions:function(){return n.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return n.Polygon.prototype._applyPointOffset.call(this)},toObject:function(e){return n.Polygon.prototype.toObject.call(this,e)},toSVG:function(e){for(var n=[],o=this._createBaseSVGMarkup(),d=0,i=this.points.length;i&gt;d;d++)n.push(f(this.points[d].x,2),&quot;,&quot;,f(this.points[d].y,2),&quot; &quot;);return o.push(&quot;&lt;polyline &quot;,&#39;points=&quot;&#39;,n.join(&quot;&quot;),&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&quot; &quot;,this.getSvgTransformMatrix(),&#39;&quot;/&gt;\n&#39;),e?e(o.join(&quot;&quot;)):o.join(&quot;&quot;)},_render:function(e){var n;e.beginPath(),this._applyPointOffset&amp;&amp;(this.group&amp;&amp;&quot;path-group&quot;===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),e.moveTo(this.points[0].x,this.points[0].y);for(var f=0,o=this.points.length;o&gt;f;f++)n=this.points[f],e.lineTo(n.x,n.y);this._renderFill(e),this._renderStroke(e)},_renderDashedStroke:function(e){var f,o;e.beginPath();for(var d=0,i=this.points.length;i&gt;d;d++)f=this.points[d],o=this.points[d+1]||f,n.util.drawDashedLine(e,f.x,f.y,o.x,o.y,this.strokeDashArray)},complexity:function(){return this.get(&quot;points&quot;).length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElement=function(e,f){if(!e)return null;f||(f={});var o=n.parsePointsAttribute(e.getAttribute(&quot;points&quot;)),d=n.parseAttributes(e,n.Polyline.ATTRIBUTE_NAMES);return null===o?null:new n.Polyline(o,n.util.object.extend(d,f))},void(n.Polyline.fromObject=function(e){var f=e.points;return new n.Polyline(f,e,!0)}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend,o=n.util.array.min,d=n.util.array.max,i=n.util.toFixed;return n.Polygon?void n.warn(&quot;fabric.Polygon is already defined&quot;):(n.Polygon=n.util.createClass(n.Object,{type:&quot;polygon&quot;,points:null,initialize:function(e,n){n=n||{},this.points=e,this.callSuper(&quot;initialize&quot;,n),this._calcDimensions()},_calcDimensions:function(){var e=this.points,n=o(e,&quot;x&quot;),f=o(e,&quot;y&quot;),i=d(e,&quot;x&quot;),t=d(e,&quot;y&quot;);this.width=i-n||1,this.height=t-f||1,this.left=n,this.top=f},_applyPointOffset:function(){this.points.forEach(function(e){e.x-=this.left+this.width/2,e.y-=this.top+this.height/2},this)},toObject:function(e){return f(this.callSuper(&quot;toObject&quot;,e),{points:this.points.concat()})},toSVG:function(e){for(var n=[],f=this._createBaseSVGMarkup(),o=0,d=this.points.length;d&gt;o;o++)n.push(i(this.points[o].x,2),&quot;,&quot;,i(this.points[o].y,2),&quot; &quot;);return f.push(&quot;&lt;polygon &quot;,&#39;points=&quot;&#39;,n.join(&quot;&quot;),&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),&quot; &quot;,this.getSvgTransformMatrix(),&#39;&quot;/&gt;\n&#39;),e?e(f.join(&quot;&quot;)):f.join(&quot;&quot;)},_render:function(e){var n;e.beginPath(),this._applyPointOffset&amp;&amp;(this.group&amp;&amp;&quot;path-group&quot;===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),e.moveTo(this.points[0].x,this.points[0].y);for(var f=0,o=this.points.length;o&gt;f;f++)n=this.points[f],e.lineTo(n.x,n.y);this._renderFill(e),(this.stroke||this.strokeDashArray)&amp;&amp;(e.closePath(),this._renderStroke(e))},_renderDashedStroke:function(e){var f,o;e.beginPath();for(var d=0,i=this.points.length;i&gt;d;d++)f=this.points[d],o=this.points[d+1]||this.points[0],n.util.drawDashedLine(e,f.x,f.y,o.x,o.y,this.strokeDashArray);e.closePath()},complexity:function(){return this.points.length}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=function(e,o){if(!e)return null;o||(o={});var d=n.parsePointsAttribute(e.getAttribute(&quot;points&quot;)),i=n.parseAttributes(e,n.Polygon.ATTRIBUTE_NAMES);return null===d?null:new n.Polygon(d,f(i,o))},void(n.Polygon.fromObject=function(e){return new n.Polygon(e.points,e,!0)}))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;function n(e){return&quot;H&quot;===e[0]?e[1]:e[e.length-2]}function f(e){return&quot;V&quot;===e[0]?e[1]:e[e.length-1]}var o=e.fabric||(e.fabric={}),d=o.util.array.min,i=o.util.array.max,t=o.util.object.extend,l=Object.prototype.toString,s=o.util.drawArc,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:&quot;l&quot;,M:&quot;L&quot;};return o.Path?void o.warn(&quot;fabric.Path is already defined&quot;):(o.Path=o.util.createClass(o.Object,{type:&quot;path&quot;,path:null,initialize:function(e,n){if(n=n||{},this.setOptions(n),!e)throw new Error(&quot;`path` argument is required&quot;);var f=&quot;[object Array]&quot;===l.call(e);this.path=f?e:e.match&amp;&amp;e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&amp;&amp;(f||(this.path=this._parsePath()),this._initializePath(n),n.sourcePath&amp;&amp;this.setSourcePath(n.sourcePath))},_initializePath:function(e){var n=&quot;width&quot;in e&amp;&amp;null!=e.width,f=&quot;height&quot;in e&amp;&amp;null!=e.width,o=&quot;left&quot;in e,d=&quot;top&quot;in e,i=o?this.left:0,l=d?this.top:0;n&amp;&amp;f?(d||(this.top=this.height/2),o||(this.left=this.width/2)):(t(this,this._parseDimensions()),n&amp;&amp;(this.width=e.width),f&amp;&amp;(this.height=e.height)),this.pathOffset=this.pathOffset||this._calculatePathOffset(i,l)},_calculatePathOffset:function(e,n){return{x:this.left-e-this.width/2,y:this.top-n-this.height/2}},_render:function(e,n){var f,o,d,i,t,l=null,u=0,a=0,p=0,c=0,y=0,m=0,r=-(this.width/2+this.pathOffset.x),v=-(this.height/2+this.pathOffset.y);n&amp;&amp;(r+=this.width/2,v+=this.height/2);for(var w=0,b=this.path.length;b&gt;w;++w){switch(f=this.path[w],f[0]){case&quot;l&quot;:p+=f[1],c+=f[2],e.lineTo(p+r,c+v);break;case&quot;L&quot;:p=f[1],c=f[2],e.lineTo(p+r,c+v);break;case&quot;h&quot;:p+=f[1],e.lineTo(p+r,c+v);break;case&quot;H&quot;:p=f[1],e.lineTo(p+r,c+v);break;case&quot;v&quot;:c+=f[1],e.lineTo(p+r,c+v);break;case&quot;V&quot;:c=f[1],e.lineTo(p+r,c+v);break;case&quot;m&quot;:p+=f[1],c+=f[2],u=p,a=c,e.moveTo(p+r,c+v);break;case&quot;M&quot;:p=f[1],c=f[2],u=p,a=c,e.moveTo(p+r,c+v);break;case&quot;c&quot;:o=p+f[5],d=c+f[6],y=p+f[3],m=c+f[4],e.bezierCurveTo(p+f[1]+r,c+f[2]+v,y+r,m+v,o+r,d+v),p=o,c=d;break;case&quot;C&quot;:p=f[5],c=f[6],y=f[3],m=f[4],e.bezierCurveTo(f[1]+r,f[2]+v,y+r,m+v,p+r,c+v);break;case&quot;s&quot;:o=p+f[3],d=c+f[4],y=y?2*p-y:p,m=m?2*c-m:c,e.bezierCurveTo(y+r,m+v,p+f[1]+r,c+f[2]+v,o+r,d+v),y=p+f[1],m=c+f[2],p=o,c=d;break;case&quot;S&quot;:o=f[3],d=f[4],y=2*p-y,m=2*c-m,e.bezierCurveTo(y+r,m+v,f[1]+r,f[2]+v,o+r,d+v),p=o,c=d,y=f[1],m=f[2];break;case&quot;q&quot;:o=p+f[3],d=c+f[4],y=p+f[1],m=c+f[2],e.quadraticCurveTo(y+r,m+v,o+r,d+v),p=o,c=d;break;case&quot;Q&quot;:o=f[3],d=f[4],e.quadraticCurveTo(f[1]+r,f[2]+v,o+r,d+v),p=o,c=d,y=f[1],m=f[2];break;case&quot;t&quot;:o=p+f[1],d=c+f[2],null===l[0].match(/[QqTt]/)?(y=p,m=c):&quot;t&quot;===l[0]?(y=2*p-i,m=2*c-t):&quot;q&quot;===l[0]&amp;&amp;(y=2*p-y,m=2*c-m),i=y,t=m,e.quadraticCurveTo(y+r,m+v,o+r,d+v),p=o,c=d,y=p+f[1],m=c+f[2];break;case&quot;T&quot;:o=f[1],d=f[2],y=2*p-y,m=2*c-m,e.quadraticCurveTo(y+r,m+v,o+r,d+v),p=o,c=d;break;case&quot;a&quot;:s(e,p+r,c+v,[f[1],f[2],f[3],f[4],f[5],f[6]+p+r,f[7]+c+v]),p+=f[6],c+=f[7];break;case&quot;A&quot;:s(e,p+r,c+v,[f[1],f[2],f[3],f[4],f[5],f[6]+r,f[7]+v]),p=f[6],c=f[7];break;case&quot;z&quot;:case&quot;Z&quot;:p=u,c=a,e.closePath()}l=f}},render:function(e,n){if(this.visible){e.save(),n&amp;&amp;e.translate(-this.width/2,-this.height/2);var f=this.transformMatrix;f&amp;&amp;e.transform(f[0],f[1],f[2],f[3],f[4],f[5]),n||this.transform(e),this._setStrokeStyles(e),this._setFillStyles(e),this._setShadow(e),this.clipTo&amp;&amp;o.util.clipContext(this,e),e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,this._render(e,n),this._renderFill(e),this._renderStroke(e),this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),e.restore()}},toString:function(){return&quot;#&lt;fabric.Path (&quot;+this.complexity()+&#39;): { &quot;top&quot;: &#39;+this.top+&#39;, &quot;left&quot;: &#39;+this.left+&quot; }&gt;&quot;},toObject:function(e){var n=t(this.callSuper(&quot;toObject&quot;,e),{path:this.path.map(function(e){return e.slice()}),pathOffset:this.pathOffset});return this.sourcePath&amp;&amp;(n.sourcePath=this.sourcePath),this.transformMatrix&amp;&amp;(n.transformMatrix=this.transformMatrix),n},toDatalessObject:function(e){var n=this.toObject(e);return this.sourcePath&amp;&amp;(n.path=this.sourcePath),delete n.sourcePath,n},toSVG:function(e){for(var n=[],f=this._createBaseSVGMarkup(),o=0,d=this.path.length;d&gt;o;o++)n.push(this.path[o].join(&quot; &quot;));var i=n.join(&quot; &quot;);return f.push(&quot;&lt;path &quot;,&#39;d=&quot;&#39;,i,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; transform=&quot;&#39;,this.getSvgTransform(),this.getSvgTransformMatrix(),&#39;&quot; stroke-linecap=&quot;round&quot; &#39;,&quot;/&gt;\n&quot;),e?e(f.join(&quot;&quot;)):f.join(&quot;&quot;)},complexity:function(){return this.path.length},_parsePath:function(){for(var e,n,f,o,d,i=[],t=[],l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,s=0,p=this.path.length;p&gt;s;s++){for(e=this.path[s],o=e.slice(1).trim(),t.length=0;f=l.exec(o);)t.push(f[0]);d=[e.charAt(0)];for(var c=0,y=t.length;y&gt;c;c++)n=parseFloat(t[c]),isNaN(n)||d.push(n);var m=d[0],r=u[m.toLowerCase()],v=a[m]||m;if(d.length-1&gt;r)for(var w=1,b=d.length;b&gt;w;w+=r)i.push([m].concat(d.slice(w,w+r))),m=v;else i.push(d)}return i},_parseDimensions:function(){var e=[],n=[],f={};this.path.forEach(function(o,d){this._getCoordsFromCommand(o,d,e,n,f)},this);var o=d(e),t=d(n),l=i(e),s=i(n),u=l-o,a=s-t,p={left:this.left+(o+u/2),top:this.top+(t+a/2),width:u,height:a};return p},_getCoordsFromCommand:function(e,o,d,i,t){var l=!1;&quot;H&quot;!==e[0]&amp;&amp;(t.x=n(0===o?e:this.path[o-1])),&quot;V&quot;!==e[0]&amp;&amp;(t.y=f(0===o?e:this.path[o-1])),e[0]===e[0].toLowerCase()&amp;&amp;(l=!0);var s,u=this._getXY(e,l,t);s=parseInt(u.x,10),isNaN(s)||d.push(s),s=parseInt(u.y,10),isNaN(s)||i.push(s)},_getXY:function(e,o,d){var i=o?d.x+n(e):&quot;V&quot;===e[0]?d.x:n(e),t=o?d.y+f(e):&quot;H&quot;===e[0]?d.y:f(e);return{x:i,y:t}}}),o.Path.fromObject=function(e,n){&quot;string&quot;==typeof e.path?o.loadSVGFromURL(e.path,function(f){var d=f[0],i=e.path;delete e.path,o.util.object.extend(d,e),d.setSourcePath(i),n(d)}):n(new o.Path(e.path,e))},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat([&quot;d&quot;]),o.Path.fromElement=function(e,n,f){var d=o.parseAttributes(e,o.Path.ATTRIBUTE_NAMES);n&amp;&amp;n(new o.Path(d.d,t(d,f)))},void(o.Path.async=!0))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend,o=n.util.array.invoke,d=n.Object.prototype.toObject;return n.PathGroup?void n.warn(&quot;fabric.PathGroup is already defined&quot;):(n.PathGroup=n.util.createClass(n.Path,{type:&quot;path-group&quot;,fill:&quot;&quot;,initialize:function(e,n){n=n||{},this.paths=e||[];for(var f=this.paths.length;f--;)this.paths[f].group=this;this.setOptions(n),n.widthAttr&amp;&amp;(this.scaleX=n.widthAttr/n.width),n.heightAttr&amp;&amp;(this.scaleY=n.heightAttr/n.height),this.setCoords(),n.sourcePath&amp;&amp;this.setSourcePath(n.sourcePath)},render:function(e){if(this.visible){e.save();var f=this.transformMatrix;f&amp;&amp;e.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(e),this._setShadow(e),this.clipTo&amp;&amp;n.util.clipContext(this,e);for(var o=0,d=this.paths.length;d&gt;o;++o)this.paths[o].render(e,!0);this.clipTo&amp;&amp;e.restore(),this._removeShadow(e),e.restore()}},_set:function(e,n){if(&quot;fill&quot;===e&amp;&amp;n&amp;&amp;this.isSameColor())for(var f=this.paths.length;f--;)this.paths[f]._set(e,n);return this.callSuper(&quot;_set&quot;,e,n)},toObject:function(e){var n=f(d.call(this,e),{paths:o(this.getObjects(),&quot;toObject&quot;,e)});return this.sourcePath&amp;&amp;(n.sourcePath=this.sourcePath),n},toDatalessObject:function(e){var n=this.toObject(e);return this.sourcePath&amp;&amp;(n.paths=this.sourcePath),n},toSVG:function(e){for(var n=this.getObjects(),f=&quot;translate(&quot;+this.left+&quot; &quot;+this.top+&quot;)&quot;,o=[&quot;&lt;g &quot;,&#39;style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; &#39;,&#39;transform=&quot;&#39;,f,this.getSvgTransform(),&#39;&quot; &#39;,&quot;&gt;\n&quot;],d=0,i=n.length;i&gt;d;d++)o.push(n[d].toSVG(e));return o.push(&quot;&lt;/g&gt;\n&quot;),e?e(o.join(&quot;&quot;)):o.join(&quot;&quot;)},toString:function(){return&quot;#&lt;fabric.PathGroup (&quot;+this.complexity()+&quot;): { top: &quot;+this.top+&quot;, left: &quot;+this.left+&quot; }&gt;&quot;},isSameColor:function(){var e=(this.getObjects()[0].get(&quot;fill&quot;)||&quot;&quot;).toLowerCase();return this.getObjects().every(function(n){return(n.get(&quot;fill&quot;)||&quot;&quot;).toLowerCase()===e})},complexity:function(){return this.paths.reduce(function(e,n){return e+(n&amp;&amp;n.complexity?n.complexity():0)},0)},getObjects:function(){return this.paths}}),n.PathGroup.fromObject=function(e,f){&quot;string&quot;==typeof e.paths?n.loadSVGFromURL(e.paths,function(o){var d=e.paths;delete e.paths;var i=n.util.groupSVGElements(o,e,d);f(i)}):n.util.enlivenObjects(e.paths,function(o){delete e.paths,f(new n.PathGroup(o,e))})},void(n.PathGroup.async=!0))}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend,o=n.util.array.min,d=n.util.array.max,i=n.util.array.invoke;if(!n.Group){var t={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};n.Group=n.util.createClass(n.Object,n.Collection,{type:&quot;group&quot;,initialize:function(e,n){n=n||{},this._objects=e||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;this.originalState={},this.callSuper(&quot;initialize&quot;),this._calcBounds(),this._updateObjectsCoords(),n&amp;&amp;f(this,n),this._setOpacityIfSame(),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(e){var n=e.getLeft(),f=e.getTop();e.set({originalLeft:n,originalTop:f,left:n-this.left,top:f-this.top}),e.setCoords(),e.__origHasControls=e.hasControls,e.hasControls=!1},toString:function(){return&quot;#&lt;fabric.Group: (&quot;+this.complexity()+&quot;)&gt;&quot;},addWithUpdate:function(e){return this._restoreObjectsState(),e&amp;&amp;(this._objects.push(e),e.group=this),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(e){e.set(&quot;active&quot;,!0),e.group=this},removeWithUpdate:function(e){return this._moveFlippedObject(e),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(e){e.group=this},_onObjectRemoved:function(e){delete e.group,e.set(&quot;active&quot;,!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(e,n){if(e in this.delegatedProperties){var f=this._objects.length;for(this[e]=n;f--;)this._objects[f].set(e,n)}else this[e]=n},toObject:function(e){return f(this.callSuper(&quot;toObject&quot;,e),{objects:i(this._objects,&quot;toObject&quot;,e)})},render:function(e){if(this.visible){e.save(),this.clipTo&amp;&amp;n.util.clipContext(this,e);for(var f=0,o=this._objects.length;o&gt;f;f++)this._renderObject(this._objects[f],e);this.clipTo&amp;&amp;e.restore(),e.restore()}},_renderControls:function(e,n){this.callSuper(&quot;_renderControls&quot;,e,n);for(var f=0,o=this._objects.length;o&gt;f;f++)this._objects[f]._renderControls(e)},_renderObject:function(e,n){var f=e.hasRotatingPoint;e.visible&amp;&amp;(e.hasRotatingPoint=!1,e.render(n),e.hasRotatingPoint=f)},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},_moveFlippedObject:function(e){var n=e.get(&quot;originX&quot;),f=e.get(&quot;originY&quot;),o=e.getCenterPoint();e.set({originX:&quot;center&quot;,originY:&quot;center&quot;,left:o.x,top:o.y}),this._toggleFlipping(e);var d=e.getPointByOrigin(n,f);return e.set({originX:n,originY:f,left:d.x,top:d.y}),this},_toggleFlipping:function(e){this.flipX&amp;&amp;(e.toggle(&quot;flipX&quot;),e.set(&quot;left&quot;,-e.get(&quot;left&quot;)),e.setAngle(-e.getAngle())),this.flipY&amp;&amp;(e.toggle(&quot;flipY&quot;),e.set(&quot;top&quot;,-e.get(&quot;top&quot;)),e.setAngle(-e.getAngle()))},_restoreObjectState:function(e){return this._setObjectPosition(e),e.setCoords(),e.hasControls=e.__origHasControls,delete e.__origHasControls,e.set(&quot;active&quot;,!1),e.setCoords(),delete e.group,this},_setObjectPosition:function(e){var n=this.getLeft(),f=this.getTop(),o=this._getRotatedLeftTop(e);e.set({angle:e.getAngle()+this.getAngle(),left:n+o.left,top:f+o.top,scaleX:e.get(&quot;scaleX&quot;)*this.get(&quot;scaleX&quot;),scaleY:e.get(&quot;scaleY&quot;)*this.get(&quot;scaleY&quot;)})},_getRotatedLeftTop:function(e){var n=this.getAngle()*(Math.PI/180);return{left:-Math.sin(n)*e.getTop()*this.get(&quot;scaleY&quot;)+Math.cos(n)*e.getLeft()*this.get(&quot;scaleX&quot;),top:Math.cos(n)*e.getTop()*this.get(&quot;scaleY&quot;)+Math.sin(n)*e.getLeft()*this.get(&quot;scaleX&quot;)}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get(&quot;left&quot;),this._originalTop=this.get(&quot;top&quot;),this},hasMoved:function(){return this._originalLeft!==this.get(&quot;left&quot;)||this._originalTop!==this.get(&quot;top&quot;)},setObjectsCoords:function(){return this.forEachObject(function(e){e.setCoords()}),this},_setOpacityIfSame:function(){var e=this.getObjects(),n=e[0]?e[0].get(&quot;opacity&quot;):1,f=e.every(function(e){return e.get(&quot;opacity&quot;)===n});f&amp;&amp;(this.opacity=n)},_calcBounds:function(e){for(var n,f=[],o=[],d=0,i=this._objects.length;i&gt;d;++d){n=this._objects[d],n.setCoords();for(var t in n.oCoords)f.push(n.oCoords[t].x),o.push(n.oCoords[t].y)}this.set(this._getBounds(f,o,e))},_getBounds:function(e,f,i){var t=n.util.invertTransform(this.getViewportTransform()),l=n.util.transformPoint(new n.Point(o(e),o(f)),t),s=n.util.transformPoint(new n.Point(d(e),d(f)),t),u={width:s.x-l.x||0,height:s.y-l.y||0};return i||(u.left=(l.x+s.x)/2||0,u.top=(l.y+s.y)/2||0),u},toSVG:function(e){for(var n=[&quot;&lt;g &quot;,&#39;transform=&quot;&#39;,this.getSvgTransform(),&#39;&quot;&gt;\n&#39;],f=0,o=this._objects.length;o&gt;f;f++)n.push(this._objects[f].toSVG(e));return n.push(&quot;&lt;/g&gt;\n&quot;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},get:function(e){if(e in t){if(this[e])return this[e];for(var n=0,f=this._objects.length;f&gt;n;n++)if(this._objects[n][e])return!0;return!1}return e in this.delegatedProperties?this._objects[0]&amp;&amp;this._objects[0].get(e):this[e]}}),n.Group.fromObject=function(e,f){n.util.enlivenObjects(e.objects,function(o){delete e.objects,f&amp;&amp;f(new n.Group(o,e))})},n.Group.async=!0}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=fabric.util.object.extend;return e.fabric||(e.fabric={}),e.fabric.Image?void fabric.warn(&quot;fabric.Image is already defined.&quot;):(fabric.Image=fabric.util.createClass(fabric.Object,{type:&quot;image&quot;,crossOrigin:&quot;&quot;,initialize:function(e,n){n||(n={}),this.filters=[],this.callSuper(&quot;initialize&quot;,n),this._initElement(e,n),this._initConfig(n),n.filters&amp;&amp;(this.filters=n.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(e,n){return this._element=e,this._originalElement=e,this._initConfig(),0!==this.filters.length&amp;&amp;this.applyFilters(n),this},setCrossOrigin:function(e){return this.crossOrigin=e,this._element.crossOrigin=e,this},getOriginalSize:function(){var e=this.getElement();return{width:e.width,height:e.height}},_stroke:function(e){e.save(),this._setStrokeStyles(e),e.beginPath(),e.strokeRect(-this.width/2,-this.height/2,this.width,this.height),e.closePath(),e.restore()},_renderDashedStroke:function(e){var n=-this.width/2,f=-this.height/2,o=this.width,d=this.height;e.save(),this._setStrokeStyles(e),e.beginPath(),fabric.util.drawDashedLine(e,n,f,n+o,f,this.strokeDashArray),fabric.util.drawDashedLine(e,n+o,f,n+o,f+d,this.strokeDashArray),fabric.util.drawDashedLine(e,n+o,f+d,n,f+d,this.strokeDashArray),fabric.util.drawDashedLine(e,n,f+d,n,f,this.strokeDashArray),e.closePath(),e.restore()},toObject:function(e){return n(this.callSuper(&quot;toObject&quot;,e),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(e){return e&amp;&amp;e.toObject()}),crossOrigin:this.crossOrigin})},toSVG:function(e){var n=[],f=-this.width/2,o=-this.height/2;if(this.group&amp;&amp;(f=this.left,o=this.top),n.push(&#39;&lt;g transform=&quot;&#39;,this.getSvgTransform(),this.getSvgTransformMatrix(),&#39;&quot;&gt;\n&#39;,&#39;&lt;image xlink:href=&quot;&#39;,this.getSvgSrc(),&#39;&quot; x=&quot;&#39;,f,&#39;&quot; y=&quot;&#39;,o,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; width=&quot;&#39;,this.width,&#39;&quot; height=&quot;&#39;,this.height,&#39;&quot; preserveAspectRatio=&quot;none&quot;&#39;,&quot;&gt;&lt;/image&gt;\n&quot;),this.stroke||this.strokeDashArray){var d=this.fill;this.fill=null,n.push(&quot;&lt;rect &quot;,&#39;x=&quot;&#39;,f,&#39;&quot; y=&quot;&#39;,o,&#39;&quot; width=&quot;&#39;,this.width,&#39;&quot; height=&quot;&#39;,this.height,&#39;&quot; style=&quot;&#39;,this.getSvgStyles(),&#39;&quot;/&gt;\n&#39;),this.fill=d}return n.push(&quot;&lt;/g&gt;\n&quot;),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},getSrc:function(){return this.getElement()?this.getElement().src||this.getElement()._src:void 0},toString:function(){return&#39;#&lt;fabric.Image: { src: &quot;&#39;+this.getSrc()+&#39;&quot; }&gt;&#39;},clone:function(e,n){this.constructor.fromObject(this.toObject(n),e)},applyFilters:function(e){if(this._originalElement){if(0===this.filters.length)return this._element=this._originalElement,void(e&amp;&amp;e());var n=this._originalElement,f=fabric.util.createCanvasElement(),o=fabric.util.createImage(),d=this;return f.width=n.width,f.height=n.height,f.getContext(&quot;2d&quot;).drawImage(n,0,0,n.width,n.height),this.filters.forEach(function(e){e&amp;&amp;e.applyTo(f)}),o.width=n.width,o.height=n.height,fabric.isLikelyNode?(o.src=f.toBuffer(void 0,fabric.Image.pngCompression),d._element=o,e&amp;&amp;e()):(o.onload=function(){d._element=o,e&amp;&amp;e(),o.onload=f=n=null},o.src=f.toDataURL(&quot;image/png&quot;)),this}},_render:function(e,n){this._element&amp;&amp;e.drawImage(this._element,n?this.left:-this.width/2,n?this.top:-this.height/2,this.width,this.height),this._renderStroke(e)},_resetWidthHeight:function(){var e=this.getElement();this.set(&quot;width&quot;,e.width),this.set(&quot;height&quot;,e.height)},_initElement:function(e){this.setElement(fabric.util.getById(e)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e),this._element&amp;&amp;this.crossOrigin&amp;&amp;(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(e,n){e.filters&amp;&amp;e.filters.length?fabric.util.enlivenObjects(e.filters,function(e){n&amp;&amp;n(e)},&quot;fabric.Image.filters&quot;):n&amp;&amp;n()},_setWidthHeight:function(e){this.width=&quot;width&quot;in e?e.width:this.getElement()?this.getElement().width||0:0,this.height=&quot;height&quot;in e?e.height:this.getElement()?this.getElement().height||0:0</td>
      </tr>
      <tr>
        <td id="L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="LC12" class="blob-code js-file-line">},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS=&quot;canvas-img&quot;,fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(e,n){fabric.util.loadImage(e.src,function(f){fabric.Image.prototype._initFilters.call(e,e,function(o){e.filters=o||[];var d=new fabric.Image(f,e);n&amp;&amp;n(d)})},null,e.crossOrigin)},fabric.Image.fromURL=function(e,n,f){fabric.util.loadImage(e,function(e){n(new fabric.Image(e,f))},null,f&amp;&amp;f.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat(&quot;x y width height xlink:href&quot;.split(&quot; &quot;)),fabric.Image.fromElement=function(e,f,o){var d=fabric.parseAttributes(e,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(d[&quot;xlink:href&quot;],f,n(o?fabric.util.object.clone(o):{},d))},fabric.Image.async=!0,void(fabric.Image.pngCompression=1))}(&quot;undefined&quot;!=typeof exports?exports:this),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:&quot;BaseFilter&quot;,toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Brightness=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Brightness&quot;,initialize:function(e){e=e||{},this.brightness=e.brightness||0},applyTo:function(e){for(var n=e.getContext(&quot;2d&quot;),f=n.getImageData(0,0,e.width,e.height),o=f.data,d=this.brightness,i=0,t=o.length;t&gt;i;i+=4)o[i]+=d,o[i+1]+=d,o[i+2]+=d;n.putImageData(f,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{brightness:this.brightness})}}),n.Image.filters.Brightness.fromObject=function(e){return new n.Image.filters.Brightness(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Convolute=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Convolute&quot;,initialize:function(e){e=e||{},this.opaque=e.opaque,this.matrix=e.matrix||[0,0,0,0,1,0,0,0,0];var f=n.util.createCanvasElement();this.tmpCtx=f.getContext(&quot;2d&quot;)},_createImageData:function(e,n){return this.tmpCtx.createImageData(e,n)},applyTo:function(e){for(var n=this.matrix,f=e.getContext(&quot;2d&quot;),o=f.getImageData(0,0,e.width,e.height),d=Math.round(Math.sqrt(n.length)),i=Math.floor(d/2),t=o.data,l=o.width,s=o.height,u=l,a=s,p=this._createImageData(u,a),c=p.data,y=this.opaque?1:0,m=0;a&gt;m;m++)for(var r=0;u&gt;r;r++){for(var v=m,w=r,b=4*(m*u+r),g=0,h=0,x=0,j=0,k=0;d&gt;k;k++)for(var q=0;d&gt;q;q++){var z=v+k-i,A=w+q-i;if(!(0&gt;z||z&gt;s||0&gt;A||A&gt;l)){var B=4*(z*l+A),C=n[k*d+q];g+=t[B]*C,h+=t[B+1]*C,x+=t[B+2]*C,j+=t[B+3]*C}}c[b]=g,c[b+1]=h,c[b+2]=x,c[b+3]=j+y*(255-j)}f.putImageData(p,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=function(e){return new n.Image.filters.Convolute(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.GradientTransparency=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;GradientTransparency&quot;,initialize:function(e){e=e||{},this.threshold=e.threshold||100},applyTo:function(e){for(var n=e.getContext(&quot;2d&quot;),f=n.getImageData(0,0,e.width,e.height),o=f.data,d=this.threshold,i=o.length,t=0,l=o.length;l&gt;t;t+=4)o[t+3]=d+255*(i-t)/i;n.putImageData(f,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{threshold:this.threshold})}}),n.Image.filters.GradientTransparency.fromObject=function(e){return new n.Image.filters.GradientTransparency(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={});n.Image.filters.Grayscale=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Grayscale&quot;,applyTo:function(e){for(var n,f=e.getContext(&quot;2d&quot;),o=f.getImageData(0,0,e.width,e.height),d=o.data,i=o.width*o.height*4,t=0;i&gt;t;)n=(d[t]+d[t+1]+d[t+2])/3,d[t]=n,d[t+1]=n,d[t+2]=n,t+=4;f.putImageData(o,0,0)}}),n.Image.filters.Grayscale.fromObject=function(){return new n.Image.filters.Grayscale}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={});n.Image.filters.Invert=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Invert&quot;,applyTo:function(e){var n,f=e.getContext(&quot;2d&quot;),o=f.getImageData(0,0,e.width,e.height),d=o.data,i=d.length;for(n=0;i&gt;n;n+=4)d[n]=255-d[n],d[n+1]=255-d[n+1],d[n+2]=255-d[n+2];f.putImageData(o,0,0)}}),n.Image.filters.Invert.fromObject=function(){return new n.Image.filters.Invert}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Mask=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Mask&quot;,initialize:function(e){e=e||{},this.mask=e.mask,this.channel=[0,1,2,3].indexOf(e.channel)&gt;-1?e.channel:0},applyTo:function(e){if(this.mask){var f,o=e.getContext(&quot;2d&quot;),d=o.getImageData(0,0,e.width,e.height),i=d.data,t=this.mask.getElement(),l=n.util.createCanvasElement(),s=this.channel,u=d.width*d.height*4;l.width=t.width,l.height=t.height,l.getContext(&quot;2d&quot;).drawImage(t,0,0,t.width,t.height);var a=l.getContext(&quot;2d&quot;).getImageData(0,0,t.width,t.height),p=a.data;for(f=0;u&gt;f;f+=4)i[f+3]=p[f+s];o.putImageData(d,0,0)}},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{mask:this.mask.toObject(),channel:this.channel})}}),n.Image.filters.Mask.fromObject=function(e,f){n.util.loadImage(e.mask.src,function(o){e.mask=new n.Image(o,e.mask),f&amp;&amp;f(new n.Image.filters.Mask(e))})},n.Image.filters.Mask.async=!0}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Noise=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Noise&quot;,initialize:function(e){e=e||{},this.noise=e.noise||0},applyTo:function(e){for(var n,f=e.getContext(&quot;2d&quot;),o=f.getImageData(0,0,e.width,e.height),d=o.data,i=this.noise,t=0,l=d.length;l&gt;t;t+=4)n=(.5-Math.random())*i,d[t]+=n,d[t+1]+=n,d[t+2]+=n;f.putImageData(o,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=function(e){return new n.Image.filters.Noise(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Pixelate=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Pixelate&quot;,initialize:function(e){e=e||{},this.blocksize=e.blocksize||4},applyTo:function(e){var n,f,o,d,i,t,l,s=e.getContext(&quot;2d&quot;),u=s.getImageData(0,0,e.width,e.height),a=u.data,p=u.height,c=u.width;for(f=0;p&gt;f;f+=this.blocksize)for(o=0;c&gt;o;o+=this.blocksize){n=4*f*c+4*o,d=a[n],i=a[n+1],t=a[n+2],l=a[n+3];for(var y=f,m=f+this.blocksize;m&gt;y;y++)for(var r=o,v=o+this.blocksize;v&gt;r;r++)n=4*y*c+4*r,a[n]=d,a[n+1]=i,a[n+2]=t,a[n+3]=l}s.putImageData(u,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{blocksize:this.blocksize})}}),n.Image.filters.Pixelate.fromObject=function(e){return new n.Image.filters.Pixelate(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.RemoveWhite=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;RemoveWhite&quot;,initialize:function(e){e=e||{},this.threshold=e.threshold||30,this.distance=e.distance||20},applyTo:function(e){for(var n,f,o,d=e.getContext(&quot;2d&quot;),i=d.getImageData(0,0,e.width,e.height),t=i.data,l=this.threshold,s=this.distance,u=255-l,a=Math.abs,p=0,c=t.length;c&gt;p;p+=4)n=t[p],f=t[p+1],o=t[p+2],n&gt;u&amp;&amp;f&gt;u&amp;&amp;o&gt;u&amp;&amp;a(n-f)&lt;s&amp;&amp;a(n-o)&lt;s&amp;&amp;a(f-o)&lt;s&amp;&amp;(t[p+3]=1);d.putImageData(i,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{threshold:this.threshold,distance:this.distance})}}),n.Image.filters.RemoveWhite.fromObject=function(e){return new n.Image.filters.RemoveWhite(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={});n.Image.filters.Sepia=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Sepia&quot;,applyTo:function(e){var n,f,o=e.getContext(&quot;2d&quot;),d=o.getImageData(0,0,e.width,e.height),i=d.data,t=i.length;for(n=0;t&gt;n;n+=4)f=.3*i[n]+.59*i[n+1]+.11*i[n+2],i[n]=f+100,i[n+1]=f+50,i[n+2]=f+255;o.putImageData(d,0,0)}}),n.Image.filters.Sepia.fromObject=function(){return new n.Image.filters.Sepia}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={});n.Image.filters.Sepia2=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Sepia2&quot;,applyTo:function(e){var n,f,o,d,i=e.getContext(&quot;2d&quot;),t=i.getImageData(0,0,e.width,e.height),l=t.data,s=l.length;for(n=0;s&gt;n;n+=4)f=l[n],o=l[n+1],d=l[n+2],l[n]=(.393*f+.769*o+.189*d)/1.351,l[n+1]=(.349*f+.686*o+.168*d)/1.203,l[n+2]=(.272*f+.534*o+.131*d)/2.14;i.putImageData(t,0,0)}}),n.Image.filters.Sepia2.fromObject=function(){return new n.Image.filters.Sepia2}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Tint=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Tint&quot;,initialize:function(e){e=e||{},this.color=e.color||&quot;#000000&quot;,this.opacity=&quot;undefined&quot;!=typeof e.opacity?e.opacity:new n.Color(this.color).getAlpha()},applyTo:function(e){var f,o,d,i,t,l,s,u,a,p=e.getContext(&quot;2d&quot;),c=p.getImageData(0,0,e.width,e.height),y=c.data,m=y.length;for(a=new n.Color(this.color).getSource(),o=a[0]*this.opacity,d=a[1]*this.opacity,i=a[2]*this.opacity,u=1-this.opacity,f=0;m&gt;f;f+=4)t=y[f],l=y[f+1],s=y[f+2],y[f]=o+t*u,y[f+1]=d+l*u,y[f+2]=i+s*u;p.putImageData(c,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{color:this.color,opacity:this.opacity})}}),n.Image.filters.Tint.fromObject=function(e){return new n.Image.filters.Tint(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend;n.Image.filters.Multiply=n.util.createClass(n.Image.filters.BaseFilter,{type:&quot;Multiply&quot;,initialize:function(e){e=e||{},this.color=e.color||&quot;#000000&quot;},applyTo:function(e){var f,o,d=e.getContext(&quot;2d&quot;),i=d.getImageData(0,0,e.width,e.height),t=i.data,l=t.length;for(o=new n.Color(this.color).getSource(),f=0;l&gt;f;f+=4)t[f]*=o[0]/255,t[f+1]*=o[1]/255,t[f+2]*=o[2]/255;d.putImageData(i,0,0)},toObject:function(){return f(this.callSuper(&quot;toObject&quot;),{color:this.color})}}),n.Image.filters.Multiply.fromObject=function(e){return new n.Image.filters.Multiply(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric;n.Image.filters.Blend=n.util.createClass({type:&quot;Blend&quot;,initialize:function(e){e=e||{},this.color=e.color||&quot;#000&quot;,this.image=e.image||!1,this.mode=e.mode||&quot;multiply&quot;,this.alpha=e.alpha||1},applyTo:function(e){var f,o,d,i,t,l,s,u=e.getContext(&quot;2d&quot;),a=u.getImageData(0,0,e.width,e.height),p=a.data,c=!1;if(this.image){c=!0;var y=n.util.createCanvasElement();y.width=this.image.width,y.height=this.image.height;var m=new n.StaticCanvas(y);m.add(this.image);var r=m.getContext(&quot;2d&quot;);s=r.getImageData(0,0,m.width,m.height).data}else s=new n.Color(this.color).getSource(),f=s[0]*this.alpha,o=s[1]*this.alpha,d=s[2]*this.alpha;for(var v=0,w=p.length;w&gt;v;v+=4)switch(i=p[v],t=p[v+1],l=p[v+2],c&amp;&amp;(f=s[v]*this.alpha,o=s[v+1]*this.alpha,d=s[v+2]*this.alpha),this.mode){case&quot;multiply&quot;:p[v]=i*f/255,p[v+1]=t*o/255,p[v+2]=l*d/255;break;case&quot;screen&quot;:p[v]=1-(1-i)*(1-f),p[v+1]=1-(1-t)*(1-o),p[v+2]=1-(1-l)*(1-d);break;case&quot;add&quot;:p[v]=Math.min(255,i+f),p[v+1]=Math.min(255,t+o),p[v+2]=Math.min(255,l+d);break;case&quot;diff&quot;:case&quot;difference&quot;:p[v]=Math.abs(i-f),p[v+1]=Math.abs(t-o),p[v+2]=Math.abs(l-d);break;case&quot;subtract&quot;:var b=i-f,g=t-o,h=l-d;p[v]=0&gt;b?0:b,p[v+1]=0&gt;g?0:g,p[v+2]=0&gt;h?0:h;break;case&quot;darken&quot;:p[v]=Math.min(i,f),p[v+1]=Math.min(t,o),p[v+2]=Math.min(l,d);break;case&quot;lighten&quot;:p[v]=Math.max(i,f),p[v+1]=Math.max(t,o),p[v+2]=Math.max(l,d)}u.putImageData(a,0,0)}}),n.Image.filters.Blend.fromObject=function(e){return new n.Image.filters.Blend(e)}}(&quot;undefined&quot;!=typeof exports?exports:this),function(e){&quot;use strict&quot;;var n=e.fabric||(e.fabric={}),f=n.util.object.extend,o=n.util.object.clone,d=n.util.toFixed,i=n.StaticCanvas.supports(&quot;setLineDash&quot;);if(n.Text)return void n.warn(&quot;fabric.Text is already defined&quot;);var t=n.Object.prototype.stateProperties.concat();t.push(&quot;fontFamily&quot;,&quot;fontWeight&quot;,&quot;fontSize&quot;,&quot;text&quot;,&quot;textDecoration&quot;,&quot;textAlign&quot;,&quot;fontStyle&quot;,&quot;lineHeight&quot;,&quot;textBackgroundColor&quot;,&quot;useNative&quot;,&quot;path&quot;),n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0},_reNewline:/\r?\n/,type:&quot;text&quot;,fontSize:40,fontWeight:&quot;normal&quot;,fontFamily:&quot;Times New Roman&quot;,textDecoration:&quot;&quot;,textAlign:&quot;left&quot;,fontStyle:&quot;&quot;,lineHeight:1.3,textBackgroundColor:&quot;&quot;,path:null,useNative:!0,stateProperties:t,stroke:null,shadow:null,initialize:function(e,n){n=n||{},this.text=e,this.__skipDimension=!0,this.setOptions(n),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(){if(!this.__skipDimension){var e=n.util.createCanvasElement();this._render(e.getContext(&quot;2d&quot;))}},toString:function(){return&quot;#&lt;fabric.Text (&quot;+this.complexity()+&#39;): { &quot;text&quot;: &quot;&#39;+this.text+&#39;&quot;, &quot;fontFamily&quot;: &quot;&#39;+this.fontFamily+&#39;&quot; }&gt;&#39;},_render:function(e){&quot;undefined&quot;==typeof Cufon||this.useNative===!0?this._renderViaNative(e):this._renderViaCufon(e)},_renderViaNative:function(e){var f=this.text.split(this._reNewline);this._setTextStyles(e),this.width=this._getTextWidth(e,f),this.height=this._getTextHeight(e,f),this.clipTo&amp;&amp;n.util.clipContext(this,e),this._renderTextBackground(e,f),this._translateForTextAlign(e),this._renderText(e,f),&quot;left&quot;!==this.textAlign&amp;&amp;&quot;justify&quot;!==this.textAlign&amp;&amp;e.restore(),this._renderTextDecoration(e,f),this.clipTo&amp;&amp;e.restore(),this._setBoundaries(e,f),this._totalLineHeight=0},_renderText:function(e,n){e.save(),this._setShadow(e),this._setupFillRule(e),this._renderTextFill(e,n),this._renderTextStroke(e,n),this._restoreFillRule(e),this._removeShadow(e),e.restore()},_translateForTextAlign:function(e){&quot;left&quot;!==this.textAlign&amp;&amp;&quot;justify&quot;!==this.textAlign&amp;&amp;(e.save(),e.translate(&quot;center&quot;===this.textAlign?this.width/2:this.width,0))},_setBoundaries:function(e,n){this._boundaries=[];for(var f=0,o=n.length;o&gt;f;f++){var d=this._getLineWidth(e,n[f]),i=this._getLineLeftOffset(d);this._boundaries.push({height:this.fontSize*this.lineHeight,width:d,left:i})}},_setTextStyles:function(e){this._setFillStyles(e),this._setStrokeStyles(e),e.textBaseline=&quot;alphabetic&quot;,this.skipTextAlign||(e.textAlign=this.textAlign),e.font=this._getFontDeclaration()},_getTextHeight:function(e,n){return this.fontSize*n.length*this.lineHeight},_getTextWidth:function(e,n){for(var f=e.measureText(n[0]||&quot;|&quot;).width,o=1,d=n.length;d&gt;o;o++){var i=e.measureText(n[o]).width;i&gt;f&amp;&amp;(f=i)}return f},_renderChars:function(e,n,f,o,d){n[e](f,o,d)},_renderTextLine:function(e,n,f,o,d,i){if(d-=this.fontSize/4,&quot;justify&quot;!==this.textAlign)return void this._renderChars(e,n,f,o,d,i);var t=n.measureText(f).width,l=this.width;if(l&gt;t)for(var s=f.split(/\s+/),u=n.measureText(f.replace(/\s+/g,&quot;&quot;)).width,a=l-u,p=s.length-1,c=a/p,y=0,m=0,r=s.length;r&gt;m;m++)this._renderChars(e,n,s[m],o+y,d,i),y+=n.measureText(s[m]).width+c;else this._renderChars(e,n,f,o,d,i)},_getLeftOffset:function(){return n.isLikelyNode?0:-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(e,n){if(this.fill||this._skipFillStrokeCheck){this._boundaries=[];for(var f=0,o=0,d=n.length;d&gt;o;o++){var i=this._getHeightOfLine(e,o,n);f+=i,this._renderTextLine(&quot;fillText&quot;,e,n[o],this._getLeftOffset(),this._getTopOffset()+f,o)}}},_renderTextStroke:function(e,n){if(this.stroke&amp;&amp;0!==this.strokeWidth||this._skipFillStrokeCheck){var f=0;e.save(),this.strokeDashArray&amp;&amp;(1&amp;this.strokeDashArray.length&amp;&amp;this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),i&amp;&amp;e.setLineDash(this.strokeDashArray)),e.beginPath();for(var o=0,d=n.length;d&gt;o;o++){var t=this._getHeightOfLine(e,o,n);f+=t,this._renderTextLine(&quot;strokeText&quot;,e,n[o],this._getLeftOffset(),this._getTopOffset()+f,o)}e.closePath(),e.restore()}},_getHeightOfLine:function(){return this.fontSize*this.lineHeight},_renderTextBackground:function(e,n){this._renderTextBoxBackground(e),this._renderTextLinesBackground(e,n)},_renderTextBoxBackground:function(e){this.backgroundColor&amp;&amp;(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),e.restore())},_renderTextLinesBackground:function(e,n){if(this.textBackgroundColor){e.save(),e.fillStyle=this.textBackgroundColor;for(var f=0,o=n.length;o&gt;f;f++)if(&quot;&quot;!==n[f]){var d=this._getLineWidth(e,n[f]),i=this._getLineLeftOffset(d);e.fillRect(this._getLeftOffset()+i,this._getTopOffset()+f*this.fontSize*this.lineHeight,d,this.fontSize*this.lineHeight)}e.restore()}},_getLineLeftOffset:function(e){return&quot;center&quot;===this.textAlign?(this.width-e)/2:&quot;right&quot;===this.textAlign?this.width-e:0},_getLineWidth:function(e,n){return&quot;justify&quot;===this.textAlign?this.width:e.measureText(n).width},_renderTextDecoration:function(e,n){function f(f){for(var i=0,t=n.length;t&gt;i;i++){var l=d._getLineWidth(e,n[i]),s=d._getLineLeftOffset(l);e.fillRect(d._getLeftOffset()+s,~~(f+i*d._getHeightOfLine(e,i,n)-o),l,1)}}if(this.textDecoration){var o=this._getTextHeight(e,n)/2,d=this;this.textDecoration.indexOf(&quot;underline&quot;)&gt;-1&amp;&amp;f(this.fontSize*this.lineHeight),this.textDecoration.indexOf(&quot;line-through&quot;)&gt;-1&amp;&amp;f(this.fontSize*this.lineHeight-this.fontSize/2),this.textDecoration.indexOf(&quot;overline&quot;)&gt;-1&amp;&amp;f(this.fontSize*this.lineHeight-this.fontSize)}},_getFontDeclaration:function(){return[n.isLikelyNode?this.fontWeight:this.fontStyle,n.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+&quot;px&quot;,n.isLikelyNode?&#39;&quot;&#39;+this.fontFamily+&#39;&quot;&#39;:this.fontFamily].join(&quot; &quot;)},render:function(e,n){if(this.visible){e.save(),this._transform(e,n);var f=this.transformMatrix,o=this.group&amp;&amp;&quot;path-group&quot;===this.group.type;o&amp;&amp;e.translate(-this.group.width/2,-this.group.height/2),f&amp;&amp;e.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o&amp;&amp;e.translate(this.left,this.top),this._render(e),e.restore()}},toObject:function(e){var n=f(this.callSuper(&quot;toObject&quot;,e),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,path:this.path,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative});return this.includeDefaultValues||this._removeDefaultValues(n),n},toSVG:function(e){var n=[],f=this.text.split(this._reNewline),o=this._getSVGLeftTopOffsets(f),d=this._getSVGTextAndBg(o.lineTop,o.textLeft,f),i=this._getSVGShadows(o.lineTop,f);return o.textTop+=this._fontAscent?this._fontAscent/5*this.lineHeight:0,this._wrapSVGTextAndBg(n,d,i,o),e?e(n.join(&quot;&quot;)):n.join(&quot;&quot;)},_getSVGLeftTopOffsets:function(e){var n=this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight,f=-(this.width/2),o=this.useNative?this.fontSize-1:this.height/2-e.length*this.fontSize-this._totalLineHeight;return{textLeft:f+(this.group&amp;&amp;&quot;path-group&quot;===this.group.type?this.left:0),textTop:o+(this.group&amp;&amp;&quot;path-group&quot;===this.group.type?this.top:0),lineTop:n}},_wrapSVGTextAndBg:function(e,n,f,o){e.push(&#39;&lt;g transform=&quot;&#39;,this.getSvgTransform(),this.getSvgTransformMatrix(),&#39;&quot;&gt;\n&#39;,n.textBgRects.join(&quot;&quot;),&quot;&lt;text &quot;,this.fontFamily?&#39;font-family=&quot;&#39;+this.fontFamily.replace(/&quot;/g,&quot;&#39;&quot;)+&#39;&quot; &#39;:&quot;&quot;,this.fontSize?&#39;font-size=&quot;&#39;+this.fontSize+&#39;&quot; &#39;:&quot;&quot;,this.fontStyle?&#39;font-style=&quot;&#39;+this.fontStyle+&#39;&quot; &#39;:&quot;&quot;,this.fontWeight?&#39;font-weight=&quot;&#39;+this.fontWeight+&#39;&quot; &#39;:&quot;&quot;,this.textDecoration?&#39;text-decoration=&quot;&#39;+this.textDecoration+&#39;&quot; &#39;:&quot;&quot;,&#39;style=&quot;&#39;,this.getSvgStyles(),&#39;&quot; &#39;,&#39;transform=&quot;translate(&#39;,d(o.textLeft,2),&quot; &quot;,d(o.textTop,2),&#39;)&quot;&gt;&#39;,f.join(&quot;&quot;),n.textSpans.join(&quot;&quot;),&quot;&lt;/text&gt;\n&quot;,&quot;&lt;/g&gt;\n&quot;)},_getSVGShadows:function(e,f){var o,i,t=[],l=1;if(!this.shadow||!this._boundaries)return t;for(o=0,i=f.length;i&gt;o;o++)if(&quot;&quot;!==f[o]){var s=this._boundaries&amp;&amp;this._boundaries[o]?this._boundaries[o].left:0;t.push(&#39;&lt;tspan x=&quot;&#39;,d(s+l+this.shadow.offsetX,2),0===o||this.useNative?&#39;&quot; y&#39;:&#39;&quot; dy&#39;,&#39;=&quot;&#39;,d(this.useNative?e*o-this.height/2+this.shadow.offsetY:e+(0===o?this.shadow.offsetY:0),2),&#39;&quot; &#39;,this._getFillAttributes(this.shadow.color),&quot;&gt;&quot;,n.util.string.escapeXml(f[o]),&quot;&lt;/tspan&gt;&quot;),l=1}else l++;return t},_getSVGTextAndBg:function(e,n,f){var o=[],d=[],i=1;this._setSVGBg(d);for(var t=0,l=f.length;l&gt;t;t++)&quot;&quot;!==f[t]?(this._setSVGTextLineText(f[t],t,o,e,i,d),i=1):i++,this.textBackgroundColor&amp;&amp;this._boundaries&amp;&amp;this._setSVGTextLineBg(d,t,n,e);return{textSpans:o,textBgRects:d}},_setSVGTextLineText:function(e,f,o,i,t){var l=this._boundaries&amp;&amp;this._boundaries[f]?d(this._boundaries[f].left,2):0;o.push(&#39;&lt;tspan x=&quot;&#39;,l,&#39;&quot; &#39;,0===f||this.useNative?&quot;y&quot;:&quot;dy&quot;,&#39;=&quot;&#39;,d(this.useNative?i*f-this.height/2:i*t,2),&#39;&quot; &#39;,this._getFillAttributes(this.fill),&quot;&gt;&quot;,n.util.string.escapeXml(e),&quot;&lt;/tspan&gt;&quot;)},_setSVGTextLineBg:function(e,n,f,o){e.push(&quot;&lt;rect &quot;,this._getFillAttributes(this.textBackgroundColor),&#39; x=&quot;&#39;,d(f+this._boundaries[n].left,2),&#39;&quot; y=&quot;&#39;,d(o*n-this.height/2,2),&#39;&quot; width=&quot;&#39;,d(this._boundaries[n].width,2),&#39;&quot; height=&quot;&#39;,d(this._boundaries[n].height,2),&#39;&quot;&gt;&lt;/rect&gt;\n&#39;)},_setSVGBg:function(e){this.backgroundColor&amp;&amp;this._boundaries&amp;&amp;e.push(&quot;&lt;rect &quot;,this._getFillAttributes(this.backgroundColor),&#39; x=&quot;&#39;,d(-this.width/2,2),&#39;&quot; y=&quot;&#39;,d(-this.height/2,2),&#39;&quot; width=&quot;&#39;,d(this.width,2),&#39;&quot; height=&quot;&#39;,d(this.height,2),&#39;&quot;&gt;&lt;/rect&gt;&#39;)},_getFillAttributes:function(e){var f=e&amp;&amp;&quot;string&quot;==typeof e?new n.Color(e):&quot;&quot;;return f&amp;&amp;f.getSource()&amp;&amp;1!==f.getAlpha()?&#39;opacity=&quot;&#39;+f.getAlpha()+&#39;&quot; fill=&quot;&#39;+f.setAlpha(1).toRgb()+&#39;&quot;&#39;:&#39;fill=&quot;&#39;+e+&#39;&quot;&#39;},_set:function(e,n){&quot;fontFamily&quot;===e&amp;&amp;this.path&amp;&amp;(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,&quot;$1&quot;+n+&quot;$3&quot;)),this.callSuper(&quot;_set&quot;,e,n),e in this._dimensionAffectingProps&amp;&amp;(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(&quot;x y dx dy font-family font-style font-weight font-size text-decoration text-anchor&quot;.split(&quot; &quot;)),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(e,f){if(!e)return null;var o=n.parseAttributes(e,n.Text.ATTRIBUTE_NAMES);f=n.util.object.extend(f?n.util.object.clone(f):{},o),&quot;dx&quot;in o&amp;&amp;(f.left+=o.dx),&quot;dy&quot;in o&amp;&amp;(f.top+=o.dy),&quot;fontSize&quot;in f||(f.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE),f.originX||(f.originX=&quot;left&quot;);var d=new n.Text(e.textContent,f),i=0;return&quot;left&quot;===d.originX&amp;&amp;(i=d.getWidth()/2),&quot;right&quot;===d.originX&amp;&amp;(i=-d.getWidth()/2),d.set({left:d.getLeft()+i,top:d.getTop()-d.getHeight()/2}),d},n.Text.fromObject=function(e){return new n.Text(e.text,o(e))},n.util.createAccessors(n.Text)}(&quot;undefined&quot;!=typeof exports?exports:this)}).call(this,require(&quot;buffer&quot;).Buffer)},{buffer:2,canvas:1,jsdom:1}]},{},[6])(6)});</td>
      </tr>
</table>

  </div>

</div>

<a href="#jump-to-line" rel="facebox[.linejump]" data-hotkey="l" style="display:none">Jump to Line</a>
<div id="jump-to-line" style="display:none">
  <form accept-charset="UTF-8" class="js-jump-to-line-form">
    <input class="linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" autofocus>
    <button type="submit" class="button">Go</button>
  </form>
</div>

        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="http://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="http://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>

    <a href="/" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2015 <span title="0.03611s from github-fe124-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="/contact" data-ga-click="Footer, go to contact, text:contact">Contact</a></li>
    </ul>
  </div>
</div>


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    

    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-9643b0378c6bcb216adcdaaaa703eed77aa239aaf1c2ae44cadb2fb5099ec172.js"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-f188e08a7b4dddd01cad76f5a45c982117c6b794f999c8941cd5b9d3c6664762.js"></script>
      
      

  </body>
</html>

