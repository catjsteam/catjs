var _catglobal=catrequire("cat.global"),_log=_catglobal.log(),_path=require("path"),_props=catrequire("cat.props"),_basePlugin=catrequire("cat.plugin.base"),_utils=catrequire("cat.utils"),_fs=require("fs.extra"),_typedas=require("typedas");module.exports=_basePlugin.ext(function(){function r(r){var e;return r?(r=_utils.globmatch({src:r}),void(r&&r.forEach(function(r){if(r&&_fs.existsSync(r)){e=_fs.lstatSync(r);try{e.isDirectory()?_fs.rmrfSync(r):e.isFile()&&_fs.unlinkSync(r)}catch(t){_log.error("[CAT clean plugin] failed with errors: ",t)}}}))):void 0}var e,t,i,a,n,o=this;return{init:function(s){var l,c,u=["[libraries plugin] No valid configuration"];s||(_log.error(u[1]),o.setDisabled(!0)),e=s.emitter,t=s.global,i=s.data,a=s.internalConfig,n=a?a.getProject():void 0,o.dataInit(i),c=i.data,s&&c&&(l="src"in c&&c.src,l?_typedas.isArray(l)?l.forEach(function(e){r(e)}):_typedas.isString(l)?r(l):_log.error("[CAT clean plugin] 'src' was found but not valid"):_log.error("[CAT clean plugin] 'src' property is required "),e.emit("job.done",{status:"done"}))},validate:function(){return{dependencies:["manager"]}}}});