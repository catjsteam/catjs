var _scrapEnum=require("./../ScrapEnum.js"),_log=catrequire("cat.global").log(),_props=catrequire("cat.props"),_utils=catrequire("cat.utils"),_regutils=catrequire("cat.regexp.utils");module.exports=function(){var e,n=function(e){return _regutils.getMatchedValue(e,"@@scrap@(.*)[@@]?(.*)?")},r=function(e){return _regutils.getMatchedValue(e,[_scrapEnum.scrapEnum.single,"(",_scrapEnum.scrapEnum.name,")","@"].join(""))};return{parse:function(t){var u,a,s,c,i,l,p=0,m=[-1,-1],o=[0,0],g={},E=[],_=[],h=[];if(e=_scrapEnum.getSingleLineEnum(),_scrapEnum.getScrapEnum("scrapinfo",g),t)for(u=t.length;u>p;p++)s=t[p],0===p?(g.start.line=s.number,g.start.col=s.col):p===u-1&&(g.end.line=s.number,g.end.col=s.col),a=s&&s.line?s.line:void 0,a&&(-1===m[0]&&(m[0]=a.indexOf(e)),m[0]>-1&&(m[1]=a.length,c||(l=a.substring(m[0]),c=r(l),i=n(l),-1!==i.indexOf("@@")&&(h=i.split("@@"),i=h.shift()),o[0]=s.number)),m[1]>-1&&(m[1]+=_scrapEnum.scrapEnum.close.length,_.push("@[scrap"),_.push("@@name "+i),_.push("@@"+h[0]),_.push("]@"),c===_scrapEnum.scrapEnum.name&&(o[1]=s.number,E.push({attrs:{name:i,attrs:h},name:c,rows:_.splice(0),start:{line:o[0],col:m[0]},end:{line:o[1],col:m[1]},comment:g})),o=[0,0],m=[-1,-1],c=void 0));return E.length>0?E:void 0}}}();