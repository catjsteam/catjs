var _utils=catrequire("cat.utils"),_global=catrequire("cat.global"),_props=catrequire("cat.props"),_log=catrequire("cat.global").log(),_typedas=require("typedas"),_path=require("path"),_minimatch=require("minimatch"),_jsutilsobj=require("js.utils").Object;module.exports=function(){function t(t){t._disabled=!1,t._to=null,t._from=null,t._data=null,t.dataInit=function(t){var e=this;t&&(this._data=t,_utils.copyObjProps(t,this)),this.get=function(t){return t&&t in e._data?e._data[t]:void 0}},t.isDisabled=function(){return this._disabled},t.setDisabled=function(t){this._disabled=t},t.setTo=function(t){this._to=t},t.getTo=function(){var t;return this._to||(t=this._data?this._data.to:void 0,t&&t&&t.path||(t={path:_global.get("home").working.path},_log.info(_props.get("cat.project.property.default.value").format("[base plugin]","path",t.path))),this.setTo(t.path)),this._to},t.getFrom=function(){return this._from},t.getFilters=function(){return this.filters},t.validate=function(t,e){var i,n;if(t){if(n=t.action,i=n&&n.validate?n.validate():void 0,i&&e&&"dependencies"in i&&i.dependencies)if(_typedas.isArray(i.dependencies)){if("dependency"in e)return _jsutilsobj.contains(i.dependencies,e.dependency)?!0:(_log.warning("[CAT base plugin] The current running dependency is: "+e.dependency+" that is not supported for the plugin named: "+t.name+" that supports the following: "+i.dependencies),!1)}else _log.info("[CAT base plugin] returned property 'dependencies' of validate method should be of Array type")}else _log.info("[CAT base plugin] No plugin validation has implemented.");return!0},t.applyFileExtFilters=function(t,e){function i(){if(!this.pattern)return!1;for(var t,i=this.ext.length,n=0;i>n;n++)if(t=this.pattern[n],_minimatch(e,t,{matchBase:!0}))return!0;return!1}function n(){if(!this.ext)return void 0;for(var t,n,r=_path.extname(e),o=this.ext.length,s=0;o>s;s++)if(t=this.ext[s],t===r||"*"===t){if(this.pattern&&(n=i.call(this),!n))continue;a=this.exclude?1:0}}var a=0;return e&&t&&_typedas.isArray(t)&&(t.forEach(function(t){t&&t.apply(function(){n.call(this)})}),a>0)?!0:!1}}return{ext:function(e){return e&&(t(e.prototype),e.validate=e.prototype.validate),e}}}();