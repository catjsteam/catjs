var _fs=require("fs"),_global=catrequire("cat.global"),_home=_global.get("home"),_workingDir,_fileName;_home&&_home.working&&(_workingDir=_home.working.path),_fileName=[_workingDir,".cat"].join("/"),module.exports=function(){function n(n,e){e=e||"appendFileSync";try{e&&_fs[e](_fileName,n,"utf8")}catch(i){console.log("[catcli] ",i)}}function e(){try{return _fs.readFileSync(_fileName,"utf8")}catch(n){console.log("[catcli] ",n)}}function i(n){var i,t,o=e(),r=0;o&&(i=o.split("\n"),i.forEach(function(e){r++,t={row:e,line:r},n.call(t)}))}return{set:function(e,i){var t=[e,i].join("=");-1===t.indexOf("\n")&&(t+="\n"),n(t)},get:function(n){var e=[];return i(function(){var i=this.row,t=this.line;i&&0===i.trim().indexOf(n)&&e.push({row:i,line:t})}),e},remove:function(e){function t(n){n.trim()&&(-1===n.indexOf("\n")&&(n+="\n"),o.push(n))}var o=[],r=0,l=e&&e.length?e.length:0;l&&(i(function(){var n,i=this.row,o=this.line,c=0;for(r=0;l>r;r++)if(n=e[r],o===n){c++;break}0===c&&(t(i),c=0)}),o&&o.length>0&&n(o.join(""),"writeFileSync"))},removeByKey:function(n,e){var i=this.get(n),t=[],o=[];return i.forEach(function(n){(!e||e&&n.row&&-1===n.row.indexOf(e))&&(t.push(n.line),o.push(n.row.trim().split("=")[1]))}),t&&t.length&&t.length>0&&this.remove(t),o}}}();