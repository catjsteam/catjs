var _=require("underscore"),_fs=require("fs.extra"),_global=catrequire("cat.global"),_log=_global.log(),_props=catrequire("cat.props"),_path=require("path");_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},module.exports=function(){var e={};return{underscore:_,readTemplateFile:function(t,r){var a,o=r?[r,t].join("."):[cathome,,"/src/template/",t].join("/");o=_path.normalize(o);try{o=[o,"tpl"].join("."),a=e[o],a||(a=_fs.readFileSync(o,"utf8")),e[o]=a}catch(i){_log.warning(_props.get("cat.file.failed").format("[inject ext]",o,i))}return a},template:function(e){if(!e)return void 0;var t=e.name,r=e.path,a=e.data,o=e.content,i=o||this.readTemplateFile(t,r),n=_.template(i);return n?n(a):void 0}}}();