{
    "name": "enyo-test",

    "env": {
        "source": "src/",
        "target": "target/"
    },

    "plugins": [
        {
            "name": "init.scrap",
            "type": "scrap",
            "dependency": "scan",
            "filters": [
                {
                    "type": "file",
                    "ext": ["*"],
                    "exclude": true
                },
                {
                    "type": "file",
                    "ext": [".js", ".html"],
                    "exclude": false
                },
                {
                    "type": "file",
                    "ext": [".js"],
                    "pattern": ["enyo", "cat"],
                    "exclude": true
                }
            ]
        },
        {
            "name": "libraries.build",
            "type": "libraries",
            "dependency": "manager",
            "imports": ["chai", "tmr", "cat"],
            "action": "build"
        },
        {
            "name": "init.copy",
            "type": "copy",
            "dependency": "scan",
            "path": "./../cat-test-app",
            "from": {
                "path": "/"
            },
            "to": {
                "path": "./target/enyo-test"
            },
            "filters": [
                {
                    "type": "file",
                    "ext": [".txt"],
                    "exclude": true
                }
            ]
        },
        {
            "name": "lib.copy",
            "type": "copy",
            "dependency": "scan",
            "path": "./lib",
            "from": {
                "path": "/"
            },
            "to": {
                "path": "./target/enyo-test/"
            }
        },
        {
            "name": "project.minify",
            "type": "minify",
            "path": "./target/enyo-test/",
            "filename": "cat.src.js",
            "src":["./src/**/*.js"]
        },
        {
            "name": "project.clean",
            "type": "clean",
            "src": ["target", "_cat_md.json"]
        },
        {
            "name": "project.wipe",
            "type": "clean",
            "src": ["src", "lib", "*.log", "*.xml"]
        },
        {
            "name": "mobile.install",
            "type": "spawn",
            "command": "adb",
            "args": ["install", "-r", "phonegap.apk"]
        },
        {
            "name": "mobile.test",
            "type": "spawn",
            "command": "adb",
            "args": ["shell", "am", "start",  "-e", "IP", "192.168.1.116", "-e", "PORT", "8087", "-n", "com.hp.aamobile.cat/.example"]
        },
        {
            "name": "project.phantomjs",
            "type": "phantomjs",
            "file": "phantomjs-script.js",
            "host": "http://localhost:8087"
        },
        {
            "name": "project.webserver.start",
            "type": "webserver",
            "action": "start",
            "port": "8087",
            "set": [{"key": "assert", "var": "assert", "prop":"result"}]
        },
        {
            "name": "project.webserver.stop",
            "type": "webserver",
            "action": "stop"
        },
        {
            "name": "parse.test",
            "type": "fileparse",
            "dependency": "manager",
            "files": ["./target/enyo-test/index.html"],
            "pattern": "{{replace test}}",
            "replace": "{{replaced}}",
            "flags": "g"
        }
    ],

    "tasks": [
        {
            "name": "init",
            "plugins": ["init.copy", "libraries.build", "lib.copy"]
        },
        {
            "name": "scrap",
            "plugins": ["scrap-common", "scrap-enyo", "custom.plugin", "init.scrap"]
        },
        {
            "name": "inject",
            "plugins": ["scrap-common", "scrap-enyo", "custom.plugin", "target.inject", "project.minify"]
        },
        {
            "name": "libs.build",
            "plugins":["libraries.build"]
        },
        {
            "name": "install",
            "plugins":["lib.copy"]
        },
        {
            "name": "clean",
            "plugins": ["project.clean"]
        },
        {
            "name": "wipe",
            "plugins": ["project.clean", "project.wipe"]
        },
        {
            "name": "minify",
            "plugins": ["project.minify"]
        },
        {
            "name": "test",
            "plugins": ["project.webserver.start", "project.phantomjs", "project.webserver.stop"]
        },
        {
            "name": "ptest",
            "plugins": ["parse.test"]
        },
        {
            "name": "mtest",
            "plugins": ["mobile.install",  "mobile.test"]
        },
        {
            "name": "phantom",
            "plugins": ["project.phantomjs"]
        },
        {
            "name": "server.start",
            "plugins": ["project.webserver.start"]
        },
        {
            "name": "server.stop",
            "plugins": ["project.webserver.stop"]
        },
        {
            "name": "sample",
            "plugins": ["sample.plugin"]
        }
    ]


}
